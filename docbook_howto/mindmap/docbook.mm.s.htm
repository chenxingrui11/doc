<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>DocBook//mm2html.xsl FreemindVersion:0.8.0</title><style>
                body{
                font-size:10pt;
                color:rgb(0,0,0);
                backgound-color:rgb(255,255,255);
                font-family:sans-serif;
                }
                p.info{
                font-size:8pt;
                text-align:right;
                color:rgb(127,127,127);
                }
                </style></head><body><script type="text/javascript" src="/docbook/includes/js/header.js"></script><script type="text/javascript">
              write_header("/docbook");
            </script><h1>DocBook</h1><p>

<ul><li><a name="Freemind_Link_1437486189"></a><span style="">DocBook</span>
<ul><li><a name="Freemind_Link_1096230742"></a><span style="">前言：我的 DocBook 之旅</span>
<ul><li><a name="Freemind_Link_1631330533"></a><span style="">我为什么选择了 DocBook</span>
<ul><li><a name="Freemind_Link_1933654109"></a><span style="">2001下半年，负责撰写防火墙API参考</span>
<ul><li><a name="Freemind_Link_1990354542"></a><span style="">一个需要持久维护的文档，Word文档很难</span></li></ul>
<ul><li><a name="Freemind_Link_1068406938"></a><span style="">一个可以在 Web 上生成表现一致且美观的文档</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1151913013"></a><span style="">榜样的力量</span>
<ul><li><a name="Freemind_Link_1450580237"></a><span style="">LDP</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1492702313"></a><span style="">DocBook 推广受阻</span>
<ul><li><a name="Freemind_Link_1161774908"></a><span style="">学习曲线陡峭，公司内部难以推广</span>
<ul><li><a name="Freemind_Link_1176117207"></a><span style="">技术人员的“专利”</span></li></ul>
<ul><li><a name="Freemind_Link_1122360991"></a><span style="">人员流动频繁，培训跟不上</span>
<ul><li><a name="Freemind_Link_467021023"></a><span style="">不付费的培训难以维持 ;-)</span>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1891995941"></a><span style="">协同著作能力较差</span>
<ul><li><a name="Freemind_Link_1767486375"></a><span style="">需要依靠版本控制系统建立协同著作功能</span>
<ul><li><a name="Freemind_Link_719855946"></a><span style="">可能还需要建立邮件列表提供邮件通知功能</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1544120264"></a><span style="">需要建立可行的内部网站管理规范，以便通过网站对文档的展示</span>
<ul><li><a name="Freemind_Link_807409839"></a><span style="">文档的自动编译</span></li></ul>
<ul><li><a name="Freemind_Link_1982841662"></a><span style="">新文档的加入</span></li></ul>
<ul><li><a name="Freemind_Link_960728362"></a><span style="">文档的分类</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_836231292"></a><span style="">Wiki 在协同著作上面具有先天的优势</span></li></ul>
<ul><li><a name="Freemind_Link_1885015815"></a><span style="">DocBook 生命力依旧</span>
<ul><li><a name="Freemind_Link_1493783902"></a><span style="">出版领域上的优势</span>
<ul><li><a name="Freemind_Link_595154968"></a><span style="">包括个人发表作品</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1748166776"></a><span style="">DocBook 满足多种格式需要。主要是可打印版本的需求</span></li></ul>
<ul><li><a name="Freemind_Link_793551005"></a><span style="">和 Wiki 比起来，DocBook 撰写的文档可以下载，本地浏览</span></li></ul>
<ul><li><a name="Freemind_Link_1085857916"></a><span style="">DocBook 的文档可署名、和分发，更有成就感</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_964447676"></a><span style="">我的文档写作模式</span>
<ul><li><a name="Freemind_Link_1537136705"></a><span style="">Wiki 是协同著作的首选，也可以作为日志系统</span></li></ul>
<ul><li><a name="Freemind_Link_799829372"></a><span style="">FreeMind 整理思路，针对大文档</span></li></ul>
<ul><li><a name="Freemind_Link_706508724"></a><span style="">DocBook，产品文档，个人著作出版</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1874938870"></a><span style="">什么是 DocBook</span>
<ul><li><a name="Freemind_Link_503361459"></a><span style="">What is Docbook</span>
<ul><li><a name="Freemind_Link_1714590297"></a><span style="">一种标识语言</span></li></ul>
<ul><li><a name="Freemind_Link_1210156193"></a><span style="">技术文档撰写</span></li></ul>
<ul><li><a name="Freemind_Link_1282811222"></a><span style="">独立机构维护</span></li></ul>
<ul><li><a name="Freemind_Link_220467142"></a><span style="">技术上说，DocBook是一个XML DTD或者 SGML DTD</span>
<ul><li><a name="Freemind_Link_110677519"></a><span style="">以 SGML DTD 描述，历史最久，XML DTD 则后来居上</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_278876164"></a><span style="">DocBook 文档描述语意，而非表现</span>
<ul><li><a name="Freemind_Link_457296357"></a><span style="">表现交给样式表处理，因此文档具有相似的外观</span></li></ul>
<ul><li><a name="Freemind_Link_1764675494"></a><span style="">文档撰写更加关注内容本身，而非表现</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1302579610"></a><span style="">与传统字处理软件的不同</span>
<ul><li><a name="Freemind_Link_1158433794"></a><span style="">倒是有点像字处理软件之前</span></li></ul>
<ul><li><a name="Freemind_Link_243175189"></a><span style="">作者提供手稿，编辑识别文档结构，录入，修饰格式，出版</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1501379640"></a><span style="">优点</span>
<ul><li><a name="Freemind_Link_297193753"></a><span style="">Single Sourcing (单一源文件维护)</span></li></ul>
<ul><li><a name="Freemind_Link_1295768659"></a><span style="">可版本控制</span></li></ul>
<ul><li><a name="Freemind_Link_537454468"></a><span style="">通用、开放的XML格式</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_470881862"></a><span style="">缺点</span>
<ul><li><a name="Freemind_Link_1295047465"></a><span style="">协同协作方面，不如 Wiki</span></li></ul>
<ul><li><a name="Freemind_Link_33332892"></a><span style="">格式排版，不如 latex</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1249362675"></a><span style="">样式表</span>
<ul><li><a name="Freemind_Link_29366920"></a><span style="">要理解为工具而非类似 CSS 一样的语言</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1472567240"></a><span style="">SGML/XML 标记语言基础</span>
<ul><li><a name="Freemind_Link_886724804"></a><span style="">Why SGML?</span>
<ul><li><a name="Freemind_Link_1294263208"></a><span style="">SGML 用于 DocBook 有更长久的历史</span></li></ul>
<ul><li><a name="Freemind_Link_58574322"></a><span style="">SGML 的工具也比较完善，比如一直在用 DSSSL 进行 DocBook 到 rtf 的转换</span></li></ul>
<ul><li><a name="Freemind_Link_985432645"></a><span style="">XML 则比较新，但后来居上</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_69906531"></a><span style="">SGML/XML 共性</span>

<ul><li><a name="Freemind_Link_435231759"></a><span style="">共性？您是说 SGML/XML 语言的交集么？这么说可就有点问题，因为 XML 是 SGML 子集</span></li></ul>
<ul><li><a name="Freemind_Link_1694322692"></a><span style="">structured, semantic markup</span>
<ul><li><a name="Freemind_Link_1150487255"></a><span style="">数据结构，与表现分开</span></li></ul>
<ul><li><a name="Freemind_Link_1950034069"></a><span style="">而 HTML 则离开的太远</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_207512601"></a><span style="">elements</span></li></ul>
<ul><li><a name="Freemind_Link_68315081"></a><span style="">attributes</span></li></ul>
<ul><li><a name="Freemind_Link_393076645"></a><span style="">实体 （entities）</span>
<ul><li><a name="Freemind_Link_895967859"></a><span style="">简单的说：类似于宏定义，用一个名称标识一块数据，引用该名称就引入该数据</span></li></ul>
<ul><li><a name="Freemind_Link_1165102836"></a><span style="">复杂因为有多种分类方法</span>
<ul><li><a name="Freemind_Link_1243305325"></a><span style="">可以用在两种不同文件中</span>
<ul><li><a name="Freemind_Link_280610710"></a><span style="">DTD 和 文档中</span></li></ul>
<ul><li><a name="Freemind_Link_7794762"></a><span style="">一般实体和参数实体</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_303185148"></a><span style="">一般实体和参数实体</span></li></ul>
<ul><li><a name="Freemind_Link_1481148807"></a><span style="">一般实体又分为内部一般实体和外部一般实体</span></li></ul>
<ul><li><a name="Freemind_Link_1669542209"></a><span style="">两种不同类型的实体</span>
<ul><li><a name="Freemind_Link_1317427579"></a><span style="">已析和未析</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_958825796"></a><span style="">两种或三种不同的引用方法</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_340098327"></a><span style="">一般实体和外部实体</span>
<ul><li><a name="Freemind_Link_1581017854"></a><span style="">一般实体</span>
<ul><li><a name="Freemind_Link_515554578"></a><span style="">一般实体声明位于文档的序言中</span></li></ul>
<ul><li><a name="Freemind_Link_1153838343"></a><span style="">一般实体的声明可以引用一般实体，除非出现循环调用</span></li></ul>
<ul><li><a name="Freemind_Link_1246837173"></a><span style="">常用的一般实体的定义可以放在 DTD 中，实现声明一次，多处使用</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_76109171"></a><span style="">外部实体</span>
<ul><li><a name="Freemind_Link_1122215977"></a><span style="">可以在一个文档中引用另外的文档</span>
<ul><li><a name="Freemind_Link_1846665130"></a><span style="">如: 将一篇文章分为几个部分，用外部实体方式定义、包含</span></li></ul>
<ul><li><a name="Freemind_Link_1010534863"></a><span style="">如: 引用图片文件</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_645220420"></a><span style="">可析实体</span>
<ul><li><a name="Freemind_Link_691896925"></a><span style="">外部数据是需要直接包含进来的文本数据，称为 parsed entities</span></li></ul>
<ul><li><a name="Freemind_Link_248952373"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_1004335877"></a><span style="">声明：
    &lt;!ENTITY ch01 SYSTEM "ch01.sgm"&gt;
    &lt;!ENTITY ch02 SYSTEM "ch02.sgm"&gt;
    &lt;!ENTITY ch03 SYSTEM "ch03.sgm"&gt;
    &lt;!ENTITY ch04 SYSTEM "ch04.sgm"&gt;

引用
    &lt;book&gt;
    &amp;ch01;
    &amp;ch02;
    &amp;ch03;
    &amp;ch04;
    &lt;/book&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_153679629"></a><span style="">非析实体</span>
<ul><li><a name="Freemind_Link_1792725397"></a><span style="">外部数据是一个图片，则称为 unparsed entities</span></li></ul>
<ul><li><a name="Freemind_Link_1491328932"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_1057647109"></a><span style="">声明：
    &lt;!ENTITY tree SYSTEM "tree.eps" NDATA EPS&gt;
引用：
    &lt;graphic entityref="tree"&gt;&lt;/graphic&gt;
</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_189385219"></a><span style="">字符实体</span>
<ul><li><a name="Freemind_Link_470503677"></a><span style="">特殊字符</span>
<ul><li><a name="Freemind_Link_121180583"></a><span style="">&lt;, &gt;, &amp; </span>
<ul><li><a name="Freemind_Link_161625474"></a><span style="">会被误认为元素或者实体</span></li></ul>
<ul><li><a name="Freemind_Link_1526307972"></a><span style="">因此需要</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_720014183"></a><span style="">其它字符，如非打印字符，Unicode 字符，中文等</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_780481550"></a><span style="">SGML </span>

<ul><li><a name="Freemind_Link_1815700746"></a><span style="">特殊字符由第三方实体分类文件定义，也称数据实体</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1746898775"></a><span style="">xml</span>
<ul><li><a name="Freemind_Link_608023261"></a><span style="">XML 可以用形如 &amp;#xhhhh; 的数字字符对照表示 Unicode 字符</span>

<ul><li><a name="Freemind_Link_95064654"></a><span style="">而 SGML 则必须进行定义</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1216258585"></a><span style="">参数实体</span>
<ul><li><a name="Freemind_Link_1017569783"></a><span style="">仅出现于 DTD 当中</span></li></ul>
<ul><li><a name="Freemind_Link_1555432286"></a><span style="">SGML 还可以出现于文档当中的标记块中</span>
<ul><li><a name="Freemind_Link_1728280891"></a><span style="">&lt;![keyword[ and end with ]]&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_556040326"></a><span style="">常见的标记块</span>
<ul><li><a name="Freemind_Link_1192683281"></a><a style="" href="#Freemind_Link_1555782602">INCLUDE</a>

</li></ul>
<ul><li><a name="Freemind_Link_1901817930"></a><a style="" href="#Freemind_Link_277430957">IGNORE</a>

</li></ul>
<ul><li><a name="Freemind_Link_58056792"></a><span style="">CDATA</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_413483893"></a><span style="">以 % 开始而非 &amp; 符号</span>
<ul><li><a name="Freemind_Link_656224884"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_1555782602"></a><span style="">参数实体定义
    &lt;!ENTITY % draft "IGNORE"&gt;
引用参数实体，实现对文本块的控制
    &lt;![%draft;[
    &lt;para&gt;
    This paragraph only appears in the draft version.
    &lt;/para&gt;
    ]]&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_277430957"></a><span style="">参数实体定义
    &lt;!ENTITY % draft "INCLUDE"&gt;
引用参数实体，实现对文本块的控制
    &lt;![%draft;[
    &lt;para&gt;
    This paragraph only appears in the draft version.
    &lt;/para&gt;
    ]]&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_808677325"></a><span style="">注释</span></li></ul>
<ul><li><a name="Freemind_Link_1728826274"></a><span style="">处理指令</span></li></ul>
<ul><li><a name="Freemind_Link_498158353"></a><span style="">好形与有效性</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_753717281"></a><span style="">SGML 的特征</span>
<ul><li><a name="Freemind_Link_1204124054"></a><span style="">SGML 资料，参见： http://xml.coverpages.org/general.html#overview</span></li></ul>
<ul><li><a name="Freemind_Link_1861830281"></a><span style="">文档结构</span>
<ul><li><a name="Freemind_Link_396512422"></a><span style="">序言</span>
<ul><li><a name="Freemind_Link_553132863"></a><span style="">SGML 文档必须有一个序言</span></li></ul>
<ul><li><a name="Freemind_Link_24793231"></a><span style="">SGML Declaration (可选)</span>
<ul><li><a name="Freemind_Link_269104213"></a><span style="">一个可选的 SGML Declaration（SGML声明）</span></li></ul>
<ul><li><a name="Freemind_Link_742624143"></a><span style="">但一般和 DTD 一起存放在外部的文件中，命名为“docbook.dcl”；</span></li></ul>
<ul><li><a name="Freemind_Link_74776887"></a><span style="">在 catalog 文件中：
    SGMLDECL "dtd/4.2/docbook.dcl"</span></li></ul>
<ul><li><a name="Freemind_Link_1861041837"></a><span style="">SGML Declaration 参考： http://www.oasis-open.org/cover/wlw11.html</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_365287773"></a><span style="">Document Type Declaration (必选)</span>
<ul><li><a name="Freemind_Link_1605194585"></a><span style="">例如: </span>
<ul><li><a name="Freemind_Link_757060037"></a><span style="">&lt;!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook V3.1//EN"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1565620194"></a><span style="">&lt;!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook V3.1//EN" [
&lt;!ENTITY nwalsh "Norman Walsh"&gt;
&lt;!ENTITY chap1 SYSTEM "chap1.sgm"&gt;
&lt;!ENTITY chap2 SYSTEM "chap2.sgm"&gt;
]&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1658577955"></a><span style="">声明根元素是什么</span>
<ul><li><a name="Freemind_Link_1199246756"></a><span style="">book</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1809585408"></a><span style="">声明使用的 DTD</span>
<ul><li><a name="Freemind_Link_657034349"></a><span style="">内部子集</span>
<ul><li><a name="Freemind_Link_1646518634"></a><span style="">&lt;!ENTITY nwalsh "Norman Walsh"&gt;
&lt;!ENTITY chap1 SYSTEM "chap1.sgm"&gt;
&lt;!ENTITY chap2 SYSTEM "chap2.sgm"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1864779170"></a><span style="">外部子集</span>
<ul><li><a name="Freemind_Link_241620489"></a><span style="">例如: PUBLIC "-//OASIS//DTD DocBook V3.1//EN"</span></li></ul>
<ul><li><a name="Freemind_Link_495766221"></a><span style="">如何引用外部子集？
public/system 标志符
catalog 文件</span>
<ul><li><a name="Freemind_Link_1912814272"></a><span style="">可以用 Public 或者 SYSTEM 标志符</span></li></ul>
<ul><li><a name="Freemind_Link_1905545691"></a><span style="">SGML 多用 PUBLIC 标志符，因为有更好的移植性</span>
<ul><li><a name="Freemind_Link_1350096635"></a><span style="">XML 降低了 Public 标志符地位。
XML 必须有 System 标志符，而不必有 Public 标志符</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_709043337"></a><a style="" href="#Freemind_Link_232845324">实际上 Public 标志符依赖 Catalog 文件</a>

<ul><li><a name="Freemind_Link_1359984627"></a><span style="">使用外部的 Catalog 文件，建立 Public 标志符到本地的文件映射</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1798085904"></a><span style="">SYSTEM 标志符格式不限
</span>
<ul><li><a name="Freemind_Link_530035251"></a><span style="">在 SGML 中通常是直接指向本地的文件名， 因在移植上的问题，一般多用 Public 标志符</span></li></ul>
<ul><li><a name="Freemind_Link_1903009334"></a><span style="">如： /usr/local/sgml/docbook/3.1/docbook.dtd </span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1799556276"></a><span style="">内部子集的声明优先于外部子集</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_918881546"></a><span style="">根元素</span>
<ul><li><a name="Freemind_Link_843340671"></a><span style="">根元素紧接着序言部分（当然注释、处理指令（processing instructions）除外）</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_598657270"></a><span style="">与 XML 兼容性问题</span>
<ul><li><a name="Freemind_Link_1453966077"></a><span style="">大小写问题</span>
<ul><li><a name="Freemind_Link_265225593"></a><span style="">SGML中 元素、属性大小写不敏感</span></li></ul>
<ul><li><a name="Freemind_Link_300268117"></a><span style="">但是，实体名称大小写敏感</span></li></ul>
<ul><li><a name="Freemind_Link_1506504046"></a><span style="">为向 XML 移植方便，请都用小写字母</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1094046607"></a><span style="">属性是否用引号的问题</span>
<ul><li><a name="Freemind_Link_1827166786"></a><span style="">除非属性值包含空格，否则可以不用引号将属性值括起来；</span></li></ul>
<ul><li><a name="Freemind_Link_211931488"></a><span style="">XML必须用引号将属性值扩起来</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1269856182"></a><span style="">如何将文章分解成几块
（利用外部实体）</span>
<ul><li><a name="Freemind_Link_528907337"></a><span style="">&lt;!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook V3.1//EN" [
&lt;!ENTITY chap1 SYSTEM "chap1.sgm"&gt;
&lt;!ENTITY chap2 SYSTEM "chap2.sgm"&gt;
&lt;!ENTITY chap3 SYSTEM "chap3.sgm"&gt;
&lt;!ENTITY appa SYSTEM "appa.sgm"&gt;
&lt;!ENTITY appb SYSTEM "appb.sgm"&gt;
]&gt;
&lt;book&gt;&lt;title&gt;My First Book&lt;/title&gt;
&amp;chap1;
&amp;chap2;
&amp;chap3;
&amp;appa;
&amp;appb;
&lt;/book&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1991033682"></a><span style="">&lt;chapter id="ch1"&gt;&lt;title&gt;My First Chapter&lt;/title&gt;
&lt;para&gt;My first paragraph.&lt;/para&gt;
...</span>
<ul><li><a name="Freemind_Link_1864444288"></a><span style="">注意不要在该文档文件头加入 DTD!</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_605612777"></a><span style="">XML 的特征</span>
<ul><li><a name="Freemind_Link_1659647593"></a><span style="">XML 资料参见：http://xml.coverpages.org/xmlIntro.html</span></li></ul>
<ul><li><a name="Freemind_Link_1994116786"></a><span style="">文档结构</span>
<ul><li><a name="Freemind_Link_355895192"></a><span style="">序言</span>
<ul><li><a name="Freemind_Link_1358566151"></a><span style="">XML Declaration (可选)</span>
<ul><li><a name="Freemind_Link_1622381605"></a><span style="">&lt;?xml version="1.0" standalone="no"?&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_530816426"></a><span style="">如果没有 XML Declaration，则版本为1.0，编码为 utf-8</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1560974906"></a><span style="">Document Type Declaration (可选)</span>
<ul><li><a name="Freemind_Link_1898094666"></a><span style="">严格的说，XML 并不需要一个 DTD</span></li></ul>
<ul><li><a name="Freemind_Link_1845976976"></a><span style="">例如: </span>
<ul><li><a name="Freemind_Link_41317836"></a><span style="">&lt;!DOCTYPE book PUBLIC "-//Norman Walsh//DTD DocBk XML V3.1.4//EN"
                         "http://nwalsh.com/docbook/xml/3.1.4/db3xml.dtd"&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1538197298"></a><span style="">声明根元素是什么</span>
<ul><li><a name="Freemind_Link_1423657253"></a><span style="">如: book</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1818289011"></a><span style="">声明使用的 DTD</span>
<ul><li><a name="Freemind_Link_991953924"></a><span style="">内部子集</span>
<ul><li><a name="Freemind_Link_710166629"></a><span style="">&lt;!ENTITY nwalsh "Norman Walsh"&gt;
&lt;!ENTITY chap1 SYSTEM "chap1.sgm"&gt;
&lt;!ENTITY chap2 SYSTEM "chap2.sgm"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1356764022"></a><span style="">如何引用外部子集？
public/system 标志符
catalog 文件</span>
<ul><li><a name="Freemind_Link_1385762190"></a><span style="">例如: PUBLIC "-//OASIS//DTD DocBook V3.1//EN"</span></li></ul>
<ul><li><a name="Freemind_Link_897510453"></a><span style="">如何引用外部子集？</span>
<ul><li><a name="Freemind_Link_1320819024"></a><span style="">SYSTEM 标志符（必选）</span>
<ul><li><a name="Freemind_Link_1551228770"></a><span style="">降低了 Public 标志符的作用</span></li></ul>
<ul><li><a name="Freemind_Link_1964225177"></a><span style="">SYSTEM 标志符在 XML 中必须是 URI 格式</span></li></ul>
<ul><li><a name="Freemind_Link_1376931323"></a><span style="">可以是 URL</span></li></ul>
<ul><li><a name="Freemind_Link_921495759"></a><span style="">也可以是本地文件： file:///usr/local/sgml/docbook/3.1/docbook.dtd </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_501040375"></a><span style="">PUBLIC 标志符（可选）</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_87894948"></a><span style="">内部子集的声明优先于外部子集</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1516411246"></a><span style="">根元素</span>
<ul><li><a name="Freemind_Link_1699520165"></a><span style="">根元素紧接着序言部分</span>
<ul><li><a name="Freemind_Link_721373066"></a><span style="">当然注释、处理指令（processing instructions）除外</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_699495647"></a><span style="">其它</span>
<ul><li><a name="Freemind_Link_1067210905"></a><span style="">XML所有的标记大小写敏感</span>
<ul><li><a name="Freemind_Link_364266872"></a><span style="">DocBook 的元素、属性、实体最好都用小写</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_771436847"></a><span style="">所有属性的值无论有空格与否，都要用引号括起来</span></li></ul>
<ul><li><a name="Freemind_Link_1123844225"></a><span style="">空元素要如下写法：&lt;br/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1452442017"></a><span style="">处理指令格式： &lt;?pitarget data?&gt;</span>
<ul><li><a name="Freemind_Link_1712835937"></a><span style="">而 SGML 的处理指令没有最后一个问号，形如：&lt;?pitarget data&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_232845324"></a><span style="">Catalog 文件</span>
<ul><li><a name="Freemind_Link_491454448"></a><span style="">The catalog file format was defined in 1994 by SGML Open (now OASIS). The formal specification is contained in OASIS Technical Resolution 9401:1997.   </span></li></ul>
<ul><li><a name="Freemind_Link_828121520"></a><span style="">优点</span>
<ul><li><a name="Freemind_Link_1757532508"></a><span style="">增加了可移植性，因为不同机器的 DTD, Entities, DSSSL/XSL 可以存放于不同位置；</span></li></ul>
<ul><li><a name="Freemind_Link_528214396"></a><span style="">避免了对带宽占用。XML 格式的 DocBook，SYSTEMID 格式为 URI，可以直接到网络上抓取，通过 catalog 建立本地映射，提高加载速度，以及减小对带宽占用</span></li></ul>
<ul><li><a name="Freemind_Link_1162495606"></a><span style="">可以通过 SYSTEM sysid1 sysid2 建立本地文件映射，可以写出可移植的 Makefile</span></li></ul>
<ul><li><a name="Freemind_Link_769785193"></a><span style="">方便 DTD、样式表升级</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_49927924"></a><span style="">SGML 格式的 Catalog 文件</span>
<ul><li><a name="Freemind_Link_707011139"></a><span style="">语法</span>
<ul><li><a name="Freemind_Link_1670741406"></a><span style="">由一系列 Ket/Value 对组成</span>
<ul><li><a name="Freemind_Link_1588269371"></a><span style="">如： PUBLIC, SYSTEM, SGMLDECL, DTDDECL, CATALOG, OVERRIDE, DELEGATE, and DOCTYPE.</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_423522370"></a><span style="">SGMLDECL 定义 SGML 声明</span>
<ul><li><a name="Freemind_Link_892750721"></a><span style="">SGMLDECL sysid </span>
<ul><li><a name="Freemind_Link_1948290812"></a><span style="">定义 SGML Declaration。很多工具具有默认的 SGML Declare</span></li></ul>
<ul><li><a name="Freemind_Link_616201575"></a><span style="">SGMLDECL "docbook/3.1/docbook.dcl"  </span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1454745982"></a><span style="">对不同文档设置不同 SGMLDecl</span>
<ul><li><a name="Freemind_Link_1385481653"></a><span style="">DTDDECL pubid sysid </span>
<ul><li><a name="Freemind_Link_386576164"></a><span style="">如果一个文档的 DocType 符合 pubid, 则使用 sysid 作为 SGMLDecl</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_824238744"></a><span style="">如: 在一个 catalog 文件中既定义 DTD 的
声明文件，又定义XML的声明文件</span>
<ul><li><a name="Freemind_Link_1470000242"></a><span style="">SGMLDECL "dtd/docbook-4.5/docbook.dcl"
DTDDECL  "-//OASIS//DTD DocBook XML V4.5CR1//EN"   "dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl"
DTDDECL  "-//OASIS//DTD DocBook XML V4.2//EN"      "dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl"
DTDDECL  "-//OASIS//DTD DocBook XML V3.1//EN"      "dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl"</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_674730101"></a><span style="">PUBLIC/SYSTEM 定位 DTD 位置</span>
<ul><li><a name="Freemind_Link_1318406815"></a><span style="">PUBLIC pubid sysid </span>
<ul><li><a name="Freemind_Link_885521559"></a><span style="">&lt;html&gt;PUBLIC 关键字用于 public identifiers 到 system identifiers 的映射：
&lt;div&gt;&lt;blockquote&gt;&lt;i&gt;
    PUBLIC "-//OASIS//DTD DocBook V3.1//EN" "docbook/3.1/docbook.dtd"
&lt;/i&gt;&lt;/blockquote&gt;&lt;/div&gt;


</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1221281989"></a><span style="">SYSTEM sysid1 sysid2 </span>
<ul><li><a name="Freemind_Link_1375280966"></a><span style="">&lt;html&gt;SYSTEM 关键字用于 system identifiers 到 system identifiers 的映射:
&lt;div&gt;&lt;blockquote&gt;&lt;i&gt;
SYSTEM "http://nwalsh.com/docbook/xml/1.3/db3xml.dtd"&lt;br&gt;
&lt;blockquote&gt;&lt;i&gt;
"docbook/xml/1.3/db3xml.dtd"
&lt;/blockquote&gt;&lt;/i&gt;
&lt;/i&gt;&lt;/blockquote&gt;&lt;/div&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_723501654"></a><span style="">OVERRIDE bool </span>
<ul><li><a name="Freemind_Link_1669512825"></a><span style="">默认 System 标志符优先 于 Public 标志符</span></li></ul>
<ul><li><a name="Freemind_Link_1792741057"></a><span style="">OVERRIDE YES，则Public 标志符优先</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_748526570"></a><span style="">DOCTYPE name sysid </span>
<ul><li><a name="Freemind_Link_1388858496"></a><span style="">如: DOCTYPE BOOK n:/share/sgml/docbook/3.1/docbook.dtd </span></li></ul>
<ul><li><a name="Freemind_Link_641419968"></a><span style="">定义缺省的 Doctype, 当文档没有指定 public/system 标识，或者没有定义DocType 时</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1835894932"></a><span style="">CATALOG 实现 catalog 文件的级联</span></li></ul>
<ul><li><a name="Freemind_Link_1575646957"></a><span style="">其它</span>
<ul><li><a name="Freemind_Link_505663324"></a><span style="">DELEGATE 实现条件 catalog 级联</span>
<ul><li><a name="Freemind_Link_1415748972"></a><span style="">如: DELEGATE "-//OASIS" "/usr/sgml/oasis/catalog"</span></li></ul>
<ul><li><a name="Freemind_Link_508292992"></a><span style="">引用到 "-//OASIS" 后，采取读取相应的 catalog 文件</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_116395784"></a><span style="">ENTITY name sysid </span>
<ul><li><a name="Freemind_Link_1820965806"></a><span style="">实体</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1428906954"></a><span style="">ENTITY %name sysid </span>
<ul><li><a name="Freemind_Link_606589865"></a><span style="">参数实体</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_871885332"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_1013385582"></a><span style="">-- Comments are delimited by pairs of double-hyphens,
   as in SGML and XML comments. --
                                                           
OVERRIDE YES
                                                           
SGMLDECL "n:/share/sgml/docbook/3.1/docbook.dcl"
                                                           
DOCTYPE  BOOK  n:/share/sgml/docbook/3.1/docbook.dtd
                                                           
PUBLIC "-//OASIS//DTD DocBook V3.1//EN" 
  n:/share/sgml/docbook/3.1/docbook.dtd
                                                           
SYSTEM "http://nwalsh.com/docbook/xml/1.3/db3xml.dtd"
  n:/share/sgml/Norman_Walsh/db3xml/db3xml.dtd
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_974272212"></a><span style="">工具</span>
<ul><li><a name="Freemind_Link_552969889"></a><span style="">openjade, opensp 可以利用该格式的 catalog 文件</span></li></ul>
<ul><li><a name="Freemind_Link_89957041"></a><span style="">可以在 openjade, opensp 等工具中用命令行 -c catalogfile 指定位置</span></li></ul>
<ul><li><a name="Freemind_Link_487095669"></a><span style="">也可以通过环境变量 SGML_CATALOG_FILES 指定Catalog 文件，多个catalog文件可以用冒号分隔</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1571284942"></a><span style="">XML格式的 Catalog 文件</span>
<ul><li><a name="Freemind_Link_994660296"></a><span style="">语法</span>
<ul><li><a name="Freemind_Link_1013641120"></a><span style="">public/system 定位 DTD 位置</span>
<ul><li><a name="Freemind_Link_278152877"></a><span style="">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE catalog
   PUBLIC "-//OASIS/DTD Entity Resolution XML Catalog V1.0//EN"
   "http://www.oasis-open.org/committees/entity/release/1.0/catalog.dtd"&gt; 
&lt;catalog  xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog"&gt;  
  &lt;group  prefer="public"  xml:base="file:///usr/share/xml/" &gt;  

    &lt;public 
       publicId="-//OASIS//DTD DocBook XML V4.4//EN"  
       uri="docbook44/docbookx.dtd"/&gt;

    &lt;system
       systemId="http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd"  
       uri="docbook44/docbookx.dtd"/&gt;

    &lt;system
       systemId="docbook4.4.dtd"    
       uri="docbook44/docbookx.dtd"/&gt;
  &lt;/group&gt;
&lt;/catalog&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_366143079"></a><span style="">uri 定位 XSL 样式表位置
（本地到本地）</span>
<ul><li><a name="Freemind_Link_598462521"></a><span style="">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE catalog
   PUBLIC "-//OASIS/DTD Entity Resolution XML Catalog V1.0//EN"
   "http://www.oasis-open.org/committees/entity/release/1.0/catalog.dtd"&gt;

&lt;catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog"&gt;
    &lt;uri
        name="docbook.xsl"
        uri="file:///usr/share/xml/docbook-xsl-1.68.1/html/docbook.xsl"/&gt;
&lt;/catalog&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_633858044"></a><span style="">uri 将 web 地址对应本地文件
（URL 到本地）</span>
<ul><li><a name="Freemind_Link_1346519721"></a><span style="">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE catalog
   PUBLIC "-//OASIS/DTD Entity Resolution XML Catalog V1.0//EN"
   "http://www.oasis-open.org/committees/entity/release/1.0/catalog.dtd"&gt;

&lt;catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog"&gt;

&lt;system
  systemId="http://www.oasis-open.org/docbook/xml/4.4/"
  uri="file:///usr/share/xml/docbook44/" /&gt;
&lt;uri
  name="http://docbook.sourceforge.net/release/xsl/current/html/docbook.xsl"
  uri="file:///usr/share/xml/docbook-xsl-1.68.1/html/docbook.xsl" /&gt;
&lt;uri
  name="http://docbook.sourceforge.net/release/xsl/current/html/chunk.xsl"
  uri="file:///usr/share/xml/docbook-xsl-1.68.1/html/chunk.xsl" /&gt;
&lt;/catalog&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1513676338"></a><span style="">rewriteSystem 建立重写规则，
简化、合并 URI 项</span>
<ul><li><a name="Freemind_Link_284185946"></a><span style="">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE catalog
   PUBLIC "-//OASIS/DTD Entity Resolution XML Catalog V1.0//EN"
   "http://www.oasis-open.org/committees/entity/release/1.0/catalog.dtd"&gt;
&lt;catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog"&gt;
    &lt;rewriteSystem
        systemIdStartString="http://www.oasis-open.org/docbook/xml/4.4/"
        rewritePrefix="file:///usr/share/xml/docbook44/" /&gt;
    &lt;rewriteURI
        uriStartString="http://docbook.sourceforge.net/release/xsl/current/"
        rewritePrefix="file:///usr/share/xml/docbook-xsl-1.68.1/" /&gt;
&lt;/catalog&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1888759795"></a><span style="">nextCatalog 实现 catalog 文件级联</span>
<ul><li><a name="Freemind_Link_998085671"></a><span style="">For DocBook 4.4:
&lt;nextCatalog  catalog="/usr/share/xml/docbook44/catalog.xml" /&gt;

For DocBook 4.1.2:
&lt;nextCatalog  catalog="/usr/share/xml/docbook412/docbook.cat" /&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1358660884"></a><span style="">示例</span></li></ul>
<ul><li><a name="Freemind_Link_331960540"></a><span style="">工具</span>
<ul><li><a name="Freemind_Link_395327078"></a><span style="">xsltproc, Saxon, Xalan 可以利用该格式的 catalog 文件</span></li></ul>
<ul><li><a name="Freemind_Link_1652088408"></a><a style="" href="#Freemind_Link_702769545">除了 xsltproc 是使用 环境变量 XML_CATALOG_FILES 外， Java 工具有自己的方式，参见后面的介绍</a>

</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1857675075"></a><span style="">SGML 时代的 DocBook</span>
<ul><li><a name="Freemind_Link_417487225"></a><span style="">DTD</span>
<ul><li><a name="Freemind_Link_864202295"></a><span style="">定义 DocBook SGML 文档结构的 Schema Languages </span>

</li></ul>
<ul><li><a name="Freemind_Link_647875401"></a><span style="">SGML 和 XML 格式的 DTD 区别：</span>
<ul><li><a name="Freemind_Link_1424697070"></a><span style="">ISO 字符实体集 （ISO character entity sets）格式不同，需要对应不同的 Entities 文件</span></li></ul>
<ul><li><a name="Freemind_Link_1875974831"></a><span style="">内部定义的 ISO charset entities 格式</span>
<ul><li><a name="Freemind_Link_1771205693"></a><span style="">sgml</span>
<ul><li><a name="Freemind_Link_1157304545"></a><span style="">&lt;!ENTITY euro SDATA "[euro  ]"&gt;&lt;!-- euro sign --&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_257526500"></a><span style="">xml</span>
<ul><li><a name="Freemind_Link_1704384956"></a><span style="">&lt;!ENTITY euro "&amp;#x20AC;"&gt;&lt;!-- euro sign, U+20AC NEW --&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_242320747"></a><span style="">定义 DTD 时，ho,hh 参数实体不同</span>
<ul><li><a name="Freemind_Link_1206037650"></a><span style="">sgml</span>
<ul><li><a name="Freemind_Link_1104768564"></a><span style="">&lt;!ENTITY % ho "- O"&gt;
&lt;!ENTITY % hh "- -"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1407709859"></a><span style="">xml</span>
<ul><li><a name="Freemind_Link_301683415"></a><span style="">&lt;!ENTITY % ho ""&gt;
&lt;!ENTITY % hh ""&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1226604422"></a><span style="">对参数实体的引用</span>
<ul><li><a name="Freemind_Link_1905064484"></a><span style="">引用 %ho; 的有 401 处</span>
<ul><li><a name="Freemind_Link_1656325584"></a><span style="">&lt;!ELEMENT title %ho; (%title.char.mix;)*&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1697713175"></a><span style="">引用 %hh; 的有 0 处</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1414703941"></a><a style="" href="#Freemind_Link_1257177987">DTD 中可能没有包含所需的 Entities，参见：</a>

</li></ul>
<ul><li><a name="Freemind_Link_1397770253"></a><span style="">如今，DTD 已经不是唯一选择，还有 XML Schema, RELAX NG</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_529556336"></a><span style="">Entities</span>
<ul><li><a name="Freemind_Link_1257177987"></a><span style="">参见: http://www.oasis-open.org/cover/topics.html#entities</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1460011570"></a><span style="">DSSSL</span>
<ul><li><a name="Freemind_Link_213112750"></a><span style="">DSSSL</span>
<ul><li><a name="Freemind_Link_197733681"></a><span style="">what is it</span>
<ul><li><a name="Freemind_Link_1662060859"></a><span style=""> a kind of Scheme (which is a kind of Lisp)</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_165407087"></a><span style="">OpenJade</span>
<ul><li><a name="Freemind_Link_305924876"></a><span style="">可以将 SGML/XML 转换为</span>
<ul><li><a name="Freemind_Link_1108441557"></a><span style="">html</span></li></ul>
<ul><li><a name="Freemind_Link_1494640111"></a><span style="">rtf</span></li></ul>
<ul><li><a name="Freemind_Link_1603004601"></a><span style="">text</span></li></ul>
<ul><li><a name="Freemind_Link_890460833"></a><span style="">Tex - DVI - PS - PDF</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_298155270"></a><span style="">关于处理 XML 文件</span>
<ul><li><a name="Freemind_Link_500639134"></a><span style="">If you handle XML with OpenJade, OpenJade will by default complain bitterly about any character outside the basic 32 to 128 ASCII range. That can be avoided by setting the following three environment variables:

SP_CHARSET_FIXED=YES
SP_ENCODING=XML
SGML_CATALOG_FILES=/usr/share/sgml/jade_dsl/xml.soc

</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_460959962"></a><span style="">有效性验证</span>
<ul><li><a name="Freemind_Link_1505871101"></a><span style="">onsgmls</span>
<ul><li><a name="Freemind_Link_1565699277"></a><span style="">onsgmls.exe -sv -c /share/catalog.sgml index.xml
onsgmls.exe -sv -c /share/catalog.sgml index.sgml</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_252569392"></a><span style="">OpenSP</span>
<ul><li><a name="Freemind_Link_491053512"></a><span style="">编译 OpenSP 之前</span>
<ul><li><a name="Freemind_Link_1439149726"></a><span style="">补丁: gcc3.4 下编译补丁</span>
<ul><li><a name="Freemind_Link_1108853275"></a><span style="">参见 Cygwin OpenSP 源代码包中的补丁</span></li></ul>
<ul><li><a name="Freemind_Link_1765437903"></a><span style="">Cygwin OpenSP 补丁不再需要设置 LIBS 环境变量</span>
<ul><li><a name="Freemind_Link_1870543976"></a><span style="">export LIBS=-lintl</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_913035171"></a><span style="">OpenSP 补丁</span>
<ul><li><a name="Freemind_Link_76643740"></a><span style="">isSgmlChar</span>
<ul><li><a name="Freemind_Link_679797078"></a><span style="">文件:  include/Syntax.h

diff -r -u OpenSP-1.5.1/include/Syntax.h OpenSP-1.5.1-new/include/Syntax.h
--- OpenSP-1.5.1/include/Syntax.h	2005-12-18 10:38:50.890625000 +0800
+++ OpenSP-1.5.1-new/include/Syntax.h	2005-12-18 10:44:20.703125000 +0800
@@ -389,7 +389,7 @@
 
 inline Boolean Syntax::isSgmlChar(Xchar c) const
 {
-  return c &gt;= 0 &amp;&amp; set_[sgmlChar].contains(Char(c));
+  return c &gt;= 256 || c &gt;= 0 &amp;&amp; set_[sgmlChar].contains(Char(c));
 }
 
 inline const StringC &amp;Syntax::reservedName(ReservedName i) const
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_833687047"></a><span style="">允许中文注释</span>
<ul><li><a name="Freemind_Link_1052482264"></a><span style="">文件: lib/parseCommon.cxx

diff -r -u OpenSP-1.5.1/lib/parseCommon.cxx OpenSP-1.5.1-new/lib/parseCommon.cxx
--- OpenSP-1.5.1/lib/parseCommon.cxx	1999-11-04 16:36:13.000000000 +0800
+++ OpenSP-1.5.1-new/lib/parseCommon.cxx	2005-12-18 10:46:41.781250000 +0800
@@ -541,14 +541,12 @@
   Token token;
   while ((token = getToken(mode)) != tokenCom)
     switch (token) {
-    case tokenUnrecognized:
-      if (!reportNonSgmlCharacter())
-	message(ParserMessages::sdCommentSignificant,
-		StringMessageArg(currentToken()));
-      break;
     case tokenEe:
       message(ParserMessages::commentEntityEnd, startLoc);
       return 0;
+    case tokenUnrecognized:
+      if (reportNonSgmlCharacter())
+        break;
     default:
       if (markup)
 	markup-&gt;addCommentChar(currentChar());</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_657929309"></a><span style="">清除 INCLUDE, LIBS 等环境变量</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1515600635"></a><span style="">编译 OpenSP</span>
<ul><li><a name="Freemind_Link_998352395"></a><span style="">./configure --prefix=/usr/local/opensp</span></li></ul>
<ul><li><a name="Freemind_Link_1868069097"></a><span style="">make &amp;&amp; make install</span></li></ul>
<ul><li><a name="Freemind_Link_111928115"></a><span style="">echo  /usr/local/lib/opensp/lib &gt;&gt; /etc/ld.so.conf </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_420949248"></a><span style="">catalog</span>
<ul><li><a name="Freemind_Link_628002761"></a><span style="">SGMLDECL "/home/JiangXin/work/docbook/dtd/4.5/docbook.dcl"
CATALOG "/home/JiangXin/work/docbook/dtd/4.5/docbook.cat"

DOCTYPE book    /home/JiangXin/work/docbook/dtd/4.5/docbook.dtd
DOCTYPE article /home/JiangXin/work/docbook/dtd/4.5/docbook.dtd
DOCTYPE chapter /home/JiangXin/work/docbook/dtd/4.5/docbook.dtd
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_957085056"></a><span style="">应用</span>
<ul><li><a name="Freemind_Link_1757842261"></a><span style="">准备</span>
<ul><li><a name="Freemind_Link_1602904870"></a><span style="">创建一个 catalog 文件</span>
<ul><li><a name="Freemind_Link_1028753915"></a><span style="">catalog 文件</span>
<ul><li><a name="Freemind_Link_1698047922"></a><span style="">OVERRIDE YES</span></li></ul>
<ul><li><a name="Freemind_Link_413165334"></a><span style="">SGMLDECL "/home/JiangXin/work/docbook/dtd/4.5/docbook.dcl"</span></li></ul>
<ul><li><a name="Freemind_Link_393189143"></a><span style="">CATALOG "/home/JiangXin/work/docbook/dtd/4.5/docbook.cat"</span></li></ul>
<ul><li><a name="Freemind_Link_1899708682"></a><span style="">DOCTYPE book 	/home/JiangXin/work/docbook/dtd/4.5/docbook.dtd
DOCTYPE article	/home/JiangXin/work/docbook/dtd/4.5/docbook.dtd
DOCTYPE chapter	/home/JiangXin/work/docbook/dtd/4.5/docbook.dtd
</span></li></ul>
<ul><li><a name="Freemind_Link_1660242664"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_59068614"></a><span style="">-- ...................................................................... --
--                "export SGML_CATALOG_FILES=/PATH/catalog"               --
OVERRIDE YES

SGMLDECL "/home/JiangXin/work/docbook/dtd/4.5/docbook.dcl"

CATALOG "/home/JiangXin/work/docbook/dtd/4.5/docbook.cat"
CATALOG "/home/JiangXin/work/docbook/style/dsssl-1.79/catalog"

-- CATALOG "dtd/openjade/catalog" --
-- CATALOG "/home/JiangXin/work/docbook/dtd/entities/catalog.sgml" --

DOCTYPE book	/home/JiangXin/work/docbook/dtd/4.5/docbook.dtd
DOCTYPE article	/home/JiangXin/work/docbook/dtd/4.5/docbook.dtd
DOCTYPE chapter	/home/JiangXin/work/docbook/dtd/4.5/docbook.dtd
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_201628900"></a><span style="">docbook.dcl 补丁</span>
<ul><li><a name="Freemind_Link_485773507"></a><span style="">- LCNMCHAR ".-_"
- UCNMCHAR ".-_"
+ LCNMCHAR ".-_:"
+ UCNMCHAR ".-_:"</span>
<ul><li><a name="Freemind_Link_287185189"></a><span style="">否则：

onsgmls:/home/JiangXin/work/docbook/dtd/4.5/htmltblx.mod:102:9:E: character ":"
invalid: only "CDATA", "ENTITIES", "ENTITY", "ID", "IDREF", "IDREFS", "NAME", "N
AMES", "NMTOKEN", "NMTOKENS", "NOTATION", "NUMBER", "NUMBERS", "NUTOKEN", "NUTOK
ENS" and parameter separators allowed
onsgmls:/home/JiangXin/work/docbook/dtd/4.5/htmltblx.mod:110:9:E: character ":"
invalid: only "CDATA", "ENTITIES", "ENTITY", "ID", "IDREF", "IDREFS", "NAME", "N
AMES", "NMTOKEN", "NMTOKENS", "NOTATION", "NUMBER", "NUMBERS", "NUTOKEN", "NUTOK
ENS" and parameter separators allowed</span>
<ul><li><a name="Freemind_Link_1519900866"></a><span style="">主要是如下参数实体中出现了 :</span>
<ul><li><a name="Freemind_Link_868943597"></a><span style="">&lt;!ENTITY % xml-space.attrib
	"xml:space	(preserve)		#IMPLIED"&gt;

&lt;!ENTITY % xml-base.attrib
	"xml:case	CDATA		#IMPLIED"&gt;

&lt;!ENTITY % i18n
	"xml:lang    NMTOKEN        #IMPLIED"&gt;
</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1732458177"></a><span style="">示例文档</span>
<ul><li><a name="Freemind_Link_1352459837"></a><span style="">gb2312.sgml</span>
<ul><li><a name="Freemind_Link_1088294368"></a><span style="">&lt;!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook V4.2//EN"&gt;
&lt;article&gt;
&lt;articleinfo&gt;
  &lt;title&gt;Hello World!&lt;/title&gt;
  &lt;author&gt;&lt;firstname&gt;名&lt;/&gt;&lt;surname&gt;姓&lt;/&gt;&lt;/author&gt;
&lt;/articleinfo&gt;
&lt;!-- 这里是注释 --&gt;

&lt;sect1&gt;&lt;title&gt;Hello World!&lt;/title&gt;
  &lt;para&gt;
  Hello world! 这是我的第一个 DocBook 文档。
  &lt;/para&gt;
&lt;/sect1&gt;
&lt;/article&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1949327242"></a><span style="">utf8.sgml</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_882663007"></a><span style="">编码问题</span>
<ul><li><a name="Freemind_Link_1117958895"></a><span style="">多个环境变量用于处理多字节以及宽字符编码的 SGML/XML，如下：</span></li></ul>
<ul><li><a name="Freemind_Link_498260110"></a><span style="">SP_CHARSET_FIXED</span>
<ul><li><a name="Freemind_Link_1433606065"></a><span style="">只有当 SP_CHARSET_FIXED 设置为 1 或者 YES 时，OpenSP进入 固定字符集模式</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_806656254"></a><span style="">SP_ENCODING</span>
<ul><li><a name="Freemind_Link_1334419635"></a><span style="">当处于固定字符集模式时，的缺省字符集</span>
<ul><li><a name="Freemind_Link_877160006"></a><span style="">可以是: utf-8, utf-16, gb2312, big5, cn-gb, euc-cn, cn-big5, is8859-n, ...
xml 含义为 作为输入时，由XML 定义确定其编码，作为输出时，为 UTF-</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_654687878"></a><span style="">SP_BCTF </span>
<ul><li><a name="Freemind_Link_1418572880"></a><span style="">当不处于固定字符集模式时，的缺省字符集</span>
<ul><li><a name="Freemind_Link_1487038101"></a><span style="">可用的有: utf-8, euc, big5, identity, fixed-2, fixed-4, sjis</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_429971419"></a><span style="">onsgmls</span>
<ul><li><a name="Freemind_Link_1340248533"></a><span style="">功能</span>
<ul><li><a name="Freemind_Link_521506895"></a><span style="">验证有效性</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1288143227"></a><span style="">SP 环境变量</span>
<ul><li><a name="Freemind_Link_190446628"></a><span style="">export SP_CHARSET_FIXED=1
export SP_ENCODING=utf-8
onsgmls.exe -s -c catalog.sgml utf8.sgml</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1203137253"></a><span style="">命令行参数</span>
<ul><li><a name="Freemind_Link_1101040756"></a><span style="">-s 关闭输出</span>
<ul><li><a name="Freemind_Link_199067973"></a><span style="">export SGML_CATALOG_FILES=/share/catalog.sgml
onsgmls.exe -s index.sgml</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_381102519"></a><span style="">-c catalog 文件</span>
<ul><li><a name="Freemind_Link_506331979"></a><span style="">SP_ENCODING=gb2312 SP_CHARSET_FIXED=1 onsgmls.exe -s -c catalog.sgml gb2312.sgml</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1012600299"></a><span style="">-i NAME</span>
<ul><li><a name="Freemind_Link_1763928550"></a><span style="">如同在文档的 DTD 最开始，声明了 &lt;!ENTITY % name "INCLUDE"&gt; </span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_233531873"></a><span style="">ospam</span>
<ul><li><a name="Freemind_Link_765106263"></a><span style="">整理 SGML 标记(markup)</span></li></ul>
<ul><li><a name="Freemind_Link_1098722383"></a><span style="">命令行</span>
<ul><li><a name="Freemind_Link_435899105"></a><span style="">ospam.exe -p -m shorttag -c catalog.sgml index.sgml</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_73441348"></a><span style="">osgmlnorm </span>
<ul><li><a name="Freemind_Link_1573990021"></a><span style="">格式化 sgml 文档</span>
<ul><li><a name="Freemind_Link_1709801977"></a><span style="">--comments 输出注释</span></li></ul>
<ul><li><a name="Freemind_Link_1095773226"></a><span style="">-d 输出 prolog</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_33672568"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_1728073192"></a><span style="">SP_ENCODING=utf-8 SP_CHARSET_FIXED=yes  osgmlnorm -c catalog.sgml utf8.sgml 2&gt;/dev/null | iconv -f utf-8 -t gb2312</span></li></ul>
<ul><li><a name="Freemind_Link_152571692"></a><span style="">SP_ENCODING= SP_CHARSET_FIXED=  osgmlnorm --comments -c catalog.sgml gb2312.sgml </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_979536499"></a><span style="">Bug</span>
<ul><li><a name="Freemind_Link_212164697"></a><span style="">--comments 对于 UTF-8 编码的文件，当 SP_ENCODING＝utf-8 时无效</span></li></ul>
<ul><li><a name="Freemind_Link_624930980"></a><span style="">需要安装“中文注释”补丁</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_583201921"></a><span style="">osx</span>
<ul><li><a name="Freemind_Link_972062903"></a><span style="">SGML-&gt;XML转换工具</span></li></ul>
<ul><li><a name="Freemind_Link_175980175"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_1114372850"></a><span style="">SP_ENCODING=gb2312 SP_CHARSET_FIXED=YES  osx -x preserve-case -x comment  \
   -c catalog.sgml gb2312.sgml | iconv -f utf-8 -t gb2312</span></li></ul>
<ul><li><a name="Freemind_Link_61815101"></a><span style="">SP_ENCODING=utf-8 SP_CHARSET_FIXED=YES  osx -x preserve-case -x comment  \
 -c catalog.sgml utf8.sgml | iconv -f utf-8 -t gb2312
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1933002294"></a><span style="">ospent</span></li></ul>
<ul><li><a name="Freemind_Link_1638854024"></a><span style="">ospcat</span></li></ul>
<ul><li><a name="Freemind_Link_1979151279"></a><span style="">XML 文件的验证</span>
<ul><li><a name="Freemind_Link_1985216729"></a><span style="">SP_ENCODING=gb2312 SP_CHARSET_FIXED=yes  onsgmls.exe -s -c catalog.sgml gb2312.xml</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1604236607"></a><span style="">OpenJade</span>
<ul><li><a name="Freemind_Link_1625588445"></a><span style="">编译 OpenJade 之前</span>
<ul><li><a name="Freemind_Link_1654176443"></a><span style="">参见 Cygwin OpenJade 源代码包中的补丁</span></li></ul>
<ul><li><a name="Freemind_Link_1248459354"></a><a style="" href="#Freemind_Link_913035171">OpenSP 的补丁参见：</a>

</li></ul>
<ul><li><a name="Freemind_Link_125187267"></a><span style="">清除 INCLUDE, LIBS 等环境变量</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1797106243"></a><span style="">编译 OpenJade</span>
<ul><li><a name="Freemind_Link_1624956434"></a><span style="">./configure --prefix=/usr/local/openjade  \
    --enable-spincludedir=/usr/local/opensp/include/OpenSP  \
    --enable-splibdir=/usr/local/opensp/lib</span></li></ul>
<ul><li><a name="Freemind_Link_1333911785"></a><span style="">make &amp;&amp; make install</span></li></ul>
<ul><li><a name="Freemind_Link_499353851"></a><span style=""># 将 dsssl 目录(dsssl的 DTD 声明）拷贝到适当的目录下
# 并将 dsssl 目录下的 catalog 文件加入到 SGML_CATALOG_FILES
# 环境变量，或者加入到 CATALOG 文件中；
cp -R dsssl  /docbook-dtd-dsssl-directory/openjade</span></li></ul>
<ul><li><a name="Freemind_Link_413687461"></a><span style="">echo  /usr/local/lib/openjade/lib &gt;&gt; /etc/ld.so.conf </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_772011977"></a><span style="">测试（参见 dsssl-doc 的例子）</span>

<ul><li><a name="Freemind_Link_1882543811"></a><span style="">测试文件</span>
<ul><li><a name="Freemind_Link_531181301"></a><span style="">jtest.sgm (in dsssl-1.79-doc/doc)</span></li></ul>
<ul><li><a name="Freemind_Link_1741912089"></a><span style="">jtest.dsl (in dsssl-1.79-doc/doc)</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1232956794"></a><span style="">测试 openjade：</span>
<ul><li><a name="Freemind_Link_1250292265"></a><span style="">openjade -t rtf -d jtest.dsl jtest.sgm</span></li></ul>
<ul><li><a name="Freemind_Link_1214468836"></a><span style="">可能出现的错误</span>
<ul><li><a name="Freemind_Link_244417711"></a><span style="">openjade:jtest.dsl:1:72:W: cannot generate system identifier for public text "-//James Clark//DTD DSSSL Style Sheet//EN"
openjade:jtest.dsl:1:72:E: reference to entity "STYLE-SHEET" for which no system identifier could be generated
openjade:jtest.dsl:1:0: entity was defined here
openjade:E: specification document does not have the DSSSL architecture as a base architecture
</span></li></ul>
<ul><li><a name="Freemind_Link_1813733195"></a><span style="">原因是没有找到 Public 标志符 "-//James Clark//DTD DSSSL Style Sheet//EN" 的位置，
需要通过 catalog 文件建立 Public 标志符到 system 标志符的映射，
该 catalog 文件名，可以通过环境变量 SGML_CATALOG_FILES 指出，
或者通过 openjade 命令行的 -c 参数指明。
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_472213166"></a><span style="">设置环境变量 SGML_CATALOG_FILES</span>
<ul><li><a name="Freemind_Link_410707722"></a><span style="">export SGML_CATALOG_FILES=openjade/dsssl/catalog</span></li></ul>
<ul><li><a name="Freemind_Link_1358266530"></a><span style="">openjade -t rtf -d jtest.dsl jtest.sgm</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1921418457"></a><span style="">或者通过 -c 参数</span>
<ul><li><a name="Freemind_Link_1102759601"></a><span style="">openjade -c openjade/dsssl/catalog -t rtf -d jtest.dsl jtest.sgm</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_543822850"></a><span style="">测试 DocBook DTD&amp;DSSSL</span>
<ul><li><a name="Freemind_Link_391835023"></a><span style="">设置环境变量 SGML_CATALOG_FILES</span>
<ul><li><a name="Freemind_Link_1275108351"></a><span style="">export SGML_CATALOG_FILES=dtd/catalog:dsssl/catalog:openjade/catalog</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1831905795"></a><span style="">openjade -t rtf -d d:\where-you-unpacked-the-stylesheets\docbook\print\docbook.dsl test.sgm</span></li></ul>
<ul><li><a name="Freemind_Link_982895641"></a><span style="">openjade -t sgml -d d:\where-you-unpacked-the-stylesheets\docbook\html\docbook.dsl test.sgm</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1434375847"></a><span style="">中文文档测试</span>
<ul><li><a name="Freemind_Link_735931518"></a><span style="">SP_ENCODING=gb2312 SP_CHARSET_FIXED=1  \
openjade -t sgml -d d:\where-you-unpacked-the-stylesheets\docbook\html\docbook.dsl \
-V nochunks gb2312.sgml
</span></li></ul>
<ul><li><a name="Freemind_Link_481131678"></a><span style="">SP_ENCODING=gb2312 SP_CHARSET_FIXED=1  \
openjade -t rtf -d d:\where-you-unpacked-the-stylesheets\docbook\print\docbook.dsl \
gb2312.sgml
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_940740366"></a><a style="" href="#Freemind_Link_1275108351">catalog</a>

<ul><li><a name="Freemind_Link_1673859523"></a><a style="" href="#Freemind_Link_49927924">语法参见前面的介绍</a>

</li></ul>
<ul><li><a name="Freemind_Link_1308945766"></a><span style="">DSSSL </span>
<ul><li><a name="Freemind_Link_1211189429"></a><span style="">CATALOG "/home/JiangXin/work/docbook/style/dsssl-1.79/catalog"
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1508256435"></a><span style="">DTD for DSSSL</span>
<ul><li><a name="Freemind_Link_553929835"></a><span style="">CATALOG "~/work/docbook/bin/openjade-1.3.3-pre1/dsssl/catalog"</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_483291856"></a><span style="">如何指定 DSSSL 样式表</span>
<ul><li><a name="Freemind_Link_1459115660"></a><span style="">通过 prolog 或者 DTD 中的 PI 声明位置。（两种格式）</span>
<ul><li><a name="Freemind_Link_1681298367"></a><span style="">格式1: &lt;?stylesheet href="sysid" type="text/dsssl"&gt; </span></li></ul>
<ul><li><a name="Freemind_Link_1945993950"></a><span style="">格式2: &lt;?dsssl sysid&gt; </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1699298881"></a><span style="">openjade -d systemid</span>
<ul><li><a name="Freemind_Link_1073502388"></a><span style="">DSSSL systemid，声明 DSSSL 位置</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1824845545"></a><span style="">和输入文件同名的，扩展名为 .dsl</span></li></ul>
<ul><li><a name="Freemind_Link_752070684"></a><span style="">一个DSSSL样式表文件可能包含
多个样式，如何指定？</span>
<ul><li><a name="Freemind_Link_959699282"></a><span style="">两种方式定义的多样式DSSSL文件</span>
<ul><li><a name="Freemind_Link_1946727571"></a><span style="">仅通过参数进行实体控制，
只包含一个 style-specification</span>
<ul><li><a name="Freemind_Link_1225557562"></a><span style="">&lt;!DOCTYPE style-sheet PUBLIC "-//James Clark//DTD DSSSL Style Sheet//EN" [
&lt;!ENTITY % html "IGNORE"&gt;
&lt;![%html;[
&lt;!ENTITY % print "IGNORE"&gt;
&lt;!ENTITY docbook.dsl PUBLIC "-//Norman Walsh//DOCUMENT DocBook HTML Stylesheet//EN" CDATA dsssl&gt;
]]&gt;
&lt;!ENTITY % print "INCLUDE"&gt;
&lt;![%print;[
&lt;!ENTITY docbook.dsl PUBLIC "-//Norman Walsh//DOCUMENT DocBook Print Stylesheet//EN" CDATA dsssl&gt;
]]&gt;
]&gt;
&lt;style-sheet&gt;
&lt;style-specification use="docbook"&gt;
&lt;style-specification-body&gt; 

;; common customization can go here

&lt;![%print;[

;; customize the print stylesheet here

]]&gt;

&lt;![%html;[

;; customize the html stylesheet here

]]&gt;

&lt;/style-specification-body&gt;
&lt;/style-specification&gt;
&lt;external-specification id="docbook" document="docbook.dsl"&gt;
&lt;/style-sheet&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_864642616"></a><span style="">不同的 style-specification 具有不同的 ID，
另外还有参数实体控制</span>
<ul><li><a name="Freemind_Link_589375117"></a><span style="">&lt;!DOCTYPE style-sheet PUBLIC
          "-//James Clark//DTD DSSSL Style Sheet//EN" [
&lt;!ENTITY % html "IGNORE"&gt;
&lt;![%html;[
&lt;!ENTITY % print "IGNORE"&gt;
&lt;!ENTITY docbook.dsl PUBLIC
         "-//Norman Walsh//DOCUMENT DocBook HTML Stylesheet//EN"
         CDATA dsssl&gt;
]]&gt;
&lt;!ENTITY % print "INCLUDE"&gt;
&lt;![%print;[
&lt;!ENTITY docbook.dsl PUBLIC
         "-//Norman Walsh//DOCUMENT DocBook Print Stylesheet//EN"
         CDATA dsssl&gt;
]]&gt;
]&gt;

&lt;style-sheet&gt;

&lt;style-specification id="print" use="docbook"&gt;
&lt;style-specification-body&gt; 

;; customize the print stylesheet
...

&lt;/style-specification-body&gt;
&lt;/style-specification&gt;


&lt;!--
;; customize the html stylesheet; parts borrowed from 
;; Cygnus at http://sourceware.cygnus.com/ (cygnus-both.dsl)
--&gt;

&lt;style-specification id="html" use="docbook"&gt;
&lt;style-specification-body&gt; 

... ...

&lt;/style-specification-body&gt;
&lt;/style-specification&gt;

&lt;external-specification id="docbook" document="docbook.dsl"&gt;

&lt;/style-sheet&gt;

</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_327893790"></a><span style="">-d 参数或者 PI 中设置 的 systemid，在文件名的结尾用 #id 
可以指定 DSSSL 文件中特定的 style-specification.</span>
<ul><li><a name="Freemind_Link_1017408551"></a><span style="">openjade -d systemid#print</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1415313915"></a><span style="">-i 参数，设定特定的实体参数为 INCLUDE</span>
<ul><li><a name="Freemind_Link_174599393"></a><span style="">openjade -i html -d systemid#html</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_363153694"></a><span style="">DSSSL 定制</span>
<ul><li><a name="Freemind_Link_1993006554"></a><span style="">DSSSL 是一个遵从 DSSSL 规范的 SGML 文档</span></li></ul>
<ul><li><a name="Freemind_Link_472109557"></a><span style="">default schema</span>
<ul><li><a name="Freemind_Link_1466164179"></a><span style="">/usr/local/openjade/share/openjade/builtins.dsl</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_712248131"></a><a style="" href="#Freemind_Link_752070684">一个包含了打印和HTML两种格式的样式表</a>

</li></ul>
<ul><li><a name="Freemind_Link_1569980908"></a><span style="">www.tldp.org 对 dsssl 的定制</span>
<ul><li><a name="Freemind_Link_1723061743"></a><span style="">ldp.dsl，参见: http://www.tldp.org/authors/</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1498312085"></a><span style="">定制</span>
<ul><li><a name="Freemind_Link_1830582097"></a><span style="">修改作者名称显示方式，姓在前</span></li></ul>
<ul><li><a name="Freemind_Link_1697418161"></a><span style="">为 HTML 输出增加编码设置，两个参数实体： charset.gb2312, charset.utf-8 </span></li></ul>
<ul><li><a name="Freemind_Link_1525633162"></a><span style="">其它参见 ldp.dsl 的 differ</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1162680510"></a><span style="">命令行参数</span>
<ul><li><a name="Freemind_Link_1464510612"></a><a style="" href="#Freemind_Link_1699298881">-d dsssl_spec </a>

</li></ul>
<ul><li><a name="Freemind_Link_178536480"></a><span style="">-c catalog_file</span></li></ul>
<ul><li><a name="Freemind_Link_449726602"></a><span style="">-t output_type</span>
<ul><li><a name="Freemind_Link_583403959"></a><span style="">支持的输出格式有:</span></li></ul>
<ul><li><a name="Freemind_Link_394761461"></a><span style="">fot</span>
<ul><li><a name="Freemind_Link_546954115"></a><span style="">flow object tree</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1861201893"></a><span style="">rtf, rtf-95</span>

<ul><li><a name="Freemind_Link_585386303"></a><span style="">rtf-95 produces output optimized for Word 95 rather than Word 97</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_571132974"></a><span style="">tex</span></li></ul>
<ul><li><a name="Freemind_Link_246967676"></a><span style="">sgml, sgml-raw</span>
<ul><li><a name="Freemind_Link_214187696"></a><span style="">sgml-raw 不在 tag 中插入换行符</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1026631091"></a><span style="">xml, xml-raw</span>
<ul><li><a name="Freemind_Link_976965987"></a><span style="">xml-raw 不在 tag 中插入换行符</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1698627174"></a><span style="">html</span></li></ul>
<ul><li><a name="Freemind_Link_1974434330"></a><span style="">mif</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1015347178"></a><span style="">-o output_file</span></li></ul>
<ul><li><a name="Freemind_Link_807288488"></a><span style="">-i Entity_Name</span>
<ul><li><a name="Freemind_Link_1215706586"></a><span style="">相当于在 DSSSL 样式表中定义实体 Entity_Name 为 INCLUDE</span>
<ul><li><a name="Freemind_Link_1772082828"></a><span style="">&lt;!ENTITY % Entity_Name "INCLUDE"&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1186341434"></a><span style="">-V variable </span>
<ul><li><a name="Freemind_Link_386177123"></a><span style="">相当于在 DSSSL 样式表中定义 (define variable #t)</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1464800544"></a><span style="">-V variable=value </span>
<ul><li><a name="Freemind_Link_1496464816"></a><span style="">相当于在 DSSSL 样式表中定义 (define variable "value")</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1225128764"></a><span style="">-V (define variable value)  </span>
<ul><li><a name="Freemind_Link_1671855289"></a><span style="">相当于在 DSSSL 样式表中定义 (define variable value)</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_835052246"></a><span style="">-wtype </span>
<ul><li><a name="Freemind_Link_924817355"></a><span style="">定义错误类型</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_791994923"></a><span style="">环境变量</span>
<ul><li><a name="Freemind_Link_225664222"></a><span style="">SP_CHARSET_FIXED 和 SP_SYSTEM_CHARSET 被忽略</span>
<ul><li><a name="Freemind_Link_597914319"></a><span style="">如同 SP_CHARSET_FIXED 设置为 1 以及 SP_SYSTEM_CHARSET 未设置</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1981285467"></a><span style="">SP_ENCODING</span>
<ul><li><a name="Freemind_Link_1885651800"></a><span style="">控制输入文件的字符集</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1196477684"></a><span style="">SGML_CATALOG_FILES</span>
<ul><li><a name="Freemind_Link_86003884"></a><span style="">在该环境变量设置的列表中寻找 catalog 文件；</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_452001886"></a><span style="">格式转换
（命令行示例）</span>
<ul><li><a name="Freemind_Link_1183055243"></a><span style="">sgml -&gt; single html</span>
<ul><li><a name="Freemind_Link_1687250694"></a><span style="">SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 \
openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/docbook-dsssl-1.79/html/docbook.dsl \
-V nochunks -t sgml gb2312.sgml </span></li></ul>
<ul><li><a name="Freemind_Link_1941633571"></a><span style="">SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 \
openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl#html \
-i html -i charset.gb2312 -V nochunks -t sgml gb2312.sgml &gt;gb2312.html</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_731405830"></a><span style="">sgml -&gt; multiple htmls</span>
<ul><li><a name="Freemind_Link_1125687573"></a><span style="">SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 \
openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/docbook-dsssl-1.79/html/docbook.dsl \
 -t sgml gb2312.sgml </span></li></ul>
<ul><li><a name="Freemind_Link_383415922"></a><span style="">SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 \
openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl#html \
-i html -i charset.gb2312 -t sgml gb2312.sgml &gt;gb2312-ldp.html</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_130759083"></a><span style="">sgml -&gt; rtf</span>
<ul><li><a name="Freemind_Link_976331842"></a><span style="">SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 \
openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl#print \
-i print -i charset.gb2312 -t rtf gb2312.sgml </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1546726595"></a><span style="">sgml -&gt; pdf</span>
<ul><li><a name="Freemind_Link_581089453"></a><span style="">JadeTeX, sourceforge, 2003/05/17, v3.13</span></li></ul>
<ul><li><a name="Freemind_Link_1969706571"></a><span style="">sgml -&gt; tex</span></li></ul>
<ul><li><a name="Freemind_Link_1846537230"></a><span style="">tex -&gt; DVI/PS/PDF</span>

<ul><li><a name="Freemind_Link_220677568"></a><span style="">JadeTeX</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1531036410"></a><span style="">sgml -&gt; fot</span></li></ul>
<ul><li><a name="Freemind_Link_1987435333"></a><span style="">XML</span>
<ul><li><a name="Freemind_Link_707752548"></a><span style="">需要在命令行中定义 XML 的 declare 文件，
也可以在 catalog 中用 DTDDECL 指定</span>
<ul><li><a name="Freemind_Link_244690623"></a><span style="">DTDDECL  "-//OASIS//DTD DocBook XML V4.5CR1//EN" "dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl"
DTDDECL  "-//OASIS//DTD DocBook XML V4.2//EN" "dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl"
DTDDECL  "-//OASIS//DTD DocBook XML V3.1//EN" "dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl"</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1996367242"></a><span style="">xml -&gt; single html</span>
<ul><li><a name="Freemind_Link_953287630"></a><span style="">SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 \
openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/docbook-dsssl-1.79/html/docbook.dsl \
-V nochunks -t sgml \
 ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl gb2312.xml </span></li></ul>
<ul><li><a name="Freemind_Link_1577630953"></a><span style="">SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 \
openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl#html \
-i html -i charset.gb2312 -V nochunks -t sgml \
 ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl gb2312.xml &gt;gb2312-xml.html</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_990236216"></a><span style="">xml -&gt; multiple htmls</span>
<ul><li><a name="Freemind_Link_754098973"></a><span style="">SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 \
openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/docbook-dsssl-1.79/html/docbook.dsl \
 -t sgml ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl gb2312.xml</span></li></ul>
<ul><li><a name="Freemind_Link_1064794367"></a><span style="">SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 \
openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl#html \
-i html -i charset.gb2312 -t sgml  \
${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl gb2312.xml</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_974377353"></a><span style="">xml -&gt; rtf</span>
<ul><li><a name="Freemind_Link_1320853203"></a><span style="">SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 \
openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl#print \
-i print -i charset.gb2312 -t rtf  \
 ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl gb2312.xml</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_403357860"></a><span style="">测试用例</span>
<ul><li><a name="Freemind_Link_1566565510"></a><span style="">test.sh</span>
<ul><li><a name="Freemind_Link_929676901"></a><span style="">#!/bin/sh

SRCROOT=../../src

# onsgml test...

echo -ne "validate gb2312.sgml, ...	"
SP_ENCODING=gb2312 SP_CHARSET_FIXED=1 onsgmls -s -c ${SRCROOT}/catalog.sgml gb2312.sgml
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "validate utf8.sgml, ...  	"
SP_ENCODING=utf-8  SP_CHARSET_FIXED=1 onsgmls -s -c ${SRCROOT}/catalog.sgml utf8.sgml
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "validate gb2312.xml, ...  	"
SP_ENCODING=gb2312 SP_CHARSET_FIXED=1 onsgmls -s -c ${SRCROOT}/catalog.sgml ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl gb2312.xml
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "validate utf8.xml, ...  	"
SP_ENCODING=utf-8  SP_CHARSET_FIXED=1 onsgmls -s -c ${SRCROOT}/catalog.sgml ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl utf8.xml
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "gb2312.sgml is NOT valid IF VALIDATED AS XML, ...  	"
SP_ENCODING=gb2312 SP_CHARSET_FIXED=1 onsgmls -s -c ${SRCROOT}/catalog.sgml ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl gb2312.sgml 2&gt;/dev/null
[ $? -ne 0 ] &amp;&amp; echo "pass" || echo "failed"

# osx test...

echo -ne "osx convert test, gb2312.sgml-&gt;gb2312.xml, ...	"
tmpfile=`mktemp tmp-gb-xml.XXXXX`
SP_ENCODING=gb2312 SP_CHARSET_FIXED=1 osx -x preserve-case -x comment -c ${SRCROOT}/catalog.sgml gb2312.sgml | iconv -f utf-8 -t gb2312 &gt; $tmpfile
SP_ENCODING=gb2312 SP_CHARSET_FIXED=1 onsgmls -s -c ${SRCROOT}/catalog.sgml ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl $tmpfile
[ -f $tmpfile ] &amp;&amp; rm $tmpfile
echo "pass"


# openjade test...

echo -ne "convert gb2312.sgml to multiple htmls, ...  	"
SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/docbook-dsssl-1.79/html/docbook.dsl -t sgml gb2312.sgml
#rm t1.htm
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "convert gb2312.sgml to one big html, ...  	"
SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/docbook-dsssl-1.79/html/docbook.dsl -V nochunks -t sgml gb2312.sgml &gt; gb2312-sgml.htm
#rm index.htm
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "convert gb2312.sgml to rtf, ...  	"
SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/docbook-dsssl-1.79/print/docbook.dsl -t rtf gb2312.sgml
#rm gb2312.rtf
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "convert utf8.sgml to multiple htmls (ldap.dsl), ...  	"
SP_ENCODING=utf-8   SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl\#html -i html -i charset.utf8 -t sgml utf8.sgml
#rm t1.htm
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "convert utf8.sgml to one big html (ldap.dsl), ...  	"
SP_ENCODING=utf-8   SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl\#html -i html -i charset.utf8 -V nochunks -t sgml utf8.sgml &gt; utf8-sgml.htm
#rm index.htm
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "convert utf8.sgml to rtf (ldap.dsl), ...  	"
SP_ENCODING=utf-8   SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl\#print -i print -t rtf utf8.sgml
#rm gb2312.rtf
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"


# openjade XML test...

echo -ne "convert gb2312.xml to multiple htmls, ...  	"
SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/docbook-dsssl-1.79/html/docbook.dsl -t sgml ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl gb2312.xml
#rm t1.htm
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "convert gb2312.xml to one big html, ...  	"
SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/docbook-dsssl-1.79/html/docbook.dsl -V nochunks -t sgml ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl gb2312.xml &gt; gb2312-sgml.htm
#rm index.htm
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "convert gb2312.xml to rtf, ...  	"
SP_ENCODING=gb2312  SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/docbook-dsssl-1.79/print/docbook.dsl -t rtf ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl gb2312.xml
#rm gb2312.rtf
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "convert utf8.xml to multiple htmls (ldap.dsl), ...  	"
SP_ENCODING=utf-8   SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl\#html -i html -i charset.utf8 -t sgml ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl utf8.xml
#rm t1.htm
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "convert utf8.xml to one big html (ldap.dsl), ...  	"
SP_ENCODING=utf-8   SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl\#html -i html -i charset.utf8 -V nochunks -t sgml ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl utf8.xml &gt; utf8-sgml.htm
#rm index.htm
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

echo -ne "convert utf8.xml to rtf (ldap.dsl), ...  	"
SP_ENCODING=utf-8   SP_CHARSET_FIXED=1 openjade -c ${SRCROOT}/catalog.sgml -d ${SRCROOT}/dsssl/ldp.dsl\#print -i print -t rtf ${SRCROOT}/dsssl/docbook-dsssl-1.79/dtds/decls/xml.dcl utf8.xml
#rm gb2312.rtf
[ $? -eq 0 ] &amp;&amp; echo "pass" || echo "failed"

</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1637798798"></a><a style="" href="#Freemind_Link_1291076547">xslproc</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_187131342"></a><span style="">XML 时代的 DocBook</span>
<ul><li><a name="Freemind_Link_57429465"></a><span style="">为什么使用 XML 格式的 DocBook？</span>
<ul><li><a name="Freemind_Link_513018680"></a><span style="">xml LIB 和工具发展迅速</span></li></ul>
<ul><li><a name="Freemind_Link_1156065607"></a><span style="">很多著名的编辑软件支持 XML 格式的输出，即使不是 DocBook 格式输出，也很容易和 XML 格式的 DocBook 进行转换</span></li></ul>
<ul><li><a name="Freemind_Link_453198723"></a><span style="">很多人都在用</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_836031475"></a><span style="">OpenJade 也可用于 XML 格式的文件</span>
<ul><li><a name="Freemind_Link_844106974"></a><span style="">XML 是 SGML 的子集</span></li></ul>
<ul><li><a name="Freemind_Link_1237214016"></a><span style="">但使用的样式表不是XSL，而是 DSSSL</span></li></ul>
<ul><li><a name="Freemind_Link_1393552536"></a><span style="">具体参见上节 OpenSP &amp; OpenJade 的描述</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1174242865"></a><span style="">XSL</span>
<ul><li><a name="Freemind_Link_1585548702"></a><span style="">&lt;html&gt;XSL 语法参见:  &lt;b&gt;xslt.mm&lt;/b&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_394004555"></a><span style="">与 DSSSL 相比的优势</span></li></ul>
<ul><li><a name="Freemind_Link_262716058"></a><span style="">通过参数进行定制</span>
<ul><li><a name="Freemind_Link_1834975377"></a><span style="">HTML 参数参考，参见 xsl 文档：doc/html</span></li></ul>
<ul><li><a name="Freemind_Link_605143156"></a><span style="">FO 参数参考，参见 xsl 文档：doc/fo</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_229467515"></a><span style="">如何在命令行提供参数</span>
<ul><li><a name="Freemind_Link_154631491"></a><span style="">xsltproc</span>
<ul><li><a name="Freemind_Link_19620873"></a><span style="">xsltproc  --output myfile.html  \
  --stringparam  html.stylesheet "corpstyle.css"  \
  --stringparam  admon.graphics 1 \
  docbook.xsl  myfile.xml
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1287272407"></a><span style="">saxon</span>
<ul><li><a name="Freemind_Link_1252667352"></a><span style="">java  com.icl.saxon.StyleSheet  -o myfile.html  myfile.xml  docbook.xsl \
  html.stylesheet="corpstyle.css" \
  admon.graphics=1
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1221262682"></a><span style="">Xalan</span>
<ul><li><a name="Freemind_Link_532056734"></a><span style="">java  org.apache.xalan.xslt.Process  -out myfile.html  -in myfile.xml \
  -xsl docbook.xsl \
  -param  html.stylesheet "corpstyle.css" \
  -param  admon.graphics 1
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_63910573"></a><span style="">只对源文件的一部分进行处理</span>
<ul><li><a name="Freemind_Link_991537868"></a><span style="">前提</span>
<ul><li><a name="Freemind_Link_1865803907"></a><span style="">要处理的部分是一个整个的元素</span></li></ul>
<ul><li><a name="Freemind_Link_1259303467"></a><span style="">该元素具有一个 id 属性值</span></li></ul>
<ul><li><a name="Freemind_Link_772598438"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_1694603806"></a><span style="">&lt;book&gt;
&lt;chapter id="intro"&gt;
  ...
&lt;/chapter&gt;
&lt;chapter id="using"&gt;
  ..
&lt;/chapter&gt;
&lt;chapter id="administering"&gt;
  ...
&lt;/chapter&gt;
&lt;/book&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_521513059"></a><span style="">命令行</span>
<ul><li><a name="Freemind_Link_1755608874"></a><span style="">xsltproc  \
    --stringparam  rootid  "using"  \
    --output  chap2.html  \
    html/docbook.xsl  myfile.xml
</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_848559037"></a><span style="">HTML 输出的参数控制</span>
<ul><li><a name="Freemind_Link_209966829"></a><span style="">分页</span>
<ul><li><a name="Freemind_Link_929965377"></a><span style="">无分页 HTML</span>
<ul><li><a name="Freemind_Link_1116623007"></a><span style="">使用 docbook.xsl 样式表</span>
<ul><li><a name="Freemind_Link_1731266898"></a><span style="">xsltproc  --output  myfile.html  docbook.xsl  myfile.xml </span></li></ul>
<ul><li><a name="Freemind_Link_1361810009"></a><span style="">xsltproc  docbook.xsl  myfile.xsl  &gt;  myfile.html</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1620845807"></a><span style="">分页 HTML</span>
<ul><li><a name="Freemind_Link_24388150"></a><span style="">使用 html/chunk.xsl 样式表</span>
<ul><li><a name="Freemind_Link_1690297250"></a><span style="">xsltproc  /usr/share/docbook-xsl/html/chunk.xsl  myfile.xml</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1273681708"></a><span style="">首页为 index.html</span></li></ul>
<ul><li><a name="Freemind_Link_795761780"></a><span style="">每一个部分的文件名根据 id 属性值设定，
或者由一个算法自动命名</span>
<ul><li><a name="Freemind_Link_468202993"></a><span style="">use.id.as.filename</span>
<ul><li><a name="Freemind_Link_308721854"></a><span style="">分页名称根据 id 属性确定</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_577747872"></a><span style="">html.ext </span>
<ul><li><a name="Freemind_Link_1022124046"></a><span style="">设置扩展名</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_998741819"></a><span style="">root.filename</span>
<ul><li><a name="Freemind_Link_1601402788"></a><span style="">设置首页的文件名</span></li></ul>
<ul><li><a name="Freemind_Link_705496030"></a><span style="">&lt;xsl:param name="root.filename"&gt;&lt;/xsl:param&gt;</span>
<ul><li><a name="Freemind_Link_383597678"></a><span style="">首页文件名也根据 ID 属性确认</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_183949541"></a><span style="">&lt;xsl:param name="root.filename"&gt;root&lt;/xsl:param&gt;</span>
<ul><li><a name="Freemind_Link_1898472095"></a><span style="">首页文件名为 root.html</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1421267329"></a><span style="">不设置</span>
<ul><li><a name="Freemind_Link_308650693"></a><span style="">则首页文件名为 index.html</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1266960070"></a><span style="">设置输出文件目录，否则本目录被搞乱</span>
<ul><li><a name="Freemind_Link_617690330"></a><span style="">base.dir 参数，如: 
xsltproc  -stringparam base.dir /usr/apache/htdocs/ chunk.xsl myfile.xml
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1388688304"></a><span style="">PI</span>
<ul><li><a name="Freemind_Link_136535061"></a><span style="">&lt;?dbhtml filename="intro.html" ?&gt;
</span>
<ul><li><a name="Freemind_Link_1735253667"></a><span style="">设置文件名，等同于在 element 设置 id 属性</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1424043962"></a><span style="">&lt;?dbhtml dir="UserGuide" ?&gt; </span>
<ul><li><a name="Freemind_Link_484003998"></a><span style="">紧接着根元素，定义了根元素以及子元素输出为 HTML 的目录；</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_90453823"></a><span style="">例如:</span>
<ul><li><a name="Freemind_Link_591875462"></a><span style="">&lt;book&gt;&lt;?dbhtml dir="UserGuide" ?&gt;
&lt;title&gt;User Guide&lt;/title&gt;
...
&lt;chapter id="intro"&gt;&lt;?dbhtml dir="FrontMatter" ?&gt;
...
&lt;chapter id="installing"&gt;
...
&lt;appendix id="reference"&gt;&lt;?dbhtml dir="BackMatter" ?&gt;
</span>
<ul><li><a name="Freemind_Link_1801307502"></a><span style="">生成的分页 HTML 如下:
UserGuide/index.html
UserGuide/FrontMatter/intro.html
UserGuide/installing.html
UserGuide/BackMatter/reference.html</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1845133666"></a><span style="">加快文件输出速度</span>
<ul><li><a name="Freemind_Link_496998617"></a><span style="">设置 chunk.fast  参数为非零值。xsltproc, saxon, xalan 都支持 EXSLT，MSXML 则不支持</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1597042220"></a><span style="">目录的分页格式</span>
<ul><li><a name="Freemind_Link_1780262632"></a><span style="">参数 chunk.tocs.and.lots = 1</span>
<ul><li><a name="Freemind_Link_202241059"></a><span style="">为文章目录创建单独一页</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1708105246"></a><span style="">chunk.separate.lots = 1</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1365256321"></a><span style="">分页级别</span>
<ul><li><a name="Freemind_Link_1944356042"></a><span style="">chunk.section.depth ，默认是1，如果设置为2，则 sect2 也分页</span></li></ul>
<ul><li><a name="Freemind_Link_137977784"></a><span style="">chunk.first.sections ，默认第一节和之前的内容在一页；</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1739792658"></a><span style="">手动设置分页</span>
<ul><li><a name="Freemind_Link_1798511314"></a><span style="">使用chunktoc.xsl 样式表</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1540356860"></a><span style="">输出文件缩进</span>
<ul><li><a name="Freemind_Link_1820518786"></a><span style="">chunker.output.indent=no/yes</span></li></ul>
<ul><li><a name="Freemind_Link_1680702884"></a><span style="">&lt;xsl:param name="chunker.output.indent"&gt;yes&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_60296290"></a><span style="">参数 chunk.quietly 设置为 1，则产生 html 文件过程不频繁显示消息</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_816025348"></a><span style="">单一分页HTML</span>
<ul><li><a name="Freemind_Link_1450094439"></a><span style="">onechunk.xsl 样式表</span></li></ul>
<ul><li><a name="Freemind_Link_471910958"></a><span style="">和无分页的 docbook.xsl 相比，由于使用了为分页功能提供的 XSLT 扩展功能，可以提供如下参数。</span></li></ul>
<ul><li><a name="Freemind_Link_877151038"></a><span style="">参数</span>
<ul><li><a name="Freemind_Link_1077953037"></a><span style="">id 属性指定输出文件名。因此可以不必指定输出文件名，只需在 root 元素增加 id 属性</span></li></ul>
<ul><li><a name="Freemind_Link_1903578178"></a><span style="">base.dir 参数可以设定输出文件的目录，因为 id 属性值不能包含 / 字符；</span></li></ul>
<ul><li><a name="Freemind_Link_1811322132"></a><span style="">设置输出文件的编码，可以通过参数 chunker.output.encoding  实现</span></li></ul>
<ul><li><a name="Freemind_Link_1418939263"></a><span style="">chunker.output.doctype-public 和 chunker.output.doctype-system 参数，则可以设定输出文件的 DOCTYPE</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1709495752"></a><span style="">字符集编码</span>
<ul><li><a name="Freemind_Link_1384731774"></a><span style="">html/docbook.xsl 默认输出是 ISO8859-1，文件中的中文等非 ISO8859-1 字符，编码为 $#xxxx</span></li></ul>
<ul><li><a name="Freemind_Link_638192405"></a><span style="">对于分页的 HTML ，可以使用
 chunker.output.encoding 参数</span>
<ul><li><a name="Freemind_Link_715120710"></a><span style="">onechunk.xsl 样式表 和 chunk.xsl 样式表，可以使用该参数定制输出文件编码</span></li></ul>
<ul><li><a name="Freemind_Link_1027922323"></a><span style="">docbook.xsl 则不能采用这种方式</span></li></ul>
<ul><li><a name="Freemind_Link_230577125"></a><span style="">如：</span>
<ul><li><a name="Freemind_Link_1678446995"></a><span style="">xsltproc --stringparam chunker.output.encoding utf-8 \
 /docbook/src/xsl/docbook-xsl-1.69.1/html/onechunk.xsl gb2312.xml</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_516559274"></a><span style="">该功能可以用于 xsltproc, Saxon等支持 EXSLT 引擎，不能用于 Xalan?</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_853317433"></a><span style="">docbook.xsl 需要定制样式表
来实现对输出编码的控制</span>
<ul><li><a name="Freemind_Link_330237538"></a><span style="">由于没有设置参数来修改输出编码，只能通过建立一个文件层来定义</span></li></ul>
<ul><li><a name="Freemind_Link_1119606330"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_1411534788"></a><span style="">&lt;?xml version='1.0'?&gt; 
&lt;xsl:stylesheet  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  
                 version="1.0"&gt; 

&lt;xsl:import href="/path/to/html/docbook.xsl"/&gt; 
&lt;xsl:output method="html"
            encoding="UTF-8"
            indent="no"/&gt;
 
&lt;/xsl:stylesheet&gt;  
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1876961229"></a><span style="">HTML 文件头： &lt;meta content="text/html; charset=UTF-8" http-equiv="Content-Type"&gt; </span></li></ul>
<ul><li><a name="Freemind_Link_353211455"></a><span style="">中文字符编码：</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1359085079"></a><span style="">saxon.character.representation </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1310253055"></a><span style="">CSS 嵌入 HTML</span>
<ul><li><a name="Freemind_Link_1854822977"></a><span style="">参数 html.stylesheet </span></li></ul>
<ul><li><a name="Freemind_Link_1743098887"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_1546065658"></a><span style="">xsltproc --stringparam html.stylesheet  corpstyle.css  chunk.xsl  myfile.xml</span></li></ul>
<ul><li><a name="Freemind_Link_1635721296"></a><span style="">生成的 HTML Header 包含</span>
<ul><li><a name="Freemind_Link_1606674088"></a><span style="">&lt;link rel="stylesheet" href="corpstyle.css" 
      type="text/css"&gt; </span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1944750266"></a><span style="">定制 CSS</span>
<ul><li><a name="Freemind_Link_1735175461"></a><span style="">h2 即是 chapter， 也是 sect1 的标题样式，因为h1保留给 book 的标题</span>
<ul><li><a name="Freemind_Link_1256637865"></a><span style="">div.chapter div.titlepage h2 {
    font-size: 180%;
    font-family: Helvetica;
    font-weight: Bold;
    color: #444444
}
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1463265173"></a><span style="">为 programlisting 加背景色</span>
<ul><li><a name="Freemind_Link_719749254"></a><span style="">pre.programlisting {
  background-color: #FFFF99 ;
  border: 1px solid #006600 ;
}</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_481029568"></a><span style="">用户自定义样式</span>
<ul><li><a name="Freemind_Link_1831348923"></a><span style="">为 para 增加 样式</span>
<ul><li><a name="Freemind_Link_1616270175"></a><span style="">定义 para.propagates.style 参数为非零值</span></li></ul>
<ul><li><a name="Freemind_Link_523405082"></a><span style="">在 DocBook XML 中为 para 增加 role 属性</span>
<ul><li><a name="Freemind_Link_1027499039"></a><span style="">DocBook XML:
&lt;para role="primary"&gt;This feature of the product ...&lt;/para&gt;

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1014657114"></a><span style="">转换出来的 HTML 为段落增加样式</span>
<ul><li><a name="Freemind_Link_1449295464"></a><span style="">HTML output:
&lt;p class="primary"&gt;This feature of the product ...&lt;/p&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1196288710"></a><span style="">emphasis</span>
<ul><li><a name="Freemind_Link_394106880"></a><span style="">emphasis.propagates.style</span></li></ul>
<ul><li><a name="Freemind_Link_1490565394"></a><span style="">例如：</span>
<ul><li><a name="Freemind_Link_883123696"></a><span style="">DocBook XML:
Using an SQL &lt;emphasis role="sqlsyntax"&gt;select&lt;/emphasis&gt; statement

HTML output:
Using an SQL &lt;span class="sqlsyntax"&gt;select&lt;/span&gt; statement

CSS stylesheet entry:
.sqlsyntax {font-variant: small-caps;}</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1981238222"></a><span style="">entry</span>
<ul><li><a name="Freemind_Link_417442262"></a><span style="">entry.propagates.style</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_511375110"></a><span style="">phrase</span>
<ul><li><a name="Freemind_Link_633440874"></a><span style="">phrase.propagates.style parameters </span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1587323821"></a><span style="">章节编号</span>
<ul><li><a name="Freemind_Link_171793213"></a><span style="">chapter.autolabel = 1|0</span></li></ul>
<ul><li><a name="Freemind_Link_126185385"></a><span style="">appendix.autolabel =1|0</span></li></ul>
<ul><li><a name="Freemind_Link_557874969"></a><span style="">section.autolabel =0|1</span></li></ul>
<ul><li><a name="Freemind_Link_1899493898"></a><span style="">section.label.includes.component.label = 0|1</span></li></ul>
<ul><li><a name="Freemind_Link_1088779322"></a><span style="">section.autolabel.max.depth = 8</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1587917362"></a><span style="">图标控制</span>
<ul><li><a name="Freemind_Link_1092456923"></a><span style="">何处出现图标？</span>
<ul><li><a name="Freemind_Link_312061343"></a><span style="">admonitions (note, tip, warning, caution, and important).</span></li></ul>
<ul><li><a name="Freemind_Link_1362765623"></a><span style="">Next, Previous, Up, and Home for navigating among chunked output</span></li></ul>
<ul><li><a name="Freemind_Link_1796789596"></a><span style="">Numbered icons for callouts.  </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1381438459"></a><span style="">admon 图标参数控制</span>
<ul><li><a name="Freemind_Link_377914389"></a><span style="">admon.graphics = 0|1</span>
<ul><li><a name="Freemind_Link_622245226"></a><span style="">是否显示图标</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_699790070"></a><span style="">admon.graphics.path = images/</span></li></ul>
<ul><li><a name="Freemind_Link_177440890"></a><span style="">admon.graphics.extension  = .png</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_947132161"></a><span style="">Navigational icons</span>
<ul><li><a name="Freemind_Link_43357661"></a><span style="">navig.graphics = 0|1</span></li></ul>
<ul><li><a name="Freemind_Link_510094680"></a><span style="">如: xsltproc  -stringparam  navig.graphics 1  chunk.xsl  myfile.xml </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_442057800"></a><span style="">Callout icons</span>
<ul><li><a name="Freemind_Link_477027617"></a><span style="">callout.graphics.number.limit = 15</span>
<ul><li><a name="Freemind_Link_1545594333"></a><span style="">超过则显示文字，如 (16)</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_616849827"></a><span style="">callout.graphics.path =  images/callouts </span></li></ul>
<ul><li><a name="Freemind_Link_1421372277"></a><span style="">callout.graphics.extension = png</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1454927379"></a><span style="">时间和日期</span>
<ul><li><a name="Freemind_Link_1281318075"></a><span style="">可以插入 PI，输出文档的相应部位显示为编译时的时间</span></li></ul>
<ul><li><a name="Freemind_Link_514249591"></a><span style="">&lt;?dbtimestamp format="Y-m-d H:M:S"?&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_542223674"></a><span style="">可打印版本输出的参数控制</span>
<ul><li><a name="Freemind_Link_622738554"></a><span style="">与上节 HTML 参数控制基本相同的</span>
<ul><li><a name="Freemind_Link_575331313"></a><span style="">图标</span></li></ul>
<ul><li><a name="Freemind_Link_830309734"></a><span style="">章节编号</span></li></ul>
<ul><li><a name="Freemind_Link_537850891"></a><span style="">输出特定章节</span>
<ul><li><a name="Freemind_Link_1700555907"></a><span style="">rootid 指定要打印的特定章节名称</span></li></ul>
<ul><li><a name="Freemind_Link_885010203"></a><span style="">generate.toc 为打印的部分章节添加编号</span></li></ul>
<ul><li><a name="Freemind_Link_594670647"></a><span style="">命令</span>
<ul><li><a name="Freemind_Link_1196282406"></a><span style="">xsltproc  --output myfile.fo  \
  --stringparam  rootid  mychapterid \
  --stringparam  generate.toc  "chapter  title,toc" \
  fo/docbook.xsl  myfile.xml
</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1900909126"></a><span style="">页面控制</span>
<ul><li><a name="Freemind_Link_737519586"></a><span style="">paper.type 纸张大小</span>
<ul><li><a name="Freemind_Link_389617487"></a><span style="">paper.type</span></li></ul>
<ul><li><a name="Freemind_Link_92518135"></a><span style="">xsltproc  --output myfile.fo  \
  --stringparam  paper.type  A4 \
  fo/docbook.xsl  myfile.xml
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_832999394"></a><span style="">自定义纸张大小</span>
<ul><li><a name="Freemind_Link_175703032"></a><span style="">page.width 与 page.height 参数</span></li></ul>
<ul><li><a name="Freemind_Link_639651429"></a><span style="">xsltproc  --output myfile.fo  \
  --stringparam  page.height 9in \
  --stringparam  page.width 7in \
  fo/docbook.xsl  myfile.xml
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1508880864"></a><span style="">margin</span>
<ul><li><a name="Freemind_Link_1843918116"></a><span style="">page.margin.inner</span></li></ul>
<ul><li><a name="Freemind_Link_1223581891"></a><span style="">page.margin.outer</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1239317248"></a><span style="">排版控制</span>
<ul><li><a name="Freemind_Link_613770749"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_1090189960"></a><span style="">xsltproc  --output myfile.fo  \
  --stringparam  body.font.family  Helvetica \
  --stringparam  body.font.master  11 \
  --stringparam  title.font.family  "Times Roman" \
  --stringparam  footnote.font.size 9 \
 fo/docbook.xsl  myfile.xml
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_16325520"></a><span style="">分页符</span>
<ul><li><a name="Freemind_Link_906935677"></a><span style="">防止不当的分页</span>
<ul><li><a name="Freemind_Link_1787343973"></a><span style="">XSL 的 keep-together 属性</span>
<ul><li><a name="Freemind_Link_1917231977"></a><span style="">例如 table 元素存在该属性，避免表格当中分页</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_466692634"></a><span style="">XSL 的 keep-with-next  属性</span>
<ul><li><a name="Freemind_Link_1882767396"></a><span style="">例如 章节标题通过该属性避免被孤立限制在一页的末尾</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1878926476"></a><span style="">插入 PI 控制该属性</span>
<ul><li><a name="Freemind_Link_389404724"></a><span style="">允许 table 中分页</span>
<ul><li><a name="Freemind_Link_113357514"></a><span style="">  &lt;table&gt;
  &lt;title&gt;My long table&lt;/title&gt;
  &lt;?dbfo keep-together="auto" ?&gt;
  ...
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_907436925"></a><span style="">样式表支持软分页符</span>

<ul><li><a name="Freemind_Link_1969136221"></a><span style="">软分页符又称为条件分页符，如果不符合特定条件，不插入分页符。
（例如：我需要在当前页为下述内容留出至少 2 英寸宽，否则插入分页符）</span></li></ul>
<ul><li><a name="Freemind_Link_1981439506"></a><span style="">dbfo-need 示例</span>
<ul><li><a name="Freemind_Link_641863706"></a><span style="">&lt;para&gt;Some text in a paragraph&lt;/para&gt;
&lt;?dbfo-need height="2in" ?&gt;
&lt;para&gt;The following code snippet illustrates 
the technique.&lt;/para&gt;
&lt;programlisting&gt;# Some sample code
&lt;/programlisting&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1154692866"></a><span style="">不支持插入硬分页符，
但用户可以定制 XSL</span>
<ul><li><a name="Freemind_Link_947571491"></a><span style="">因为硬分页符难以管理，因而默认样式表不支持</span></li></ul>
<ul><li><a name="Freemind_Link_906210681"></a><span style="">但可以定制样式表，如下</span></li></ul>
<ul><li><a name="Freemind_Link_1963005981"></a><span style="">样式表定制</span>
<ul><li><a name="Freemind_Link_811570951"></a><span style="">&lt;xsl:template match="processing-instruction('hard-pagebreak')"&gt;
   &lt;fo:block break-before='page'/&gt;
 &lt;/xsl:template&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1335587370"></a><span style="">在分页处增加 PI：&lt;?hard-pagebreak?&gt; </span>
<ul><li><a name="Freemind_Link_525014495"></a><span style="">&lt;para&gt;Some text in a paragraph&lt;/para&gt;
&lt;?hard-pagebreak?&gt;
&lt;para&gt;The following code snippet illustrates 
the technique.&lt;/para&gt;
&lt;programlisting&gt;# Some sample code
&lt;/programlisting&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1947623577"></a><span style="">PDF 书签</span>
<ul><li><a name="Freemind_Link_950417768"></a><span style="">PDF 支持在页面的一侧显示目录结构，此即书签</span></li></ul>
<ul><li><a name="Freemind_Link_1326899030"></a><span style="">通过设置 fop.extensions 参数实现</span>
<ul><li><a name="Freemind_Link_343136410"></a><span style="">xsltproc  --output myfile.fo  \
  --stringparam  fop.extensions  1 \
  fo/docbook.xsl  myfile.xml
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1421602230"></a><span style="">添加空行</span>
<ul><li><a name="Freemind_Link_1615276950"></a><span style="">使用 literallayout  元素</span>
<ul><li><a name="Freemind_Link_276070623"></a><span style="">在 literallayout  元素中的回车将予以保留</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_211512979"></a><span style="">样式表定制层
Customization layers</span>
<ul><li><a name="Freemind_Link_323547470"></a><span style="">何为定制层</span>
<ul><li><a name="Freemind_Link_1975704603"></a><span style="">建立一个新的 XSL 样式表，使得在不修改 DocBook 样式表前提下，对齐进行定制</span></li></ul>
<ul><li><a name="Freemind_Link_850031878"></a><span style="">便于升级</span></li></ul>
<ul><li><a name="Freemind_Link_733047346"></a><span style="">便于分发</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1174164458"></a><span style="">定制层可以实现</span>
<ul><li><a name="Freemind_Link_792059774"></a><span style="">设置参数</span>
<ul><li><a name="Freemind_Link_337278672"></a><span style="">可以将常用的参数放在定制层里面，避免了在命令行中定义参数的烦琐</span></li></ul>
<ul><li><a name="Freemind_Link_1390115554"></a><span style="">布尔值</span>
<ul><li><a name="Freemind_Link_1170146076"></a><span style="">示例: &lt;xsl:param name="admon.graphics" select="1"/&gt; </span></li></ul>
<ul><li><a name="Freemind_Link_782950349"></a><span style="">1 是布尔值，因此双引号即可</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_456834351"></a><span style="">字符串</span>
<ul><li><a name="Freemind_Link_592379220"></a><span style="">&lt;xsl:param name="parametername" select="'parametervalue'"/&gt; </span>
<ul><li><a name="Freemind_Link_1408948516"></a><span style="">双引号中的单引号，声明内容是字符串</span></li></ul>
<ul><li><a name="Freemind_Link_245676403"></a><span style="">如果忽略内部的字符串，会造成参数不起作用</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1628353503"></a><span style="">或者：&lt;xsl:param name="parametername"&gt;parametervalue&lt;/xsl:param&gt; </span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1874903729"></a><span style="">属性集合定制</span>
<ul><li><a name="Freemind_Link_1192140702"></a><span style="">何为属性集合</span>
<ul><li><a name="Freemind_Link_1864303086"></a><span style="">XSL 样式表通过 xsl:attribute-set 将 若干个 xsl:attribute 组织在一起为一个集合</span></li></ul>
<ul><li><a name="Freemind_Link_680658962"></a><span style="">如</span>
<ul><li><a name="Freemind_Link_16678855"></a><span style="">&lt;xsl:attribute-set name="section.title.properties"&gt;
  &lt;xsl:attribute name="font-family"&gt;
    &lt;xsl:value-of select="$title.font.family"/&gt;
  &lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="font-weight"&gt;bold&lt;/xsl:attribute&gt;
  &lt;!-- font size is calculated dynamically by section.heading template --&gt;
  &lt;xsl:attribute name="keep-with-next.within-column"&gt;always&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="space-before.minimum"&gt;0.8em&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="space-before.optimum"&gt;1.0em&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="space-before.maximum"&gt;1.2em&lt;/xsl:attribute&gt;
&lt;/xsl:attribute-set&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1907034500"></a><span style="">XSL 中如何引用属性集合</span>
<ul><li><a name="Freemind_Link_346777238"></a><span style="">fo:block 的开始 tag，将属性值引入其中</span></li></ul>
<ul><li><a name="Freemind_Link_374231658"></a><span style="">如</span>
<ul><li><a name="Freemind_Link_1982696603"></a><span style="">&lt;xsl:template name="section.heading"&gt;
  &lt;xsl:param name="level" select="1"/&gt;
  &lt;xsl:param name="title"/&gt;

  &lt;fo:block  xsl:use-attribute-sets="section.title.properties"&gt;
  ...

  &lt;/fo:block&gt;
&lt;/xsl:template&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1504759884"></a><span style="">定制层中对属性集合的定制</span>
<ul><li><a name="Freemind_Link_1075576107"></a><span style="">定制层中定义的属性集合和原样式表中的定义向合并</span></li></ul>
<ul><li><a name="Freemind_Link_666838659"></a><span style="">例如定制层中定义</span>
<ul><li><a name="Freemind_Link_557665588"></a><span style="">&lt;xsl:attribute-set name="section.title.properties"&gt;
  &lt;xsl:attribute name="font-weight"&gt;normal&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="text-align"&gt;left&lt;/xsl:attribute&gt;
&lt;/xsl:attribute-set&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_11528582"></a><span style="">充实占位模板</span>
<ul><li><a name="Freemind_Link_33366810"></a><span style="">占位模板是在 XSL 样式表定义中，预留的空的占位模板，
因为本身为空，因而对输出没有任何作用，仅为定制提供一个空间</span></li></ul>
<ul><li><a name="Freemind_Link_996186375"></a><span style="">定制层可以对占位模板重新定义，充实其内容</span></li></ul>
<ul><li><a name="Freemind_Link_1618179050"></a><span style="">分页样式模板中存在一个占位模板 user.header.content ，
如果为该模板定义了内容，则每个分页内容的头部都会增加
内容。</span></li></ul>
<ul><li><a name="Freemind_Link_321487265"></a><span style="">其它占位模板，如:</span>
<ul><li><span style="">user.preroot</span></li></ul>
<ul><li><a name="Freemind_Link_1103181805"></a><span style="">user.head.content</span>
<ul><li><a name="Freemind_Link_523069804"></a><span style="">添加 CSS 等</span>
<ul><li><a name="Freemind_Link_1780650067"></a><span style="">&lt;xsl:param name="target.window" select="'_self'"/&gt;
&lt;xsl:template name="user.head.content"&gt;
  &lt;xsl:comment&gt; (c) 2002 Copyright Megacorp, Inc. &lt;/xsl:comment&gt;
  &lt;base  target="{$target.window}"/&gt;
  &lt;style type="text/css"&gt;
    &lt;xsl:comment&gt;
      @import "stylesheets/override.css"
      body {background: url(graphics/bluesea.png);}
    &lt;/xsl:comment&gt;
  &lt;/style&gt;
&lt;/xsl:template&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_362888893"></a><span style="">添加时间信息的 meta</span>
<ul><li><a name="Freemind_Link_266503594"></a><span style="">&lt;xsl:template name="user.head.content"&gt;  
  &lt;meta name="date"&gt;  
    &lt;xsl:attribute name="content"&gt;  
      &lt;xsl:call-template name="datetime.format"&gt;  
        &lt;xsl:with-param name="date" select="date:date-time()"/&gt;  
        &lt;xsl:with-param name="format" select="'m/d/Y'"/&gt;  
      &lt;/xsl:call-template&gt;
    &lt;/xsl:attribute&gt;
  &lt;/meta&gt;
&lt;/xsl:template&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1909534486"></a><span style="">user.header.navigation</span>
<ul><li><a name="Freemind_Link_983533445"></a><span style="">&lt;xsl:template name="user.header.content"&gt;
  &lt;p&gt;&lt;b&gt;Hi Mom!&lt;/b&gt;&lt;/p&gt;
&lt;/xsl:template&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_459428464"></a><span style="">user.header.content</span>
<ul><li><a name="Freemind_Link_1528567977"></a><span style="">SSI
（注意 xsl:comment 的运用）</span>
<ul><li><a name="Freemind_Link_465737387"></a><span style="">&lt;xsl:template name="user.header.content"&gt;
  &lt;div&gt;
    &lt;!-- Apache SSI --&gt;
    &lt;xsl:comment&gt;#include virtual="/cgi-bin/counter.pl"&lt;/xsl:comment&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_653338354"></a><span style="">JSP inclusion
（注意: xsl:text 的 disable-xxx 属性）</span>
<ul><li><a name="Freemind_Link_809210009"></a><span style="">&lt;xsl:template name="user.header.content"&gt;
  &lt;div&gt;
    &lt;!-- JSP inclusion --&gt;
    &lt;xsl:text disable-output-escaping="yes"&gt;
       &amp;lt;%@ include file="/header.html" %&gt;
    &lt;/xsl:text&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_955926451"></a><span style="">user.footer.content</span>
<ul><li><a name="Freemind_Link_753834979"></a><span style="">&lt;xsl:template name="user.footer.content"&gt;
  &lt;HR/&gt;&lt;P class="copyright"&gt;&amp;#x00A9; 2002  Megacorp, Inc.&lt;/P&gt;
&lt;/xsl:template&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1548977244"></a><span style="">user.footer.navigation</span>
<ul><li><a name="Freemind_Link_1194820479"></a><span style="">&lt;xsl:include href="user.footer.navigation.xsl"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1633123736"></a><span style="">参见 OSX XSL 定制</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_805304034"></a><span style="">创建新模板</span></li></ul>
<ul><li><a name="Freemind_Link_630527254"></a><span style="">定制文字</span>
<ul><li><a name="Freemind_Link_318819126"></a><span style="">本地化设置</span>
<ul><li><a name="Freemind_Link_382802217"></a><span style="">元素的 lang 属性</span>
<ul><li><a name="Freemind_Link_331667912"></a><span style="">本地化设置</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1846453639"></a><span style="">l10n.gentext.default.language</span>
<ul><li><a name="Freemind_Link_1346455631"></a><span style="">例如 &lt;xsl:param name="l10n.gentext.default.language"&gt;zh_cn&lt;/xsl:param&gt; </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1651951751"></a><span style="">l10n.gentext.language</span>
<ul><li><a name="Freemind_Link_1693720634"></a><span style="">&lt;xsl:param name="l10n.gentext.language"&gt;zh_cn&lt;/xsl:param&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_924799542"></a><span style="">设置语种，覆盖 元素的 lang 设置</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_428974946"></a><span style="">生成的文字（Generated text）是 XSL 样式表输出时添加的文字，这些文字存在本地化的问题</span></li></ul>
<ul><li><a name="Freemind_Link_1078312958"></a><span style="">参见 common/en.xml</span></li></ul>
<ul><li><a name="Freemind_Link_811487067"></a><span style="">一种是 l:gentext 将打印字符(text) 对应于相应的元素(key)
</span>
<ul><li><a name="Freemind_Link_1906333980"></a><span style="">如: common/en.xml 中
    &lt;l:gentext key="Abstract" text="Abstract"/&gt;
common/zh_cn.xml 中
    &lt;l:gentext key="Abstract" text="&amp;#25688;&amp;#35201;"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_115232480"></a><span style="">另外一种是上下文相关的文字定制，由 l:context  元素定义</span>
<ul><li><a name="Freemind_Link_561284286"></a><span style="">如:
   &lt;l:context name="styles"&gt;
      &lt;l:template name="person-name" text="first-last"/&gt;
   &lt;/l:context&gt;

   &lt;l:context name="title"&gt;
      &lt;l:template name="abstract" text="%t"/&gt;
      &lt;l:template name="answer" text="%t"/&gt;
      &lt;l:template name="appendix" text="Appendix&amp;#160;%n.&amp;#160;%t"/&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1710388180"></a><span style="">在定制层中定制</span>
<ul><li><a name="Freemind_Link_470893844"></a><span style="">&lt;xsl:param name="local.l10n.xml" select="document('')"/&gt; 
&lt;l:i18n xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0"&gt; 
  &lt;l:l10n language="en"&gt; 
    &lt;l:context name="xref-number-and-title"&gt; 
      &lt;l:template name="chapter" text="Chapter %n: &amp;#8220;%t&amp;#8221;"/&gt; 
    &lt;/l:context&gt;    
  &lt;/l:l10n&gt;
&lt;/l:i18n&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_485874446"></a><span style="">替换样式模板</span>
<ul><li><a name="Freemind_Link_359848471"></a><span style="">最后一招，替换模板。自定义模板的优先级比缺省模板的优先级高</span></li></ul>
<ul><li><a name="Freemind_Link_1389645748"></a><span style="">例如: 替换 body.attributes 模板，
为 body 增加属性定义</span>
<ul><li><a name="Freemind_Link_10711575"></a><span style="">&lt;xsl:template name="body.attributes"&gt;
  &lt;xsl:attribute name="onLoad"&gt;alert('Thanks for visiting')&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="bgcolor"&gt;white&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="text"&gt;black&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="link"&gt;#0000FF&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="vlink"&gt;#840084&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="alink"&gt;#0000FF&lt;/xsl:attribute&gt;
&lt;/xsl:template&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_129587450"></a><span style="">例如：</span>
<ul><li><a name="Freemind_Link_675301158"></a><span style="">将模板
&lt;xsl:template match="command"&gt;
  &lt;xsl:call-template name="inline.boldseq"/&gt;
&lt;/xsl:template&gt;
替换为
&lt;xsl:template match="command"&gt;
  &lt;xsl:call-template name="inline.monoseq"/&gt;
&lt;/xsl:template&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_473276600"></a><span style="">本地化设置</span>
<ul><li><a name="Freemind_Link_241212870"></a><span style="">定制中文姓名显示方式</span>
<ul><li><a name="Freemind_Link_340381357"></a><span style="">设置中文 person-name 显示方式为 family-given</span>
<ul><li><a name="Freemind_Link_1801690201"></a><span style="">&lt;xsl:param name="local.l10n.xml" select="document('')"/&gt; 
&lt;l:i18n xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0"&gt; 
  &lt;l:l10n language="zh_cn"&gt; 
    &lt;l:context name="styles"&gt;
       &lt;l:template name="person-name" text="family-given"/&gt;
    &lt;/l:context&gt;
  &lt;/l:l10n&gt;
&lt;/l:i18n&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_523257237"></a><span style="">定制 family-given 模板</span>
<ul><li><a name="Freemind_Link_787433566"></a><span style="">&lt;xsl:template name="person.name.family-given"&gt;
  &lt;xsl:param name="node" select="."/&gt;

  &lt;xsl:if test="$node//surname"&gt;
    &lt;xsl:apply-templates select="$node//surname[1]"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if test="$node//othername and $author.othername.in.middle != 0"&gt;
    &lt;xsl:if test="$node//surname"&gt;
      &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="$node//othername[1]"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if test="$node//firstname"&gt;
    &lt;xsl:if test="$node//surname
                  or ($node//othername and $author.othername.in.middle != 0)"&gt;
      &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="$node//firstname[1]"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if test="$node//lineage"&gt;
    &lt;xsl:text&gt;, &lt;/xsl:text&gt;
    &lt;xsl:apply-templates select="$node//lineage[1]"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if test="$node//honorific"&gt;
    &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;xsl:apply-templates select="$node//honorific[1]"/&gt;
    &lt;xsl:value-of select="$punct.honorific"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_719253607"></a><span style="">自定义 PI</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_899454673"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_1917373472"></a><span style="">定制 html/docbook.xsl</span>
<ul><li><a name="Freemind_Link_72395282"></a><span style="">&lt;?xml version='1.0'?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;
&lt;xsl:import href="html/docbook.xsl"/&gt;
&lt;xsl:param name="html.stylesheet" select="'corpstyle.css'"/&gt;
&lt;xsl:param name="admon.graphics" select="1"/&gt;
&lt;/xsl:stylesheet&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1578032960"></a><span style="">定制 html/chunk.xsl </span>
<ul><li><a name="Freemind_Link_743549100"></a><span style="">替换 &lt;xsl:import href="html/docbook.xsl"/&gt; 为 &lt;xsl:import href="html/chunk.xsl"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1121079641"></a><span style="">定制 fo</span>
<ul><li><a name="Freemind_Link_1404325089"></a><span style="">因为用到 fo:inline 元素，因此需要定义 fo 名字空间</span></li></ul>
<ul><li><a name="Freemind_Link_1119827498"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_57401880"></a><span style="">&lt;?xml version='1.0'?&gt; 
&lt;xsl:stylesheet  
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:fo="http://www.w3.org/1999/XSL/Format"
    version="1.0"&gt; 

&lt;xsl:import href="fo/docbook.xsl"/&gt; 

&lt;xsl:template match="lineannotation"&gt;
  &lt;fo:inline font-style="italic"&gt;
    &lt;xsl:call-template name="inline.charseq"/&gt;
  &lt;/fo:inline&gt;
&lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;  

</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_32851584"></a><span style="">为何不能将多个定制层合并为一个文件？</span>
<ul><li><a name="Freemind_Link_668147293"></a><span style="">因为 xsl:import 不能包含在条件语句（xsl:if 或 xsl:choose）之中</span></li></ul>
<ul><li><a name="Freemind_Link_464768439"></a><span style="">但是可以将共性的内容放在同一个文件，用 xsl:import 语句包含到不同的定制层</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1178749235"></a><span style="">使用定制层</span>
<ul><li><a name="Freemind_Link_1305561456"></a><span style="">&lt;html&gt;xsltproc  --output myfile.html  &lt;b&gt;mystyles.xsl&lt;/b&gt;  myfile.xml</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1899809355"></a><span style="">htmlhelp 输出定制</span>
<ul><li><a name="Freemind_Link_388229605"></a><span style="">命令行</span>
<ul><li><a name="Freemind_Link_1682757016"></a><span style="">xsltproc \
   ../docbook-xsl/htmlhelp/htmlhelp.xsl \
   myhelpdoc.xml</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_933578251"></a><span style="">Window 参数</span>
<ul><li><a name="Freemind_Link_555559766"></a><span style="">htmlhelp.title</span>
<ul><li><a name="Freemind_Link_1144441449"></a><span style="">窗口标题</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1768128776"></a><span style="">htmlhelp.window.geometry</span>
<ul><li><a name="Freemind_Link_787886516"></a><span style="">窗口大小和位置</span></li></ul>
<ul><li><a name="Freemind_Link_1555996453"></a><span style="">例如 [160,64,992,704] 含义为左上角坐标和右下角坐标</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1610990074"></a><span style="">htmlhelp.remember.window.position</span>
<ul><li><a name="Freemind_Link_1159742505"></a><span style="">记住上次位置</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1261209358"></a><span style="">htmlhelp.show.menu</span>
<ul><li><a name="Freemind_Link_1013050261"></a><span style="">是否显示菜单</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1312469515"></a><span style="">htmlhelp.show.favorites</span></li></ul>
<ul><li><a name="Freemind_Link_1304362393"></a><span style="">htmlhelp.show.advanced.search</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1467617584"></a><span style="">按钮选项</span>
<ul><li><a name="Freemind_Link_1720251588"></a><span style="">按钮显示选项</span>
<ul><li><a name="Freemind_Link_1833090352"></a><span style="">htmlhelp.show.toolbar.text 是否显示按钮文字</span></li></ul>
<ul><li><span style="">htmlhelp.button.hideshow</span></li></ul>
<ul><li><span style="">htmlhelp.button.back</span></li></ul>
<ul><li><span style="">htmlhelp.button.forward</span></li></ul>
<ul><li><span style="">htmlhelp.button.stop</span></li></ul>
<ul><li><span style="">htmlhelp.button.refresh</span></li></ul>
<ul><li><span style="">htmlhelp.button.home</span></li></ul>
<ul><li><span style="">htmlhelp.button.options</span></li></ul>
<ul><li><span style="">htmlhelp.button.print</span></li></ul>
<ul><li><span style="">htmlhelp.button.locate</span></li></ul>
<ul><li><span style="">htmlhelp.button.next</span></li></ul>
<ul><li><span style="">htmlhelp.button.previous</span></li></ul>
<ul><li><span style="">htmlhelp.button.zoom</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_531383298"></a><span style="">自定义按钮</span>
<ul><li><a name="Freemind_Link_773191202"></a><span style="">htmlhelp.button.jump1</span>
<ul><li><a name="Freemind_Link_1661774194"></a><span style="">是否显示自定义按钮1</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_19022655"></a><span style="">htmlhelp.button.jump1.title</span>
<ul><li><a name="Freemind_Link_1536687119"></a><span style="">自定义按钮1的标题</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1847307689"></a><span style="">htmlhelp.button.jump1.url</span>
<ul><li><a name="Freemind_Link_499739815"></a><span style="">按钮1的 URL</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_201717672"></a><span style="">目录选项</span>
<ul><li><a name="Freemind_Link_989241644"></a><span style="">htmlhelp.hhc.show.root</span></li></ul>
<ul><li><a name="Freemind_Link_1781097362"></a><span style="">htmlhelp.hhc.width</span></li></ul>
<ul><li><a name="Freemind_Link_1935242964"></a><span style="">htmlhelp.autolabel</span></li></ul>
<ul><li><a name="Freemind_Link_226086979"></a><span style="">htmlhelp.hhc.section.depth=5</span></li></ul>
<ul><li><a name="Freemind_Link_1580167529"></a><span style="">htmlhelp.default.topic </span>
<ul><li><a name="Freemind_Link_366244655"></a><span style="">设置起始页，默认是 index.htm</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_265601617"></a><span style="">文件名选项</span>
<ul><li><a name="Freemind_Link_56184348"></a><span style="">htmlhelp.hhp</span>
<ul><li><a name="Freemind_Link_1536906014"></a><span style="">工程文件文件名</span></li></ul>
</li></ul>
<ul><li><span style="">htmlhelp.hhc</span></li></ul>
<ul><li><span style="">htmlhelp.hhk</span></li></ul>
<ul><li><span style="">htmlhelp.chm</span></li></ul>
<ul><li><a name="Freemind_Link_271576690"></a><span style="">base.dir</span>
<ul><li><a name="Freemind_Link_795964432"></a><span style="">HTML 存储目录，也可以不是目录而作为文件名前缀</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_40718532"></a><span style="">manifest.in.base.dir</span>
<ul><li><a name="Freemind_Link_1862839475"></a><span style="">工程文件是否和 HTML 文件一起保存在 base.dir 中？</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_557835384"></a><span style="">字符编码选项</span>
<ul><li><a name="Freemind_Link_1081957103"></a><span style="">HTML Help language</span>
<ul><li><a name="Freemind_Link_1563732073"></a><span style="">&lt;l:context name="htmlhelp"&gt;
   &lt;l:template name="langcode" text="0x0409 English (UNITED STATES)"/&gt;
&lt;/l:context&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_531694195"></a><span style=""> htmlhelp.encoding </span></li></ul>
<ul><li><a name="Freemind_Link_955690828"></a><span style="">html 字符集编码</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_91460838"></a><span style="">其它参数</span>
<ul><li><a name="Freemind_Link_1481864358"></a><span style="">htmlhelp.enumerate.images</span>
<ul><li><a name="Freemind_Link_1889427305"></a><span style="">将图像枚举在 hhp 工程文件中</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_120800460"></a><span style="">htmlhelp.use.hhk </span>
<ul><li><a name="Freemind_Link_1441554261"></a><span style="">是否支持 index，DocBook 中 indexterm 创建 index</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_628223180"></a><span style="">htmlhelp.hhc.folders.instead.books</span></li></ul>
<ul><li><a name="Freemind_Link_118931971"></a><span style="">htmlhelp.hhc.binary</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_911392011"></a><span style="">PATCH</span>
<ul><li><a name="Freemind_Link_1540781438"></a><span style="">osx.html.prefix=hh-</span>
<ul><li><a name="Freemind_Link_105386176"></a><span style="">为分页HTML 添加前缀，目的是使 htmlhelp 临时文件名不会搞乱正常的 HTML 输出</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1734100978"></a><span style="">htmlhelp.extra.files</span>
<ul><li><a name="Freemind_Link_272624773"></a><span style="">定义其它需要添加到 htmlhelp 工程文件中的文件列表</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_899403781"></a><span style="">调试 XSL</span>
<ul><li><a name="Freemind_Link_1427772195"></a><a style="" href="#Freemind_Link_845427863">用 &lt;xsl:message&gt; 打印调试信息</a>

<ul><li><a name="Freemind_Link_1077021358"></a><span style="">回车符: &amp;#10;</span></li></ul>
<ul><li><a name="Freemind_Link_63868654"></a><span style="">如</span>
<ul><li><a name="Freemind_Link_975145545"></a><span style="">&lt;xsl:message&gt;In lists.xsl (match="itemizedlist"), the value of the 
css.decoration parameter is &lt;xsl:value-of select="$css.decoration"/&gt;
&lt;/xsl:message&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1060686994"></a><span style="">常用的诊断变量</span>
<ul><li><a name="Freemind_Link_96284614"></a><span style="">当前元素名称: &lt;xsl:value-of select="local-name(.)"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_842395466"></a><span style="">当前元素内容: &lt;xsl:value-of select="."/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_869863844"></a><span style="">当前元素的某个属性: &lt;xsl:value-of select="@some-atrribute"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_958352964"></a><span style="">信息输出格式化</span>
<ul><li><a name="Freemind_Link_115711552"></a><span style="">回车: &amp;#10;</span></li></ul>
<ul><li><a name="Freemind_Link_891605255"></a><span style="">格式化文本: &lt;xsl:text&gt;...&lt;/xsl:text&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1941811435"></a><span style="">其它输出格式</span>
<ul><li><a name="Freemind_Link_1060363518"></a><span style="">rtf</span>
<ul><li><a name="Freemind_Link_1778118211"></a><span style="">FOP 暂时不能从 fo 输出到 rtf</span></li></ul>
<ul><li><a name="Freemind_Link_416865067"></a><span style="">但是可以用 xslt 直接输出 rtf</span></li></ul>
<ul><li><a name="Freemind_Link_439112719"></a><span style="">xslutil -out rtf output.rtf input.xml /usr/share/xml/docbook/fo/docbook.xsl</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1851931052"></a><span style="">pdf</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_522855681"></a><span style="">Catalog</span>
<ul><li><a name="Freemind_Link_967305256"></a><a style="" href="#Freemind_Link_1571284942">语法参见前面的介绍</a>

</li></ul>
<ul><li><a name="Freemind_Link_702769545"></a><span style="">Catalog 文件在哪？</span>
<ul><li><a name="Freemind_Link_311718019"></a><span style="">xsltproc</span>
<ul><li><a name="Freemind_Link_1942904210"></a><span style="">环境变量 XML_CATALOG_FILES</span>
<ul><li><a name="Freemind_Link_1923447548"></a><span style="">多个 catalog 用空格分隔，绝对路径采用 URI 格式，如 file:///</span></li></ul>
<ul><li><a name="Freemind_Link_1056891170"></a><span style="">例如： export  XML_CATALOG_FILES="catalog.xml  file:///usr/share/xml/catalog.xml"</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1754395797"></a><span style="">环境变量 XML_DEBUG_CATALOG 可以用于调试 xsltproc</span></li></ul>
<ul><li><a name="Freemind_Link_1428261722"></a><span style="">例如命令:</span>
<ul><li><a name="Freemind_Link_1954189689"></a><span style="">XML_CATALOG_FILES="catalog.xml  file:///usr/share/xml/catalog.xml" \
   XML_DEBUG_CATALOG=1 \
   xsltproc  docbook.xsl  myfile.xml
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_381104515"></a><span style="">Saxon </span>
<ul><li><a name="Freemind_Link_642103321"></a><span style="">下载 resolver.jar </span>
<ul><li><a name="Freemind_Link_1648817743"></a><span style="">http://xml.apache.org/commons/dist/</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_43727182"></a><span style="">将 resolver.jar 加入 CLASSPATH</span></li></ul>
<ul><li><a name="Freemind_Link_1624534421"></a><span style="">创建文件 CatalogManager.properties</span>
<ul><li><a name="Freemind_Link_1031878083"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_543528088"></a><span style="">catalogs=catalog.xml;../../dtd/docbook44/docbook.cat
relative-catalogs=false
static-catalog=yes
catalog-class-name=org.apache.xml.resolver.Resolver
verbosity=1
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_244378360"></a><span style="">catalogs=xxx;xxx －以分号分隔的catalog文件</span></li></ul>
<ul><li><a name="Freemind_Link_1440242108"></a><span style="">relative-catalogs=bool  －定义 catalog 文件相对路径以何为准
false: 相对 CatalogManager.properties 所在目录；
true:   相对文档所在的路径；</span></li></ul>
<ul><li><a name="Freemind_Link_844946461"></a><span style="">verbosity 设置调试等级，越高（最高4) 调试信息越多；</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1699282855"></a><span style="">将包含 CatalogManager.properties 的目录加入 CLASSPATH</span></li></ul>
<ul><li><a name="Freemind_Link_462658599"></a><span style="">命令行示例</span>
<ul><li><a name="Freemind_Link_438463501"></a><span style="">java  -cp "/usr/java/saxon.jar:/docbook-xsl/extensions/saxon653.jar:\
/usr/share/resolver.jar;/usr/share" \
   com.icl.saxon.StyleSheet \ 
   -x org.apache.xml.resolver.tools.ResolvingXMLReader \
   -y org.apache.xml.resolver.tools.ResolvingXMLReader \ 
   -r org.apache.xml.resolver.tools.CatalogResolver \
   -u \
   -o myfile.html \
   myfile.xml  docbook.xsl
</span></li></ul>
<ul><li><a name="Freemind_Link_360037759"></a><span style="">说明</span>
<ul><li><a name="Freemind_Link_725350314"></a><span style="">-cp 参数临时将jar 文件加入到 CLASSPATH 中</span></li></ul>
<ul><li><a name="Freemind_Link_887706144"></a><span style="">-u 参数，则命令行提供的文件名不作为物理路径，而是视为 URI，可以用 catalog 中设置对应为物理路径</span></li></ul>
<ul><li><a name="Freemind_Link_1118454367"></a><span style=""> -x, -y, and -r 参数配置 Saxon 使用 resolver 代码</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_619150858"></a><span style="">Xalan</span>
<ul><li><a name="Freemind_Link_576879197"></a><span style="">过程和 Saxon 类似</span></li></ul>
<ul><li><a name="Freemind_Link_1863688489"></a><span style="">命令行为</span>
<ul><li><a name="Freemind_Link_890921834"></a><span style="">java  -cp "/usr/java/xerces.jar:/usr/java/xalan.jar:\
/docbook-xsl/extensions/xalan25.jar:\
/usr/share/resolver.jar:/usr/share" \
   org.apache.xalan.xslt.Process  \
   -ENTITYRESOLVER  org.apache.xml.resolver.tools.CatalogResolver \
   -URIRESOLVER  org.apache.xml.resolver.tools.CatalogResolver \
   -out  myfile.html  \
   -in  myfile.xml  \
   -xsl  http://docbook.sourceforge.net/release/xsl/current/html/docbook.xsl 
</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1679239655"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_710864005"></a><span style="">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE catalog
   PUBLIC "-//OASIS/DTD Entity Resolution XML Catalog V1.0//EN"
   "http://www.oasis-open.org/committees/entity/release/1.0/catalog.dtd"&gt;

&lt;catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog"&gt;

  &lt;!-- DTD and stylesheet files installed under /usr/share/xml --&gt;
  &lt;group  xml:base="file:///usr/share/xml/" &gt;

    &lt;!-- Resolve DTD URL system ID to local file --&gt;
    &lt;rewriteSystem
        systemIdStartString="http://www.oasis-open.org/docbook/xml/4.4/"
        rewritePrefix="docbook44/" /&gt;
    &lt;!-- Resolve stylesheet URL to local file --&gt;
    &lt;rewriteURI
        uriStartString="http://docbook.sourceforge.net/release/xsl/current/"
        rewritePrefix="docbook-xsl-1.68.1/" /&gt;

    &lt;!-- Resolve DTD PUBLIC identifiers --&gt;
    &lt;nextCatalog  catalog="docbook44/catalog.xml" /&gt;

    &lt;!-- To resolve simple DTD SYSTEM identifiers. --&gt;
    &lt;!-- Note: this does not work with Java resolver --&gt;
    &lt;!--   classes in Saxon or Xalan --&gt;
    &lt;system
         systemId="docbook.dtd"
         uri="docbook44/docbookx.dtd" /&gt;

    &lt;!-- To resolve short stylesheet references --&gt;
    &lt;uri
        name="docbook.xsl"
        uri="docbook-xsl-1.68.1/html/docbook.xsl" /&gt;
    &lt;uri 
        name="chunk.xsl"
        uri="docbook-xsl-1.68.1/html/chunk.xsl" /&gt;
    &lt;uri
        name="fo-docbook.xsl"
        uri="docbook-xsl-1.68.1/fo/docbook.xsl" /&gt;

  &lt;/group&gt;

&lt;/catalog&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_669992677"></a><span style="">验证文档有效性</span>
<ul><li><a name="Freemind_Link_399568800"></a><span style="">XSL 处理器在格式转换中，并不验证文档有效性，这将会导致好形，但不有效的 XML 文档，将导致转换后的文档格式异常。</span></li></ul>
<ul><li><a name="Freemind_Link_1139494875"></a><span style="">xsltproc 的 xmllint</span>
<ul><li><a name="Freemind_Link_145537256"></a><span style="">XML_CATALOG_FILES=/share/catalog.xml xmllint  --valid  --nonet --noout gb2312.xml</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_273459291"></a><span style="">Xalan</span>

<ul><li><a name="Freemind_Link_648568623"></a><span style="">xalansamples.jar </span>
<ul><li><a name="Freemind_Link_348387039"></a><span style="">java  Validate  document.xml</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1817038399"></a><span style="">XInclude</span>
<ul><li><a name="Freemind_Link_590831669"></a><span style="">SGML 可以使用外部实体，来包含文件</span></li></ul>
<ul><li><a name="Freemind_Link_1904957918"></a><span style="">XML 则通过 XInclude，可以将一篇文章分为几个物理文件，并组合在一起</span></li></ul>
<ul><li><a name="Freemind_Link_431105172"></a><span style="">XInclude示例</span>
<ul><li><a name="Freemind_Link_677129000"></a><span style="">文件 intro.xml</span>
<ul><li><a name="Freemind_Link_661680971"></a><span style="">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
                 "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd"&gt; 
&lt;chapter id="intro"&gt; 
&lt;title&gt;Getting Started&lt;/title&gt;
&lt;section id="Installing"&gt;
...
&lt;/chapter&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_481767309"></a><span style="">   文件 index.xml
（包含 intro.xml）</span>
<ul><li><a name="Freemind_Link_590338872"></a><span style="">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
                 "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd"&gt; 
&lt;book&gt;
&lt;title&gt;User Guide&lt;/title&gt;
&lt;para&gt;This guide shows you how to use the software.&lt;/para&gt;
&lt;xi:include   
    xmlns:xi="http://www.w3.org/2001/XInclude"  href="intro.xml" /&gt; 
...
&lt;/book&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_481705203"></a><span style="">XInclude语法要点</span>
<ul><li><a name="Freemind_Link_134595565"></a><span style="">允许嵌套</span></li></ul>
<ul><li><a name="Freemind_Link_660566529"></a><span style="">href</span>
<ul><li><a name="Freemind_Link_818503392"></a><span style="">href 部分可以是相对路径、绝对路径、网址或者其它格式的URI</span></li></ul>
<ul><li><a name="Freemind_Link_1502425788"></a><span style="">URI 格式的 href，可以用 catalog 文件进行映射</span>
<ul><li><a name="Freemind_Link_505650279"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_806591247"></a><span style="">&lt;xi:include  href="file:///basics/intro.xml"  
             xmlns:xi="http://www.w3.org/2001/XInclude" /&gt; 
</span></li></ul>
<ul><li><a name="Freemind_Link_1074202657"></a><span style=""> &lt;rewriteURI
    uriStartString="file:///basics/"
    rewritePrefix="file:///usr/share/docsource/modules/IntroMaterial/" /&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_548122006"></a><span style="">XInclude早期的规范，允许在文件后面加上锚点来包含文章部分内容（现不支持），
新版本的规范，是通过 xpointer 实现。</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_382311977"></a><span style="">xpointer</span>
<ul><li><a name="Freemind_Link_862925512"></a><span style="">可以通过 xpointer 属性，只包含文档的部分内容，而不是默认的整个 root 元素</span></li></ul>
<ul><li><a name="Freemind_Link_1878852651"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_154061577"></a><span style="">&lt;xi:include  
     href="intro.xml 
     xpointer="Installing"  
     xmlns:xi="http://www.w3.org/2001/XInclude" /&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1335299162"></a><span style="">如果没有 href，只有 xpointer，则是将本文档的一部分包含</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1609432350"></a><span style="">parse="text" </span>
<ul><li><a name="Freemind_Link_1671325797"></a><span style="">对包含文件不进行解析，特殊字符进行转换</span>
<ul><li><a name="Freemind_Link_1562141036"></a><span style="">&amp;   becomes   &amp;amp;
&lt;   becomes   &amp;lt;
&gt;   becomes   &amp;gt;
"   becomes   &amp;quot;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_403130606"></a><span style="">parse="text"</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1542449176"></a><span style="">encoding=xxx</span>
<ul><li><a name="Freemind_Link_406770797"></a><span style="">可以指定包含文件的编码，尤其是当 parse="text" 时</span></li></ul>
<ul><li><a name="Freemind_Link_1301174623"></a><span style="">当 parse="xml"，则该参数不应该提供，因为 XML 文件的前言可以指定编码</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_725092615"></a><span style="">XInclude fallback</span>
<ul><li><a name="Freemind_Link_353709282"></a><span style="">即如果 XInclude 包含文件找不到，fallback 提供的内容被显示</span></li></ul>
<ul><li><a name="Freemind_Link_50006998"></a><span style="">例如：</span>
<ul><li><a name="Freemind_Link_508507429"></a><span style="">&lt;xi:include  href="intro.xml" xmlns:xi="http://www.w3.org/2001/XInclude"&gt;
  &lt;xi:fallback&gt;
    &lt;para&gt;&lt;emphasis&gt;FIXME:  MISSING XINCLUDE CONTENT&lt;/emphasis&gt;&lt;/para&gt;
  &lt;/xi:fallback&gt;
&lt;/xi:include&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_419372766"></a><span style="">entities</span>
<ul><li><a name="Freemind_Link_1857436970"></a><span style="">XInclude是用于替代实体，但是实体可以和 XInclude 配合使用</span></li></ul>
<ul><li><a name="Freemind_Link_1117202374"></a><span style="">这样的优点是，包含的文件都声明在文件头 DOCTYPE  中，一目了然</span></li></ul>
<ul><li><a name="Freemind_Link_1644493058"></a><span style="">XInclude 的 href 元素的值为实体引用</span></li></ul>
<ul><li><a name="Freemind_Link_1274731286"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_1496516232"></a><span style="">&lt;!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
                "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
&lt;!ENTITY intro              "part1/intro.xml"&gt;
&lt;!ENTITY basics             "part1/getting_started.xml"&gt;
&lt;!ENTITY config             "admin/configuring_the_server.xml"&gt;
&lt;!ENTITY advanced           "admin/advanced_user_moves.xml"&gt;
]&gt; 
&lt;book&gt;
&lt;title&gt;User Guide&lt;/title&gt;
&lt;para&gt;This guide shows you how to use the software.&lt;/para&gt;
&lt;xi:include  href="&amp;intro;"    xmlns:xi="http://www.w3.org/2001/XInclude"/&gt; 
&lt;xi:include  href="&amp;basics;"   xmlns:xi="http://www.w3.org/2001/XInclude"/&gt; 
&lt;xi:include  href="&amp;config;"   xmlns:xi="http://www.w3.org/2001/XInclude"/&gt; 
&lt;xi:include  href="&amp;advanced;" xmlns:xi="http://www.w3.org/2001/XInclude"/&gt; 
...
&lt;/book&gt;

</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1291076547"></a><span style="">xsltproc</span>
<ul><li><a name="Freemind_Link_1961524170"></a><span style="">http://xmlsoft.org/XSLT/xsltproc2.html</span></li></ul>
<ul><li><a name="Freemind_Link_591504256"></a><span style="">libxml2</span>
<ul><li><a name="Freemind_Link_1252621374"></a><span style="">xmlcatalog</span>

</li></ul>
<ul><li><a name="Freemind_Link_1430770144"></a><span style="">xmllint</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1970845135"></a><span style="">xmltproc</span></li></ul>
<ul><li><a name="Freemind_Link_605679365"></a><span style="">命令行参数</span>
<ul><li><a name="Freemind_Link_611626803"></a><span style="">xsltproc [options] stylesheet file [file ...]</span></li></ul>
<ul><li><a name="Freemind_Link_1713354175"></a><span style="">-o/--output file</span>
<ul><li><a name="Freemind_Link_1912904404"></a><span style="">输出到文件</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1971338451"></a><span style="">--timing</span>
<ul><li><a name="Freemind_Link_76007690"></a><span style="">显示运行时间</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_972431579"></a><span style="">--novalid</span>
<ul><li><a name="Freemind_Link_1887294038"></a><span style="">略过 XML 验证，不加载 DTD</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1776509857"></a><span style="">--noout</span>
<ul><li><a name="Freemind_Link_1384998274"></a><span style="">不输出</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1885082918"></a><span style="">--maxdepth val </span></li></ul>
<ul><li><a name="Freemind_Link_413691329"></a><span style="">--docbook</span>
<ul><li><a name="Freemind_Link_1396219872"></a><span style="">输入文件是 SGML 格式的 DocBook</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1320920507"></a><span style="">--param name value</span>
<ul><li><a name="Freemind_Link_383836236"></a><span style="">传递一个 Name/Value 对</span></li></ul>
<ul><li><a name="Freemind_Link_61145352"></a><span style="">value 是一个 UTF8 XPath 表达式，如果传递字符串，需要用 "'string'" 括起来，或者使用 --stringparam 参数</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1338207465"></a><span style="">--stringparam name value</span>
<ul><li><a name="Freemind_Link_736647618"></a><span style="">传递一个 Name/Value 对</span></li></ul>
<ul><li><a name="Freemind_Link_23114333"></a><span style="">value 是一个 Utf8 字符串</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_800258432"></a><span style="">--nonet</span>
<ul><li><a name="Freemind_Link_297150930"></a><span style="">不要通过网络传输 DTD, 实体等</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_664117973"></a><span style="">--catalogs</span>
<ul><li><a name="Freemind_Link_247315065"></a><span style="">默认是通过环境变量 XML_CATALOG_FILES 读取 catalog 文件，
--catalogs 则通过环境变量 $SGML_CATALOG_FILES 读取 Catalog 文件，
如果都没有设置，则读取 /etc/xml/catalog 文件。
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_68053686"></a><span style="">--xinclude </span>
<ul><li><a name="Freemind_Link_31786411"></a><span style="">do XInclude processing on document intput </span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1479217"></a><span style="">命令行示例</span>
<ul><li><a name="Freemind_Link_1070506168"></a><span style="">HTML example: </span>
<ul><li><a name="Freemind_Link_1610170115"></a><span style="">XML_CATALOG_FILES=/share/catalog.xml xsltproc \
    --nonet --timing --output gb2312.html \
    --stringparam use.extensions 0 \
    /share/xsl/docbook-xsl-1.69.1/html/docbook.xsl \
    gb2312.xml
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_472989979"></a><span style="">FO example</span>
<ul><li><a name="Freemind_Link_1706764137"></a><span style="">XML_CATALOG_FILES=/share/catalog.xml xsltproc \
    --nonet --timing --output gb2312.fo \
    --stringparam use.extensions 0 \
    /share/xsl/docbook-xsl-1.69.1/fo/docbook.xsl \
    gb2312.xml</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1188259808"></a><span style="">Saxon</span>
<ul><li><a name="Freemind_Link_260005519"></a><span style="">http://saxon.sourceforge.net/ </span></li></ul>
<ul><li><a name="Freemind_Link_469999267"></a><span style="">版本</span>
<ul><li><a name="Freemind_Link_801566809"></a><span style="">Saxon 6.5.3</span>
<ul><li><a name="Freemind_Link_945188332"></a><span style=""> XSLT 1.0 标准的实现</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_302612175"></a><span style="">Instant Saxon 6.5.3 </span>
<ul><li><a name="Freemind_Link_1693103784"></a><span style="">仅用于 Windows, 依赖 Microsoft Java VM</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_416089072"></a><span style="">Saxon-B 8</span>
<ul><li><a name="Freemind_Link_1353211694"></a><span style="">开源版本，支持 XSLT 2.0 标准</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1555425000"></a><span style="">Saxon-SA 8</span>
<ul><li><a name="Freemind_Link_1262829576"></a><span style="">Saxon 8 的商业标准。SA 含义为“schema aware”，即实现了 W3C XML Schema 标准</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_226489300"></a><span style="">偏离开源精神，是否值得关注？</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_339369187"></a><span style="">Xerces XML parser</span>
<ul><li><a name="Freemind_Link_1422948690"></a><span style="">有人将 Saxon 的 XML Parser换为 Xerces XML parser</span></li></ul>
<ul><li><a name="Freemind_Link_38916193"></a><span style="">下载：</span>
<ul><li><a name="Freemind_Link_1343161323"></a><span style="">http://xml.apache.org/xerces2-j/</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1034353054"></a><span style="">安装配置</span>
<ul><li><a name="Freemind_Link_937231120"></a><span style="">CLASSPATH=$CLASSPATH:/usr/saxon/saxon.jar:\
/usr/docbook-xsl/extensions/saxon653.jar
export CLASSPATH</span></li></ul>
<ul><li><a name="Freemind_Link_991703753"></a><span style="">Saxon with Xerces</span>
<ul><li><a name="Freemind_Link_1865204805"></a><span style="">CLASSPATH=$CLASSPATH:/usr/saxon/saxon.jar:\
/usr/docbook-xsl/extensions/saxon653.jar:/usr/share/xercesImpl.jar
export CLASSPATH</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_335523556"></a><span style="">注意: Windows 下的路径分隔符为分号“;”</span></li></ul>
<ul><li><a name="Freemind_Link_1806412062"></a><span style="">测试</span>
<ul><li><a name="Freemind_Link_1966295976"></a><span style="">java  com.icl.saxon.StyleSheet -t </span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_516264041"></a><span style="">DocBook Saxon extensions</span>
<ul><li><a name="Freemind_Link_676835719"></a><span style="">extensions/saxon65.jar</span></li></ul>
<ul><li><a name="Freemind_Link_1521127948"></a><span style="">启用扩展</span>
<ul><li><a name="Freemind_Link_961472463"></a><span style="">全局参数</span>
<ul><li><a name="Freemind_Link_1999472365"></a><span style="">use.extensions = 1</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1748086856"></a><span style="">参数: callouts.extension</span></li></ul>
<ul><li><a name="Freemind_Link_1617927549"></a><span style="">参数: textinsert.extension</span></li></ul>
<ul><li><a name="Freemind_Link_398911681"></a><span style="">参数: tablecolumns.extension</span></li></ul>
<ul><li><a name="Freemind_Link_142699599"></a><span style="">参数: linenumbering.extension</span></li></ul>
<ul><li><a name="Freemind_Link_760810990"></a><span style="">参数: graphicsize.extension</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1848018637"></a><span style="">命令行</span>
<ul><li><a name="Freemind_Link_567713710"></a><span style="">General syntax:</span>
<ul><li><a name="Freemind_Link_953830009"></a><span style="">java  com.icl.saxon.StyleSheet \
    options  \
    xml-document  \
    stylesheet-path  \
    param=value
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1134253494"></a><span style="">HTML example:</span>
<ul><li><a name="Freemind_Link_230070788"></a><span style="">
java  com.icl.saxon.StyleSheet  \
    -o myfile.html  \
    myfile.xml  \
    docbook-xsl/html/docbook.xsl  \
    use.extensions=1
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_846115205"></a><span style="">FO example:</span>
<ul><li><a name="Freemind_Link_1808916153"></a><span style="">
java  com.icl.saxon.StyleSheet   \
    -o myfile.fo   \
    myfile.xml   \
    docbook-xsl/fo/docbook.xsl   \
    use.extensions=1
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1197493949"></a><span style="">Saxon with Xerces parser:</span>
<ul><li><a name="Freemind_Link_1785424975"></a><span style="">
java \ 
  -Djavax.xml.parsers.DocumentBuilderFactory=\
     org.apache.xerces.jaxp.DocumentBuilderFactoryImpl \
  -Djavax.xml.parsers.SAXParserFactory=\
     org.apache.xerces.jaxp.SAXParserFactoryImpl \
  com.icl.saxon.StyleSheet  \
  -o myfile.html  \
  myfile.xml  \
  docbook-xsl/html/docbook.xsl
</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1918976588"></a><span style="">Xalan</span>
<ul><li><a name="Freemind_Link_685388591"></a><span style="">Two Version</span>
<ul><li><a name="Freemind_Link_29796119"></a><span style="">xalan-j_2_7_0-bin.tar.gz</span></li></ul>
<ul><li><a name="Freemind_Link_667004122"></a><span style="">xalan-j_2_7_0-2jars.tar.gz</span>
<ul><li><a name="Freemind_Link_437454470"></a><span style="">XSL processor 和 其它分作两个 Jar 文件打包而已</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_486454336"></a><span style="">包含的 Jar 文件</span>
<ul><li><a name="Freemind_Link_551668520"></a><span style="">xalan.jar
</span>
<ul><li><a name="Freemind_Link_1125709370"></a><span style="">The main Xalan XSLT processor.
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_190510392"></a><span style="">xercesImpl.jar
</span>
<ul><li><a name="Freemind_Link_463188919"></a><span style="">The XML parser used to parse the XML file.
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1893527482"></a><span style="">xml-apis.jar
</span>
<ul><li><a name="Freemind_Link_968667631"></a><span style="">Provides the SAX, DOM, and JAVAX interfaces used by Xalan.

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1668427204"></a><span style="">xalansamples.jar
</span>
<ul><li><a name="Freemind_Link_54976321"></a><span style="">A set of sample Java applications using Xalan. This file is not needed for DocBook processing.

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1709694096"></a><span style="">xalanservlet.jar
</span>
<ul><li><a name="Freemind_Link_683183231"></a><span style="">Sample application using Xalan in a Java servlet. This file is not needed for DocBook processing.

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_562197021"></a><span style="">xsltc.jar
</span>
<ul><li><a name="Freemind_Link_946411800"></a><span style="">Bundled set of XSLTC functions for compiling XSL stylesheets into a set of Java classes. This file is not needed for DocBook processing. It may not be present, depending on which package of Xalan you downloaded.

</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1902760503"></a><span style="">安装</span>
<ul><li><a name="Freemind_Link_594245054"></a><span style="">注意: Java 1.4 包含一个版本的 Xalan, 需要替换掉</span>
<ul><li><a name="Freemind_Link_1237651354"></a><span style="">将新版本覆盖到  /usr/jre2/lib/endorsed 目录下</span></li></ul>
<ul><li><a name="Freemind_Link_1846002917"></a><span style="">或者在命令行中指定另外目录作为 endorsed 目录</span>
<ul><li><a name="Freemind_Link_546966141"></a><span style="">CLASSPATH=$CLASSPATH:/usr/Xalan/xalan.jar:/usr/Xalan/xml-apis.jar:\
/usr/Xalan/xercesImpl.jar:/usr/docbook-xsl/extensions/xalan25.jar
export CLASSPATH
java -Djava.endorsed.dirs=/usr/Xalan  \
    org.apache.xalan.xslt.Process  \
    -out myfile.html  \
    -in myfile.xml  \
    -xsl /docbook-xsl/html/docbook.xsl 
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_333973013"></a><span style="">其它版本的 Java，可以将 Xalan 安装在任意位置</span></li></ul>
<ul><li><a name="Freemind_Link_1320843212"></a><span style="">设置 CLASSPATH</span>
<ul><li><a name="Freemind_Link_1169946472"></a><span style="">CLASSPATH=$CLASSPATH:/usr/Xalan/xalan.jar:/usr/Xalan/xml-apis.jar:\
/usr/Xalan/xercesImpl.jar:/usr/docbook-xsl/extensions/xalan25.jar
export CLASSPATH
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1619761027"></a><span style="">测试是否正常工作</span>
<ul><li><a name="Freemind_Link_36612896"></a><span style="">java  org.apache.xalan.xslt.EnvironmentCheck</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_332933837"></a><span style="">DocBook Xalan extensions</span>
<ul><li><a name="Freemind_Link_1873738548"></a><span style="">extensions/xalan25.jar</span></li></ul>
<ul><li><a name="Freemind_Link_1604186321"></a><span style="">启用扩展</span>
<ul><li><a name="Freemind_Link_696728295"></a><span style="">全局参数</span>
<ul><li><a name="Freemind_Link_174592695"></a><span style="">use.extensions = 1</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_491377683"></a><span style="">参数: callouts.extension</span></li></ul>
<ul><li><a name="Freemind_Link_906605987"></a><span style="">参数: textinsert.extension</span></li></ul>
<ul><li><a name="Freemind_Link_950779763"></a><span style="">参数: tablecolumns.extension</span></li></ul>
<ul><li><a name="Freemind_Link_401886403"></a><span style="">参数: linenumbering.extension</span></li></ul>
<ul><li><a name="Freemind_Link_1182230538"></a><span style="">参数: graphicsize.extension</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1299477847"></a><span style="">命令行</span>
<ul><li><a name="Freemind_Link_217878806"></a><span style="">参考：</span>
<ul><li><a name="Freemind_Link_673930407"></a><span style="">http://xml.apache.org/xalan-j/commandline.html</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1229925308"></a><span style="">General syntax:
</span>
<ul><li><a name="Freemind_Link_1050145786"></a><span style="">java  org.apache.xalan.xslt.Process   \
    -out outputfile  \
    -in xml-document  \
    -xsl stylesheet-path  \
    -param name value</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1658588048"></a><span style="">HTML example:
</span>
<ul><li><a name="Freemind_Link_838261395"></a><span style="">java org.apache.xalan.xslt.Process  \
    -out myfile.html  \
    -in myfile.xml  \
    -xsl docbook-xsl/html/docbook.xsl  \
    -param use.extensions 1

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1015174731"></a><span style="">FO example:
</span>
<ul><li><a name="Freemind_Link_243825422"></a><span style="">java  org.apache.xalan.xslt.Process  \
    -out myfile.fo  \
    -in myfile.xml  \
    -xsl docbook-xsl/fo/docbook.xsl  \
    -param use.extensions 1

</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1415243822"></a><span style="">fop</span>
<ul><li><a name="Freemind_Link_800915288"></a><span style="">参见</span>
<ul><li><a name="Freemind_Link_1572802523"></a><span style="">http://www-128.ibm.com/developerworks/cn/xml/x-xslfo/</span></li></ul>
<ul><li><a name="Freemind_Link_818474431"></a><span style="">参见: http://www.rocksun.net/wiki/Wiki.jsp?page=DocBook</span></li></ul>
<ul><li><a name="Freemind_Link_1650388825"></a><span style="">http://www.xmlmind.com/foconverter/install.html</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1944290747"></a><span style="">下载</span>
<ul><li><a name="Freemind_Link_885092210"></a><span style="">jai</span>
<ul><li><a name="Freemind_Link_433734695"></a><span style="">also needed to download JAI in order to get picture insertion working</span></li></ul>
<ul><li><a name="Freemind_Link_1768492676"></a><span style="">http://java.sun.com/products/java-media/jai/</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_94163018"></a><span style="">fop</span>
<ul><li><a name="Freemind_Link_1801829181"></a><span style="">http://xml.apache.org/fop/</span></li></ul>
<ul><li><a name="Freemind_Link_291154546"></a><span style="">版本</span>
<ul><li><a name="Freemind_Link_51070962"></a><span style="">0.20.5</span></li></ul>
<ul><li><a name="Freemind_Link_1444266105"></a><span style="">0.90alpha</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_248686216"></a><span style="">安装配置 0.20.5</span>
<ul><li><a name="Freemind_Link_1168493871"></a><span style="">FOP 0.20.5 不支持 png 等图形格式，需要安装 JAI</span></li></ul>
<ul><li><a name="Freemind_Link_1356210090"></a><span style="">JAI 安装后，只需要将 jai_core.jar 和 jai_codec.jar 两个文件拷贝到 FOP 0.20.5 子目录中</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_92088147"></a><span style="">命令行（批处理）</span>
<ul><li><a name="Freemind_Link_105500075"></a><span style="">参见:</span>
<ul><li><a name="Freemind_Link_571983862"></a><span style="">http://xml.apache.org/fop/running.html</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1904520968"></a><span style="">xsltproc 生成 *.fo 文件</span>
<ul><li><a name="Freemind_Link_1059243883"></a><span style="">设置 fop.extensions 参数为 1，生成 XSL-FO 格式的输出</span>

</li></ul>
<ul><li><a name="Freemind_Link_49969703"></a><span style="">命令</span>
<ul><li><a name="Freemind_Link_1948878650"></a><span style="">xsltproc  \
    --output myfile.fo  
    --stringparam fop.extensions 1  \
    docbook-xsl/fo/docbook.xsl  \
    myfile.xml</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_230867681"></a><span style="">Convert a .fo file on Unix or Linux:
</span>
<ul><li><a name="Freemind_Link_1522662986"></a><span style="">fop.sh -fo myfile.fo -pdf myfile.pdf

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1710334298"></a><span style="">Convert an XML source file Unix or Linux:
</span>
<ul><li><a name="Freemind_Link_1189182883"></a><span style="">fop.sh -xsl /docbook-xsl/fo/docbook.xsl -xml myfile.xml -pdf myfile.pdf

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1470600907"></a><span style="">Convert a .fo file on Windows:
</span>
<ul><li><a name="Freemind_Link_882378889"></a><span style="">fop.bat -fo myfile.fo -pdf myfile.pdf

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_769799273"></a><span style="">Convert an XML source file on Windows:
</span>
<ul><li><a name="Freemind_Link_1107432910"></a><span style="">fop.bat -xsl /docbook-xsl/fo/docbook.xsl -xml myfile.xml -pdf myfile.pdf
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_237017741"></a><span style="">命令行</span>
<ul><li><a name="Freemind_Link_876049562"></a><span style="">Setting CLASSPATH:</span>
<ul><li><a name="Freemind_Link_1181304357"></a><span style="">CLASSPATH="/usr/java/fop-0.20.5/build/fop.jar:\
/usr/java/fop-0.20.5/lib/batik.jar:\
/usr/java/fop-0.20.5/xalan-version.jar:\
/usr/java/fop-0.20.5/lib/xercesImpl-version.jar:\
/usr/java/fop-0.20.5/lib/JimiProClasses.jar\
/usr/java/avalon-framework-cvs-version.jar" 
export CLASSPATH</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_473387290"></a><span style="">General syntax:
</span>
<ul><li><a name="Freemind_Link_711918104"></a><span style="">java  org.apache.fop.apps.Fop  [options]  \
    [-fo|-xml] infile  \
    [-xsl stylesheet-path]   \
    -pdf  outfile.pdf

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1885551986"></a><span style="">Convert a .fo file to pdf:
</span>
<ul><li><a name="Freemind_Link_152927053"></a><span style=""> java  org.apache.fop.apps.Fop  \
    -fo  myfile.fo  \
    -pdf myfile.pdf 

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_373786270"></a><span style="">Convert an XML source file directly to pdf:</span>
<ul><li><a name="Freemind_Link_1367160161"></a><span style="">java  org.apache.fop.apps.Fop  \
    -xml myfile.xml  \
    -xsl docbook-xsl/fo/docbook.xsl  \
    -pdf myfile.pdf
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_262474088"></a><span style="">FOP 内存溢出问题</span>
<ul><li><a name="Freemind_Link_975664809"></a><span style="">这是由于为 JAVA 分配的内存不足引起的</span>
<ul><li><a name="Freemind_Link_1755362901"></a><span style="">为 java 命令加上参数 -Xmx128m ，可以分配 128M 内存</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1724194497"></a><span style="">可以修改 fop 批处理文件</span>
<ul><li><a name="Freemind_Link_1912964687"></a><span style="">&lt;html&gt;java &lt;b&gt;-Xmx128m&lt;/b&gt; -cp "%LOCALCLASSPATH%" org.apache.fop.apps.Fop %1 %2 \
&lt;br&gt;    %3 %4 %5 %6 %7 %8</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_161203480"></a><span style="">中文支持问题</span>
<ul><li><a name="Freemind_Link_342141232"></a><span style="">参见: http://www.rocksun.net/wiki/Wiki.jsp?page=DocBook</span></li></ul>
<ul><li><a name="Freemind_Link_1327420117"></a><span style="">xsl 定制</span>
<ul><li><a name="Freemind_Link_552067632"></a><span style="">&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version='1.0'&gt;

  &lt;xsl:import href="C:/docbook/docbook-xsl-1.68.1/fo/docbook.xsl"/&gt;

  &lt;xsl:param name="fop.extensions" select="1" /&gt;
  &lt;xsl:param name="variablelist.as.blocks" select="1" /&gt;

  &lt;xsl:param name="chunker.output.encoding" select="'utf-8'" /&gt; 
  &lt;xsl:param name="use.extensions" select="1" /&gt; 
  &lt;xsl:param name="l10n.gentext.language" select="'zh_cn'" /&gt; 
  &lt;xsl:param name="admon.graphics" select="1" /&gt; 

  &lt;!--xsl:param name="draft.watermark.image" select="images/draft.png"&gt;&lt;/xsl:param--&gt;
  
  &lt;xsl:param name="body.font.family"&gt;SimSun&lt;/xsl:param&gt;
  &lt;xsl:param name="title.font.family"&gt;SimSun&lt;/xsl:param&gt;
&lt;/xsl:stylesheet&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1920159611"></a><span style="">fop 配置，增加中文字体</span>
<ul><li><a name="Freemind_Link_1667489637"></a><span style="">我们需要userconfig.xml来改变编译FO到PDF的一些默认属性，因为我们需要中文字体，需要用ttfreader.cmd来生成字体文件，这里我已经生成了文件在fonts目录下。然后建立userconfig.xml文件</span></li></ul>
<ul><li><a name="Freemind_Link_106376750"></a><span style="">userconfig.xml</span>
<ul><li><a name="Freemind_Link_856857973"></a><span style="">&lt;!--&lt;!DOCTYPE configuration SYSTEM "config.dtd"&gt;--&gt;
&lt;!-- 
     this file contains templates which allow an user easy 
     configuration of Fop. Actually normally you don't need this configuration 
     file, but if you need to change configuration, you should
     always use this file and *not* config.xml. 
     Usage: java org.apache.fop.apps.Fop -c userconfig.xml -fo fo-file -pdf pdf-file
--&gt;


&lt;configuration&gt;

&lt;!--  
baseDir: normally the base directory is the directory where the fo file is 
         located. if you want to specify your own, uncomment this entry.
         This value can also be a URL. Actually, the value is converted to 
         a URL.
--&gt;
&lt;!-- 
  &lt;entry&gt;
    &lt;key&gt;baseDir&lt;/key&gt;
    &lt;value&gt;&lt;/value&gt;
  &lt;/entry&gt;
--&gt;

&lt;!--  
fontBaseDir: Similar to baseDir, except that this value is used for fonts. If
         it isn't specified, the value from baseDir is used.
--&gt;
&lt;!-- 
  &lt;entry&gt;
    &lt;key&gt;fontBaseDir&lt;/key&gt;
    &lt;value&gt;&lt;/value&gt;
  &lt;/entry&gt;
--&gt;

&lt;!--
************************************************************************
                        HYPHENATION 
************************************************************************
--&gt;
  
&lt;!--
   hyphenation directory 
   if you want to specify your own directory with hyphenation pattern
   then uncomment the next entry and add the directory name
--&gt;

&lt;!--
  &lt;entry&gt;
    &lt;key&gt;hyphenation-dir&lt;/key&gt;
    &lt;value&gt;/java/xml-fop/hyph&lt;/value&gt;
  &lt;/entry&gt;
--&gt;

&lt;!--
************************************************************************
  Add fonts here
************************************************************************
--&gt;

&lt;fonts&gt;
 &lt;!-- example --&gt;

 &lt;font metrics-file="fonts\simfang.xml" kerning="yes" embed-file="C:\WINDOWS\Fonts\simfang.ttf"&gt;
    &lt;font-triplet name="FangSong_GB2312" style="normal" weight="normal"/&gt;
 &lt;/font&gt;
 
 
 &lt;!--
 &lt;font metrics-file="arialb.xml" kerning="yes" embed-file="arialb.ttf"&gt;
    &lt;font-triplet name="Arial" style="normal" weight="bold"/&gt;
    &lt;font-triplet name="ArialMT" style="normal" weight="bold"/&gt;
 &lt;/font&gt;
 &lt;font metrics-file="ariali.xml" kerning="yes" embed-file="ariali.ttf"&gt;
    &lt;font-triplet name="Arial" style="italic" weight="normal"/&gt;
    &lt;font-triplet name="ArialMT" style="italic" weight="normal"/&gt;
 &lt;/font&gt;
 &lt;font metrics-file="arialbi.xml" kerning="yes" embed-file="arialbi.ttf"&gt;
    &lt;font-triplet name="Arial" style="italic" weight="bold"/&gt;
    &lt;font-triplet name="ArialMT" style="italic" weight="bold"/&gt;
 &lt;/font&gt;
 --&gt;

 &lt;font metrics-file="fonts\simsun.xml" embed-file="C:\windows\fonts\simsun.ttc" kerning="yes"&gt;
    &lt;font-triplet name="SimSun" style="normal" weight="normal"/&gt;
    &lt;font-triplet name="SimSun" style="normal" weight="bold"/&gt;
    &lt;font-triplet name="NSimSun" style="italic" weight="normal"/&gt;
    &lt;font-triplet name="NSimSun" style="italic" weight="bold"/&gt;
 &lt;/font&gt;
 &lt;!-- Example Japanese fonts
 &lt;font metrics-file="msmincho.xml" embed-file="Cyberbit.ttf" kerning="yes"&gt;
    &lt;font-triplet name="Mincho" style="normal" weight="normal"/&gt;
    &lt;font-triplet name="Mincho" style="normal" weight="bold"/&gt;
    &lt;font-triplet name="Mincho" style="italic" weight="normal"/&gt;
    &lt;font-triplet name="Mincho" style="italic" weight="bold"/&gt;
   &lt;/font&gt;
  --&gt;
&lt;/fonts&gt;


&lt;/configuration&gt; </span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1085542156"></a><span style="">xmlroff</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_686191579"></a><span style="">DocBook 元素参考</span>
<ul><li><a name="Freemind_Link_1633646611"></a><span style="">词汇修饰</span>
<ul><li><a name="Freemind_Link_1338445260"></a><span style="">文字修饰</span>
<ul><li><a name="Freemind_Link_585200365"></a><span style="">emphasis</span>
<ul><li><a name="Freemind_Link_1638531754"></a><span style="">字体强调</span></li></ul>
<ul><li><a name="Freemind_Link_1252432023"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_1850824708"></a><span style="">&lt;para&gt;
The &lt;emphasis&gt;most&lt;/emphasis&gt; important example of this
phenomenon occurs in A. Nonymous's book
&lt;citetitle&gt;Power Snacking&lt;/citetitle&gt;.
&lt;/para&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1540651603"></a><span style="">superscript</span>
<ul><li><a name="Freemind_Link_1574773505"></a><span style="">上标</span></li></ul>
<ul><li><a name="Freemind_Link_947537187"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_1355734229"></a><span style="">&lt;para&gt;
The equation e&lt;superscript&gt;&amp;pi;i&lt;/superscript&gt; + 1 = 0 ties together
five of the most important mathematical constants.
&lt;/para&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_479355822"></a><span style="">subscript</span>
<ul><li><a name="Freemind_Link_1424067763"></a><span style="">下标</span></li></ul>
<ul><li><a name="Freemind_Link_1834753255"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_258965737"></a><span style="">&lt;para&gt;
Thirsty?  Have some H&lt;subscript&gt;2&lt;/subscript&gt;O.
&lt;/para&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_883541509"></a><span style="">quote</span>
<ul><li><a name="Freemind_Link_1483191689"></a><span style="">引用文字，即将文字两端添加引号（或其它）扩起来。</span></li></ul>
<ul><li><a name="Freemind_Link_1044517361"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_364777113"></a><span style="">&lt;para&gt;
This software is provided &lt;quote&gt;as is&lt;/quote&gt;, without expressed
or implied warranty.
&lt;/para&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_857499019"></a><span style="">文字语意</span>
<ul><li><a name="Freemind_Link_1376130074"></a><span style="">abbrev</span>
<ul><li><a name="Freemind_Link_214591045"></a><span style="">指出句点结尾的缩写词汇</span>

</li></ul>
<ul><li><a name="Freemind_Link_124796743"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_596543388"></a><span style="">&lt;para&gt;The &lt;abbrev&gt;Assn.&lt;/abbrev&gt; of Computing Machinery would probably never
abbreviate “Association” like this.
&lt;/para&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_542532557"></a><span style="">acronym</span>
<ul><li><a name="Freemind_Link_1626403633"></a><span style="">指出大写首字母的词汇</span></li></ul>
<ul><li><a name="Freemind_Link_51294526"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_1677399657"></a><span style="">&lt;para&gt;
In the United States, &lt;acronym&gt;NASA&lt;/acronym&gt; stands for the 
National Aeronautics and Space Administration.
&lt;/para&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_821442696"></a><span style="">foreignphrase</span></li></ul>
<ul><li><a name="Freemind_Link_618117273"></a><span style="">phrase</span>
<ul><li><a name="Freemind_Link_565014041"></a><span style="">为文字增加属性</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_510723162"></a><span style="">wordasword</span>
<ul><li><a name="Freemind_Link_760777926"></a><span style="">所指仅为文字</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_893139863"></a><span style="">视窗对象</span>
<ul><li><a name="Freemind_Link_930731268"></a><span style="">accel</span>
<ul><li><a name="Freemind_Link_753062338"></a><span style="">定义快捷键</span></li></ul>
<ul><li><a name="Freemind_Link_1249219308"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_368461954"></a><span style="">&lt;para os="windows"&gt;You can exit most Windows applications by selecting
&lt;guimenuitem&gt;&lt;accel&gt;Q&lt;/accel&gt;uit&lt;/guimenuitem&gt; or
&lt;guimenuitem&gt;E&lt;accel&gt;x&lt;/accel&gt;it&lt;/guimenuitem&gt; from
the &lt;guimenu&gt;&lt;accel&gt;F&lt;/accel&gt;ile&lt;/guimenu&gt; menu.
&lt;/para&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_375798617"></a><span style="">其它类似元素：
guibutton, guiicon, guilabel, guimenu, guimenuitem, guisubmenu, keycap, keycode, keycombo, keysym, menuchoice, mousebutton, shortcut</span></li></ul>
<ul><li><a name="Freemind_Link_202015506"></a><span style="">guiicon</span>
<ul><li><a name="Freemind_Link_1468878523"></a><span style="">出现在 GUI 界面中的图形 icon</span></li></ul>
<ul><li><a name="Freemind_Link_1752162392"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_745387168"></a><span style="">&lt;para&gt;The exact text of the &lt;guilabel&gt;Legend&lt;/guilabel&gt; and other labels on the
graph is dependent upon the language of the current locale.  Likewise,
the text of the &lt;guibutton&gt;OK&lt;/guibutton&gt; button and other buttons may vary.
The &lt;guiicon&gt;&lt;inlinemediaobject&gt;
&lt;imageobject&gt;
&lt;imagedata fileref="figures/legend.png"/&gt;
&lt;/imageobject&gt;
&lt;/inlinemediaobject&gt;&lt;/guiicon&gt;
icon and the other icons on the left side of the display may be
configured by the local administrator, but they are not
generally expected to vary from locale to locale.
&lt;/para&gt;
</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_254390871"></a><span style="">定义</span>
<ul><li><span style="">database, filename, hardware, medialabel, productname.</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1208830047"></a><span style="">建立链接</span>
<ul><li><a name="Freemind_Link_975955812"></a><span style="">anchor</span>
<ul><li><a name="Freemind_Link_1373761279"></a><span style="">建立锚点</span></li></ul>
<ul><li><a name="Freemind_Link_211835733"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_732053595"></a><span style="">&lt;para&gt;
The anchor element&lt;anchor id="example.anchor.1"/&gt; is empty and contributes
nothing to the flow of the content in which it occurs.  It is only useful
as a target.
&lt;/para&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_430807535"></a><span style="">ulink</span>
<ul><li><a name="Freemind_Link_607109986"></a><span style="">指向 URL 的链接</span>
<ul><li><a name="Freemind_Link_421405518"></a><span style="">url 属性为链接地址</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1550300421"></a><span style="">打开链接的方式</span>
<ul><li><a name="Freemind_Link_949749033"></a><span style="">如果定义变量 $ulink.target， 则链接的属性 target 指向 $ulink.target</span></li></ul>
<ul><li><a name="Freemind_Link_31211387"></a><span style="">type 属性的定制</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_639518614"></a><span style="">链接文字</span>
<ul><li><a name="Freemind_Link_812920409"></a><span style="">如果是空元素，则 url 属性值作为链接文字</span></li></ul>
<ul><li><a name="Freemind_Link_935755385"></a><span style="">否则，元素内容为链接文字</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1929857002"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_1992941683"></a><span style="">&lt;para&gt;
For more information, see the O'Reilly catalog entry for
&lt;ulink url="http://www.ora.com/catalog/tex/"&gt;&lt;citetitle&gt;Making TeX
Work&lt;/citetitle&gt;&lt;/ulink&gt;.
&lt;/para&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1045156694"></a><span style="">link</span>
<ul><li><a name="Freemind_Link_1228370816"></a><span style="">如果 link 元素有内容，则不管其是否具有 endterm 属性，都是将元素内容作为热点文字，指向 linkend 指向的文档内部的某个链接；
</span></li></ul>
<ul><li><a name="Freemind_Link_1447183875"></a><span style="">如果 link 元素没有内容，并且具有 endterm 属性，将 endterm 指向的元素的值，拷贝到 link 处，并作为热点文字，指向 linkend 指向的文档内部的 endterm 指向的链接；
</span></li></ul>
<ul><li><a name="Freemind_Link_1631902068"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_784834996"></a><span style="">&lt;sect1&gt;&lt;title&gt;Examples of &lt;sgmltag&gt;Link&lt;/sgmltag&gt;&lt;/title&gt;

&lt;para&gt;
In this sentence &lt;link linkend='nextsect'&gt;this&lt;/link&gt; word is
hot and points to the following section.
&lt;/para&gt;

&lt;para&gt;
There is also a link to the section called
&lt;quote&gt;&lt;link linkend='nextsect' endterm="nextsect.title"/&gt;&lt;/quote&gt;
in this sentence.
&lt;/para&gt;

&lt;sect2 id='nextsect'&gt;&lt;title id='nextsect.title'&gt;A Subsection&lt;/title&gt;

&lt;para&gt;
This section only exists to be the target of a couple of links.
&lt;/para&gt;

&lt;/sect2&gt;
&lt;/sect1&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1757277203"></a><span style="">olink</span>
<ul><li><a name="Freemind_Link_583412023"></a><span style="">不直接指向目标</span>

</li></ul>
<ul><li><a name="Freemind_Link_774267848"></a><span style="">例如 website 中指向网页的链接</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_30954242"></a><span style="">xref</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_811690447"></a><span style="">图像</span>
<ul><li><a name="Freemind_Link_698131351"></a><span style="">mediaobjectco</span>
<ul><li><a name="Freemind_Link_1637936034"></a><span style="">A media object that contains callouts</span></li></ul>
<ul><li><a name="Freemind_Link_1548935132"></a><span style="">内容模型</span>
<ul><li><a name="Freemind_Link_1943900150"></a><span style="">mediaobjectco ::=
(objectinfo?,imageobjectco,
 (imageobjectco|textobject)*)</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_145926563"></a><span style="">inlinemediaobject</span>
<ul><li><a name="Freemind_Link_995938542"></a><span style="">inline 方式显示。可以组合对同一信息的各种可替换版本，如高分辨率图片、低分辨率图片、文本。打印输出优先选择高分辨率，网页版本可能二选一，文本输出选择文字版本。</span></li></ul>
<ul><li><a name="Freemind_Link_440906530"></a><span style="">内容模型</span>
<ul><li><a name="Freemind_Link_1146284616"></a><span style="">inlinemediaobject ::=
(objectinfo?,
 (videoobject|audioobject|imageobject|imageobjectco|textobject)+)</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1805105582"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_1609484282"></a><span style="">&lt;inlinemediaobject&gt;
&lt;imageobject&gt;
&lt;imagedata fileref="figures/emc2.png"/&gt;
&lt;/imageobject&gt;
&lt;textobject&gt;
&lt;phrase&gt;E=mc&lt;superscript&gt;2&lt;/superscript&gt;&lt;/phrase&gt;
&lt;/textobject&gt;
&lt;/inlinemediaobject&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_928721890"></a><span style="">mediaobject.</span>
<ul><li><a name="Freemind_Link_1616372266"></a><span style="">以 block 方式显示。可以组合对同一信息的各种可替换版本，如高分辨率图片、低分辨率图片、文本。打印输出优先选择高分辨率，网页版本可能二选一，文本输出选择文字版本。</span></li></ul>
<ul><li><a name="Freemind_Link_1298155195"></a><span style="">内容模型</span>
<ul><li><a name="Freemind_Link_756926248"></a><span style="">mediaobject ::=
(objectinfo?,
 (videoobject|audioobject|imageobject|imageobjectco|textobject)+,
 caption?)
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1106025967"></a><span style="">图片</span>
<ul><li><a name="Freemind_Link_15198862"></a><span style="">figure</span>
<ul><li><a name="Freemind_Link_702501705"></a><span style="">自动编号、带标题的图片</span></li></ul>
<ul><li><a name="Freemind_Link_1824193968"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_663900570"></a><span style="">&lt;figure&gt;&lt;title&gt;The Pythagorean Theorem Illustrated&lt;/title&gt;
&lt;mediaobject&gt;
  &lt;imageobject&gt;
    &lt;imagedata fileref="figures/pythag.png"/&gt;
  &lt;/imageobject&gt;
  &lt;textobject&gt;&lt;phrase&gt;An illustration of the Pythagorean Theorem&lt;/phrase&gt;&lt;/textobject&gt;
&lt;/mediaobject&gt;
&lt;/figure&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1763375172"></a><span style="">informalfigure</span>
<ul><li><a name="Freemind_Link_1097772028"></a><span style="">不带标题的 figure</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_835869812"></a><span style="">设置图像的 border 为 0</span>

<ul><li><a name="Freemind_Link_529077053"></a><span style="">使用 CSS</span>
<ul><li><a name="Freemind_Link_1484984150"></a><span style="">span.inlinemediaobject img {border: 0 ; } </span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1912965139"></a><span style="">表格</span>
<ul><li><a name="Freemind_Link_717811607"></a><span style="">table</span>
<ul><li><a name="Freemind_Link_727681864"></a><span style="">内容模型</span>
<ul><li><a name="Freemind_Link_1978599574"></a><span style="">table ::=
(((blockinfo?,
   (title,titleabbrev?),
   (indexterm)*,
   textobject*,
   (graphic+|mediaobject+|tgroup+))|
  (caption,
   (col*|colgroup*),
   thead?,tfoot?,
   (tbody+|tr+))))</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_797188888"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_689932720"></a><span style="">&lt;table frame='all'&gt;&lt;title&gt;Sample Table&lt;/title&gt;
&lt;tgroup cols='5' align='left' colsep='1' rowsep='1'&gt;
&lt;colspec colname='c1'/&gt;
&lt;colspec colname='c2'/&gt;
&lt;colspec colname='c3'/&gt;
&lt;colspec colnum='5' colname='c5'/&gt;
&lt;thead&gt;
&lt;row&gt;
  &lt;entry namest="c1" nameend="c2" align="center"&gt;Horizontal Span&lt;/entry&gt;
  &lt;entry&gt;a3&lt;/entry&gt;
  &lt;entry&gt;a4&lt;/entry&gt;
  &lt;entry&gt;a5&lt;/entry&gt;
&lt;/row&gt;
&lt;/thead&gt;
&lt;tfoot&gt;
&lt;row&gt;
  &lt;entry&gt;f1&lt;/entry&gt;
  &lt;entry&gt;f2&lt;/entry&gt;
  &lt;entry&gt;f3&lt;/entry&gt;
  &lt;entry&gt;f4&lt;/entry&gt;
  &lt;entry&gt;f5&lt;/entry&gt;
&lt;/row&gt;
&lt;/tfoot&gt;
&lt;tbody&gt;
&lt;row&gt;
  &lt;entry&gt;b1&lt;/entry&gt;
  &lt;entry&gt;b2&lt;/entry&gt;
  &lt;entry&gt;b3&lt;/entry&gt;
  &lt;entry&gt;b4&lt;/entry&gt;
  &lt;entry morerows='1' valign='middle'&gt;&lt;para&gt;  &lt;!-- Pernicous Mixed Content --&gt;
  Vertical Span&lt;/para&gt;&lt;/entry&gt;
&lt;/row&gt;
&lt;row&gt;
  &lt;entry&gt;c1&lt;/entry&gt;
  &lt;entry namest="c2" nameend="c3" align='center' morerows='1' valign='bottom'&gt;Span Both&lt;/entry&gt;
  &lt;entry&gt;c4&lt;/entry&gt;
&lt;/row&gt;
&lt;row&gt;
  &lt;entry&gt;d1&lt;/entry&gt;
  &lt;entry&gt;d4&lt;/entry&gt;
  &lt;entry&gt;d5&lt;/entry&gt;
&lt;/row&gt;
&lt;/tbody&gt;
&lt;/tgroup&gt;
&lt;/table&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1663765263"></a><span style="">informaltable</span>
<ul><li><a name="Freemind_Link_504825119"></a><span style="">不带标题的表格</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1689749554"></a><span style="">Example</span>
<ul><li><a name="Freemind_Link_1326100539"></a><span style="">example</span>
<ul><li><a name="Freemind_Link_1292818829"></a><span style="">带标题，以及自动编号</span></li></ul>
<ul><li><a name="Freemind_Link_1245570417"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_139686935"></a><span style="">&lt;example&gt;&lt;title&gt;A DSSSL Function&lt;/title&gt;
&lt;programlisting&gt;
(define (node-list-filter-by-gi nodelist gilist)
  ;; Returns the node-list that contains every element of the original
  ;; nodelist whose gi is in gilist
  (let loop ((result (empty-node-list)) (nl nodelist))
    (if (node-list-empty? nl)
	result
	(if (member (gi (node-list-first nl)) gilist)
	    (loop (node-list result (node-list-first nl)) 
		  (node-list-rest nl))
	    (loop result (node-list-rest nl))))))
&lt;/programlisting&gt;
&lt;/example&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_614803702"></a><span style="">informalexample</span>
<ul><li><a name="Freemind_Link_751766266"></a><span style="">不带标题的示例</span></li></ul>
<ul><li><a name="Freemind_Link_1208247393"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_1534709886"></a><span style="">&lt;informalexample&gt;
&lt;programlisting&gt;
sub print_content_model {
    my($self) = shift;
    local($_) = shift;
    local(*FILE) = shift;

    my(@cm) = $self-&gt;format_content_model2($_);
    foreach $_ (@cm) {
        print FILE $self-&gt;make_links($_, 1, 1), "\n";
    }
}
&lt;/programlisting&gt;
&lt;/informalexample&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_690627290"></a><span style="">qandaset </span>
<ul><li><a name="Freemind_Link_1737226760"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_429621344"></a><span style="">&lt;qandaset defaultlabel='qanda'&gt;
&lt;qandaentry&gt;
&lt;question&gt;
&lt;para&gt;
To be, or not to be?
&lt;/para&gt;
&lt;/question&gt;
&lt;answer&gt;
&lt;para&gt;
That is the question.
&lt;/para&gt;
&lt;/answer&gt;
&lt;/qandaentry&gt;
&lt;/qandaset&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1896489932"></a><a style="" href="#Freemind_Link_826790659">DocBook Website</a>

<ul><li><a name="Freemind_Link_1504756258"></a><span style="">概念</span>
<ul><li><a name="Freemind_Link_540275416"></a><span style="">由 XML 文件转换为网页</span></li></ul>
<ul><li><a name="Freemind_Link_1472410823"></a><span style="">Website XML 文件的根元素是 website, 是由部分 DocBook 元素和部分 website 元素构成</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1269629675"></a><span style="">website 的 DTD</span>
<ul><li><a name="Freemind_Link_810085205"></a><span style="">website.dtd</span>
<ul><li><a name="Freemind_Link_1695032404"></a><span style="">Simplified DocBook DTD 的子集，只有150 个元素</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_434252884"></a><span style="">website-full.dtd</span>
<ul><li><a name="Freemind_Link_125213680"></a><span style="">DocBook DTD 的子集，约有400 个元素</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1456462877"></a><span style="">layout.dtd</span>
<ul><li><a name="Freemind_Link_942665524"></a><span style="">用户创建 layout.xml 网站结构文件的 DTD</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_472722209"></a><span style="">autolayout.dtd</span>
<ul><li><a name="Freemind_Link_1742192917"></a><span style="">自动生成的 autolayout.xml 的 DTD</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1905117170"></a><span style="">与 DocBook 的区别</span>
<ul><li><a name="Freemind_Link_1754774322"></a><span style="">website 不能使用的元素： set, book, chapter, article, index</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1494879951"></a><span style="">在 catalog.xml 添加条目</span>
<ul><li><a name="Freemind_Link_1822024098"></a><span style="">    &lt;nextCatalog  catalog="website/2.6.0/catalog.xml" /&gt; 

    &lt;!-- 由于 website DTD 中用到了 4.4 版本的 DocBook DTD, 故有如下定义--&gt;
    &lt;rewriteSystem
        systemIdStartString="http://www.oasis-open.org/docbook/xml/4.4/"
        rewritePrefix="dtd/docbook-4.5/" /&gt;
    &lt;rewriteSystem
        systemIdStartString="http://docbook.org/xml/4.4/"
        rewritePrefix="dtd/docbook-4.5/" /&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1006894390"></a><span style="">layout.xml 文件</span>


<ul><li><a name="Freemind_Link_1076042201"></a><span style="">说明</span>
<ul><li><a name="Freemind_Link_1856800969"></a><span style="font-family:sansserif;font-size:12;">DTD</span>

<ul><li><a name="Freemind_Link_1188584552"></a><span style="font-family:sansserif;font-size:12;font-weight:bold;">&lt;!ELEMENT layout ((config|style|script|headlink|copyright)*, toc+, notoc*)&gt;
</span>

</li></ul>
<ul><li><a name="Freemind_Link_1370553421"></a><span style="">见 layout.dtd</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_726215215"></a><span style="">layout.xml 文件好似一个目录索引文件</span>
<ul><li><a name="Freemind_Link_21850901"></a><span style="">每一个 XML 文件对应于 layout.xml 中的一条 tocentry 记录</span></li></ul>
<ul><li><a name="Freemind_Link_215035476"></a><span style="">layout.xml 文件的目录条目
可以组成一个层次结构</span>
<ul><li><a name="Freemind_Link_87790642"></a><span style="">tocentry 元素可以嵌套，即可以包含子 tocentry 元素，从而构成一个层次结构</span></li></ul>
<ul><li><a name="Freemind_Link_706701070"></a><span style="">该层次结构对应于网页左侧的导航条</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_565189537"></a><span style="">layout.xml 将在样式表 autolayout.xsl 处理下，生成 autolayout.xml</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_5237270"></a><span style="">XML 前言</span>
<ul><li><a name="Freemind_Link_320929088"></a><span style="">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE layout PUBLIC "-//Norman Walsh//DTD Website Layout V2.5.0//EN"
       "http://docbook.sourceforge.net/release/website/2.5.0/layout.dtd"&gt; </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1520947122"></a><span style="">&lt;layout&gt; 根元素</span>
<ul><li><a name="Freemind_Link_1945988644"></a><span style="">&lt;layout&gt; </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_79737765"></a><span style="">顶级元素
(忠实拷贝)</span>
<ul><li><a name="Freemind_Link_1189710093"></a><span style="">config</span>
<ul><li><a name="Freemind_Link_961575254"></a><span style="font-family:sansserif;font-size:12;font-weight:bold;">&lt;!ELEMENT config EMPTY&gt;
&lt;!ATTLIST config
	param	CDATA	#REQUIRED
	value	CDATA	#REQUIRED
	altval	CDATA	#IMPLIED
&gt;</span>

</li></ul>
<ul><li><a name="Freemind_Link_932799826"></a><span style="">  &lt;config param="banner"     value="graphics/icons/iconhome.gif"
          altval="Banner"/&gt;

</span></li></ul>
<ul><li><a name="Freemind_Link_150668020"></a><span style="">&lt;config param='toc.expand.depth" value="number"/&gt; </span>
<ul><li><a name="Freemind_Link_519740674"></a><span style="">网页左侧导航条展开层次</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_813325078"></a><span style="">style</span>
<ul><li><a name="Freemind_Link_1303714994"></a><span style="font-family:sansserif;font-size:12;font-weight:bold;">&lt;!ELEMENT style (#PCDATA)&gt;
&lt;!ATTLIST style
	src	CDATA	#IMPLIED
	type	CDATA	#IMPLIED
&gt;</span>

</li></ul>
<ul><li><a name="Freemind_Link_326450686"></a><span style="">style 元素设定每个网页都要用的样式表。（可为多个）</span></li></ul>
<ul><li><a name="Freemind_Link_111185841"></a><span style="">&lt;style src="example.css" type="text/css"/&gt; </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1791136001"></a><span style="">script
</span>
<ul><li><a name="Freemind_Link_1419016128"></a><span style="font-family:sansserif;font-size:12;font-weight:bold;">&lt;!ELEMENT script (#PCDATA)&gt;
&lt;!ATTLIST script
	src	CDATA	#IMPLIED
	language	CDATA	#IMPLIED
	type	CDATA	#IMPLIED
&gt;</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_691701442"></a><span style="">headlink</span>
<ul><li><a name="Freemind_Link_1416754716"></a><span style="font-family:sansserif;font-size:12;font-weight:bold;">&lt;!ELEMENT headlink EMPTY&gt;
&lt;!ATTLIST headlink
	href	CDATA	#IMPLIED
	media	CDATA	#IMPLIED
	name	CDATA	#IMPLIED
	rel	CDATA	#IMPLIED
	rev	CDATA	#IMPLIED
	src	CDATA	#IMPLIED
	title	CDATA	#IMPLIED
	type	CDATA	#IMPLIED
&gt;
</span>

</li></ul>
<ul><li><a name="Freemind_Link_931863066"></a><span style="">&lt;headlink rel="icon" href="http://nwalsh.com/images/nwalsh-icon16.png" type="image/png"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1615523240"></a><span style="">copyright</span>
<ul><li><a name="Freemind_Link_1068842219"></a><span style="font-family:sansserif;font-size:12;font-weight:bold;">&lt;!ELEMENT copyright (year+, holder+)&gt;</span>

</li></ul>
<ul><li><a name="Freemind_Link_1331888682"></a><a style="" href="#Freemind_Link_939434536">copyright 元素将显示在每一个网页下面</a>

</li></ul>
<ul><li><a name="Freemind_Link_696941758"></a><span style="">如</span>
<ul><li><a name="Freemind_Link_1570973640"></a><span style="">  &lt;copyright&gt;  
    &lt;year&gt;1999-2001&lt;/year&gt;&lt;year&gt;2006&lt;/year&gt;
    &lt;holder role="http://nwalsh.com/~ndw/"&gt;Norman Walsh&lt;/holder&gt;
  &lt;/copyright&gt;
</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1035894436"></a><span style="">toc 元素</span>
<ul><li><a name="Freemind_Link_669522774"></a><span style="">说明</span>
<ul><li><a name="Freemind_Link_1585975227"></a><span style="">DTD</span>
<ul><li><a name="Freemind_Link_1362733497"></a><span style="font-family:sansserif;font-size:12;font-weight:bold;">&lt;!ELEMENT toc (tocentry*)&gt;
&lt;!ATTLIST toc
	page		CDATA	#REQUIRED
	dir		CDATA	#IMPLIED
	filename	CDATA	#IMPLIED
&gt;
</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_116395414"></a><span style="">toc 元素用于设定首页</span></li></ul>
<ul><li><a name="Freemind_Link_53841560"></a><span style="">虽然可以存在多个 toc，但是生成的多个主页及其子页面互相之间没有菜单上的关联，因而没有什么实际意义？</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_474935581"></a><span style="">多 toc 的问题</span>
<ul><li><a name="Freemind_Link_114305544"></a><span style="">最好只有一个 toc，因为如果存在多个 toc，可能会出现如下问题：</span></li></ul>
<ul><li><a name="Freemind_Link_1116868744"></a><span style="">如果存在多个 toc，则 notoc 生成的页面在选择主页面时，会出现问题；(autolayout.xsl)</span></li></ul>
<ul><li><a name="Freemind_Link_510005492"></a><span style="">如果存在多个 toc，则形如 &lt;xsl:if test="$autolayout/autolayout/toc[1]/@id = $id"&gt; 的语句存在问题；(tabular.xsl)</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1103628069"></a><span style="">属性</span>
<ul><li><a name="Freemind_Link_1942469187"></a><span style="">page 属性（必须）</span>
<ul><li><a name="Freemind_Link_519175494"></a><span style="">page 参数的值为首页对应的 xml 文件名；</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1447719053"></a><span style="">filename 属性</span>
<ul><li><a name="Freemind_Link_607953827"></a><span style="">filename 属性的值为转换之后的 html 文件名</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_250857967"></a><span style="">dir 属性</span>
<ul><li><a name="Freemind_Link_754940414"></a><span style="">网页生成的目录</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_976566350"></a><span style="">子元素</span>
<ul><li><a name="Freemind_Link_566327468"></a><a style="" href="#Freemind_Link_859914359">tocentry</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_509339227"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_886661366"></a><span style="font-family:sansserif;font-size:12;">&lt;toc     page="website.xml"      filename="index.html"&gt;</span>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_859914359"></a><span style="">tocentry 元素</span>
<ul><li><a name="Freemind_Link_1837184193"></a><span style="">说明</span>
<ul><li><a name="Freemind_Link_1477564137"></a><span style="">DTD</span>
<ul><li><a name="Freemind_Link_1949732709"></a><span style="font-family:sansserif;font-size:12;font-weight:bold;">&lt;!ELEMENT tocentry ((title|titleabbrev|summary)*, tocentry*)&gt;
&lt;!ATTLIST tocentry
	id		ID	#IMPLIED
	page		CDATA	#IMPLIED
	href		CDATA	#IMPLIED
	dir		CDATA	#IMPLIED
	filename	CDATA	#IMPLIED
	revisionflag	(added|changed)	#IMPLIED
	tocskip		(0|1)	"0"
&gt;</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_975523598"></a><span style="">定义首页下面的网页，tocentry 可以包含下一级的 tocentry，构成网页的层次结构</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1825683871"></a><span style="">page 型页面</span>
<ul><li><a name="Freemind_Link_917807602"></a><span style="">属性</span>
<ul><li><a name="Freemind_Link_602954986"></a><span style="">page 属性的值为 XML 文件名</span></li></ul>
<ul><li><a name="Freemind_Link_180110462"></a><span style="">filename 属性为转换之后的 HTML 文件名</span>
<ul><li><a name="Freemind_Link_802036078"></a><span style="">不要在 filename 中使用目录名，dir 属性是用来定义目录名的</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_31107921"></a><span style="">dir 属性是目录名</span>
<ul><li><a name="Freemind_Link_667648844"></a><span style="">如果 tocentry 嵌套，则 dir 目录也嵌套，除非指定绝对路径</span></li></ul>
<ul><li><a name="Freemind_Link_1247552983"></a><span style="">dir 使用绝对路径 "/"，是相对于 output-root 目录</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_792130194"></a><span style="">tocskip</span>
<ul><li><a name="Freemind_Link_694047820"></a><span style="">tocskip 一般用于包含子项的 tocentry 条目，若设置 tocskip，则该条目直接指向第一个子条目</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1489962708"></a><span style="">revisionflag</span>
<ul><li><a name="Freemind_Link_945610353"></a><span style="">"changed"</span>
<ul><li><a name="Freemind_Link_1785180141"></a><span style="">修改条目指示</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_476554561"></a><span style="">"add"</span>
<ul><li><a name="Freemind_Link_1576966549"></a><span style="">新增条目指示</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_183783595"></a><span style="">"deleted"</span>
<ul><li><a name="Freemind_Link_9179444"></a><span style="">删除条目指示</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1412409026"></a><span style="font-family:sansserif;font-size:12;">例如</span>

<ul><li><a name="Freemind_Link_706934760"></a><span style="font-family:sansserif;font-size:12;">&lt;tocentry page="wslayout.xml"  filename="layout.html"         revisionflag="changed"   dir="build"/&gt;  
&lt;tocentry page="building.xml"    filename="building.html"    tocskip='1'&gt;  

</span>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1316024855"></a><span style="">href 型页面</span>
<ul><li><a name="Freemind_Link_380464429"></a><span style="">属性</span>
<ul><li><a name="Freemind_Link_1755596429"></a><span style="">id 属性</span></li></ul>
<ul><li><a name="Freemind_Link_145869532"></a><span style="">href 属性</span></li></ul>
<ul><li><a name="Freemind_Link_122965122"></a><span style="">tocskip</span>
<ul><li><a name="Freemind_Link_1565508046"></a><a style="" href="#Freemind_Link_792130194">参见</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1527182746"></a><span style="">revisionflag</span>
<ul><li><a name="Freemind_Link_514243694"></a><a style="" href="#Freemind_Link_1489962708">参见</a>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1361791"></a><span style="">元素</span>
<ul><li><a name="Freemind_Link_1840102999"></a><span style="">title</span></li></ul>
<ul><li><span style="">titleabbrev</span></li></ul>
<ul><li><span style="">summary</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1718801694"></a><span style="font-family:sansserif;font-size:12;">例如</span>

<ul><li><a name="Freemind_Link_811506389"></a><span style="font-family:sansserif;font-size:12;">&lt;tocentry  id="worldhello.net"  href="http://www.worldhello.net/"  tocskip="0"&gt;
    &lt;title&gt;WorldHello.net&lt;/title&gt;
    &lt;titleabbrev&gt;WorldHello&lt;/titleabbrev&gt;
    &lt;summary&gt;Johnson's Homepage&lt;/summary&gt;
&lt;/tocentry&gt;
</span>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_698278800"></a><span style="">更多示例</span>
<ul><li><a name="Freemind_Link_1766453698"></a><span style="">  &lt;toc page="website.xml" 
       filename="index.html"&gt;  
    &lt;tocentry page="wslayout.xml" 
              revisionflag="changed" 
              filename="layout.html"/&gt;  
    &lt;tocentry page="olink.xml" 
              filename="linking.html"/&gt;
    &lt;tocentry page="custom.xml" 
              filename="custom.html"/&gt;
    &lt;tocentry page="building.xml" 
              filename="building.html" 
              tocskip='1'&gt;  
      &lt;tocentry page="build-make.xml" 
                filename="buildmake.html" 
                dir="build"/&gt;  
      &lt;tocentry page="build-ext.xml" 
                filename="buildext.html" 
                dir="build"/&gt;  
      &lt;tocentry page="build-textonly.xml" 
                filename="textonly.html" 
                dir="build"/&gt;
    &lt;/tocentry&gt;
    &lt;tocentry page="test2.xml" 
              filename="formtest.html"/&gt;
    ...

  &lt;/toc&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_630674967"></a><span style="">notoc 元素</span>
<ul><li><a name="Freemind_Link_119633503"></a><span style="">说明</span>
<ul><li><a name="Freemind_Link_533262955"></a><span style="">DTD</span>
<ul><li><a name="Freemind_Link_1524713640"></a><span style="font-family:sansserif;font-size:12;font-weight:bold;">&lt;!ELEMENT notoc EMPTY&gt;
&lt;!ATTLIST notoc
	page		CDATA	#REQUIRED
	dir		CDATA	#IMPLIED
	filename	CDATA	#IMPLIED
&gt;</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1987750769"></a><span style="">作为顶级元素存在，可以进行编译，但是不在导航条中生成链接</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1683000116"></a><span style="">问题</span>
<ul><li><a name="Freemind_Link_1068301042"></a><span style="">当有多个 toc 存在时，notoc 在选择主页时只会选择第一个 toc 作为其主页</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_899079457"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_272058567"></a><span style="">&lt;notoc page="sample1.xml" filename="sample1.html" dir="/samples"/&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1721752945"></a><span style="">webpage 网页</span>

<ul><li><a name="Freemind_Link_1197611937"></a><span style="">说明</span>
<ul><li><a name="Freemind_Link_1478063512"></a><span style="">DTD 参见 website.dtd 和 website-full.dtd</span>
<ul><li><a name="Freemind_Link_494093675"></a><span style="font-family:sansserif;font-size:12;font-weight:bold;">&lt;!ENTITY % webpage.mix "(config*, head, (%bookcomponent.content;),
                        appendix*, bibliography*)"&gt;</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1063501041"></a><span style="">一个 xml 文件将编译出对应的一个 html 文件，当然用不同的样式表，可以生成不同风格的多个网页</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_180037284"></a><span style="">XML 前言</span>
<ul><li><a name="Freemind_Link_178130757"></a><span style="">&lt;?xml version="1.0"?&gt;

&lt;!DOCTYPE webpage PUBLIC "-//Norman Walsh//DTD Website V2.5.0//EN" 
          "website.dtd" &gt;
或者
&lt;!DOCTYPE webpage PUBLIC "-//Norman Walsh//DTD Website Full V2.5.0//EN" 
          "website-full.dtd"&gt;

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1896676497"></a><span style="">&lt;webpage&gt; 根元素</span>
<ul><li><a name="Freemind_Link_819393607"></a><span style="">&lt;webpage id="home"&gt; </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_564073855"></a><span style="">可选的任意 config 元素</span>
<ul><li><a name="Freemind_Link_1156307906"></a><span style="">  &lt;config param="desc" value="The Test Home Page"/&gt; </span></li></ul>
<ul><li><a name="Freemind_Link_1452190104"></a><a style="" href="#Freemind_Link_1597425907"> &lt;config param="rcsdate" value="$Date$"/&gt;
</a>

</li></ul>
<ul><li><a name="Freemind_Link_445700873"></a><a style="" href="#Freemind_Link_1716101551">显示在首页下方中间的页面链接</a>

<ul><li><a name="Freemind_Link_1827275019"></a><span style="">  &lt;config param="footer" value="URL" altval="文字说明"/&gt; </span></li></ul>
<ul><li><a name="Freemind_Link_1027087175"></a><span style="">或  &lt;config param="footerlink" value="page_id" altval="文字说明"/&gt; </span></li></ul>
<ul><li><a name="Freemind_Link_827238621"></a><span style="">还可以定义在 autolayout.xml 中。</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_254936265"></a><a style="" href="#Freemind_Link_1503567503">页面反馈（feedback）</a>

<ul><li><a name="Freemind_Link_588541529"></a><span style="">  &lt;config param="feedback.href" value="URL"/&gt; </span></li></ul>
<ul><li><a name="Freemind_Link_890200723"></a><span style="">参数 &lt;xsl:param name="feedback.with.ids" select="0"/&gt;</span>
<ul><li><a name="Freemind_Link_1935628716"></a><span style="">是否将网页 ID 加在 feedback URL 后面</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1907389224"></a><span style="">参数 &lt;xsl:param name="feedback.link.text"&gt;Feedback&lt;/xsl:param&gt;</span>
<ul><li><a name="Freemind_Link_1414440792"></a><span style="">feedback 链接的文字</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_74498838"></a><span style="">head 部分</span>
<ul><li><a name="Freemind_Link_502432056"></a><span style="">title 元素</span>
<ul><li><a name="Freemind_Link_299432491"></a><span style="">既作为导航条页面名称，也作为网页页面名称</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1109496178"></a><span style="">titleabbrev</span></li></ul>
<ul><li><a name="Freemind_Link_486070946"></a><span style="">summary</span></li></ul>
<ul><li><a name="Freemind_Link_200730576"></a><span style="">keywords</span></li></ul>
<ul><li><a name="Freemind_Link_821538341"></a><span style="">copyright 元素（可选）</span>

<ul><li><a name="Freemind_Link_419676817"></a><a style="" href="#Freemind_Link_419676817">优先级高于 layout.xml 的 copyright 元素</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1703790863"></a><span style="">如</span>
<ul><li><a name="Freemind_Link_1568900116"></a><span style="">  &lt;head&gt; 
    &lt;title&gt;Welcome to Website&lt;/title&gt;  
    &lt;summary&gt;Introduction&lt;/summary&gt;  
    &lt;keywords&gt;Norman Walsh, DSSSL, SGML, XML, DocBook, Website&lt;/keywords&gt;
  &lt;/head&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1717293805"></a><span style="">DocBook 元素构成网页的主体</span>
<ul><li><a name="Freemind_Link_1825262635"></a><span style="">&lt;para&gt;This small, somewhat contrived website demonstrates the  
Website document type. Website provides a system for building static
Websites from XML content.&lt;/para&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_665148701"></a><span style="">即需即编：两种编译方式</span>
<ul><li><a name="Freemind_Link_549980263"></a><span style="">XSLT编译方式</span>
<ul><li><a name="Freemind_Link_1101243908"></a><span style="">使用 xsltproc，每次编译所有的网页都要重新生成，不能做到只生成改变的网页</span></li></ul>
<ul><li><a name="Freemind_Link_801526575"></a><span style="">Saxon, Xalan 支持的 XSLT 扩展函数，可以做到只生成改变的网页</span></li></ul>
<ul><li><a name="Freemind_Link_557198817"></a><span style="">xslt 扩展</span>
<ul><li><a name="Freemind_Link_299693867"></a><span style="">website/extensions/saxon653.jar</span></li></ul>
<ul><li><a name="Freemind_Link_299219164"></a><span style="">website/extensions/xalan25.jar</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1549229841"></a><span style="">可用样式表</span>
<ul><li><a name="Freemind_Link_1052708983"></a><span style="">chunk-tabular.xsl</span></li></ul>
<ul><li><a name="Freemind_Link_1110348737"></a><span style="">chunk-website.xsl</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_327965064"></a><span style="">Makefile 编译方式</span>
<ul><li><a name="Freemind_Link_1805736096"></a><span style="">和 XSLT 相比，更灵活</span></li></ul>
<ul><li><a name="Freemind_Link_1848604878"></a><span style="">网页创建流程</span>
<ul><li><a name="Freemind_Link_793620158"></a><span style="">1. 创建 Makefile</span></li></ul>
<ul><li><a name="Freemind_Link_971111745"></a><span style="">2. 生成空文件 depends.tabular</span></li></ul>
<ul><li><a name="Freemind_Link_906564661"></a><span style="">3. 执行 make depends</span>
<ul><li><a name="Freemind_Link_552982347"></a><span style="">先生成 autolayout.xml   文件</span>
<ul><li><a name="Freemind_Link_145147160"></a><span style="">autolayout.xml: layout.xml  
        xsltproc  --output  $@  $(STYLEDIR)/autolayout.xsl  $&lt;  
        make  depends
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_177571004"></a><span style="">再生成 depends.tabular 文件</span>
<ul><li><a name="Freemind_Link_1403783175"></a><span style="">depends: autolayout.xml  
        xsltproc  \
           --output  depends.tabular \
           --stringparam  output-root  htdocs  \
           $(STYLEDIR)/makefile-dep.xsl  \
           $&lt;
</span></li></ul>
<ul><li><a name="Freemind_Link_629023331"></a><span style="">makefile-dep.xsl 样式表作用于autolayout.xml  文件</span></li></ul>
<ul><li><a name="Freemind_Link_1706946569"></a><span style="">包含所有 HTML 依赖性定义。其格式为：</span>
<ul><li><a name="Freemind_Link_770014479"></a><span style="">html/productlist.html:  products.xml
... ...</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_948199634"></a><span style="">4. make</span>
<ul><li><a name="Freemind_Link_1817110589"></a><span style=""> make website</span>
<ul><li><a name="Freemind_Link_727186347"></a><span style="">website 作为 make 的 target，参见 depends.tabular 文件</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_416821932"></a><span style="">以后每次修改 layout.xml 或者网页 XML，
只执行本命令即可。即需即编</span>
<ul><li><a name="Freemind_Link_1968055853"></a><span style="">%.html: autolayout.xml  
        xsltproc \
           --output  $@ \
           --stringparam autolayout-file autolayout.xml \
           --stringparam  output-root  htdocs  \
           $(STYLEDIR)/tabular.xsl \  
           $(filter-out autolayout.xml,$^)
</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_306792103"></a><span style="">可用样式表</span>
<ul><li><a name="Freemind_Link_1085248354"></a><span style="">tabular.xsl</span></li></ul>
<ul><li><a name="Freemind_Link_1143134652"></a><span style="">website.xsl</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1789853150"></a><a style="" href="#Freemind_Link_1294940428">示例参见：</a>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_196061956"></a><span style="">网页之间的链接: olink</span>
<ul><li><a name="Freemind_Link_700523079"></a><span style="">由于网页来自不同 XML，因此不能用 xref 和 link </span></li></ul>
<ul><li><a name="Freemind_Link_1968131724"></a><span style="">应该使用 olink</span>
<ul><li><a name="Freemind_Link_1002892594"></a><span style="">olink 有两个参数，一个定位文档，另外一个参数定位文档中的位置</span></li></ul>
<ul><li><a name="Freemind_Link_1103753973"></a><span style="">例如: &lt;olink targetdoc="home" targetptr="whatsnew"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_975647950"></a><span style="">targetdoc 的值是目标文档的 website 根元素的 id 属性</span></li></ul>
<ul><li><a name="Freemind_Link_1461090777"></a><span style="">targetptr 的值是文档内部的 id 值，如果定位到文档头部，该值也可以和 targetdoc 一样</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1257742471"></a><span style="">website.database.document </span>
<ul><li><a name="Freemind_Link_453192493"></a><span style="">如果 olink 元素有内容，则作为链接的文字</span></li></ul>
<ul><li><a name="Freemind_Link_1475745403"></a><span style="">如果 olink 元素为空元素，则需要依靠生成的 database 文件</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_37746966"></a><span style="">两种编译方式</span>
<ul><li><a name="Freemind_Link_82601568"></a><span style="">XSLT 编译</span>
<ul><li><a name="Freemind_Link_614371279"></a><span style="">&lt;html&gt;
如：&lt;br&gt;
xsltproc \&lt;br&gt;
    &lt;b&gt;--stringparam  collect.xref.targets yes &lt;/b&gt;\&lt;br&gt;
    --stringparam  output-root  htdocs \&lt;br&gt;
    ../website/xsl/chunk-tabular.xsl  \&lt;br&gt;
    autolayout.xml
</span></li></ul>
<ul><li><a name="Freemind_Link_1468393524"></a><span style="">会生成文件 : website.database.xml </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1348969271"></a><span style="">Makefile 编译</span>
<ul><li><a name="Freemind_Link_1520479899"></a><a style="" href="#Freemind_Link_1848604878">增加了一个步骤</a>

</li></ul>
<ul><li><a name="Freemind_Link_595429463"></a><span style="">步骤3之后，增加了使用样式表 website-targets.xsl  创建 website.database.xml 文件</span>
<ul><li><a name="Freemind_Link_636397171"></a><span style="">website.database.xml:  autolayout.xml
        $(PROC) \
        --output $@ \
       website-targets.xsl  $&lt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1526147818"></a><span style="">xslt 编译过程增加一个参数</span>
<ul><li><a name="Freemind_Link_538563780"></a><span style="">&lt;html&gt;
%.html: autolayout.xml&lt;br&gt;
        $(PROC) \&lt;br&gt;
        --output $@  \&lt;br&gt;
        &lt;b&gt;--stringparam  website.database.document website.database.xml &lt;/b&gt;\&lt;br&gt;
        --stringparam  output-root  htdocs \&lt;br&gt;
        tabular.xsl  \&lt;br&gt;
        $(filter-out autolayout.xml,$^)
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1294940428"></a><span style="">Makefile 示例</span>
<ul><li><a name="Freemind_Link_1396981136"></a><span style="">PROC = XML_CATALOG_FILES=/docbook/src/catalog.xml  xsltproc --nonet
XSLPATH = /docbook/src/xsl/docbook-xsl-1.69.1/website
all:
	make website

include depends.tabular

autolayout.xml:  layout.xml
	$(PROC) \
	--output  $@ \
	$(XSLPATH)/autolayout.xsl  $&lt;

	make depends

depends:  autolayout.xml
	$(PROC) \
	--output depends.tabular \
	--stringparam  output-root  htdocs  \
	$(XSLPATH)/makefile-dep.xsl  $&lt;


website.database.xml:  autolayout.xml
	$(PROC) \
	--output $@ \
	$(XSLPATH)/website-targets.xsl  $&lt;

%.html: autolayout.xml
	$(PROC) \
	--output $@  \
	--stringparam  website.database.document website.database.xml \
	--stringparam  output-root  htdocs \
	$(XSLPATH)/tabular.xsl  \
	$(filter-out autolayout.xml,$^)

</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1070596236"></a><span style="">链接到其它网站</span>
<ul><li><a name="Freemind_Link_1456321264"></a><span style="">tocentry 可以定义除了网页之外，还可以直接定义 URL</span>
<ul><li><a name="Freemind_Link_1014902327"></a><span style="">如指向外部 URL</span>
<ul><li><a name="Freemind_Link_1612532274"></a><span style="">&lt;tocentry  id="nwalsh.com"  href="http://nwalsh com"&gt;
  &lt;title&gt;Norm Walsh's Website&lt;/title&gt;
&lt;/tocentry&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_647398108"></a><span style="">指向本地其它页面的 URL</span>
<ul><li><a name="Freemind_Link_195850868"></a><span style="">&lt;tocentry  id="mybook"  href="../mybook/index.html"&gt;
  &lt;title&gt;My Book&lt;/title&gt;
&lt;/tocentry&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1063322314"></a><span style="">ulink</span></li></ul>
<ul><li><a name="Freemind_Link_1005396660"></a><span style="">olink</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_372726044"></a><a style="" href="#Freemind_Link_647398108">增加非 website 网页</a>

</li></ul>
<ul><li><a name="Freemind_Link_257803915"></a><span style="">website CSS</span>
<ul><li><a name="Freemind_Link_588571149"></a><span style="">两种方式定义</span>
<ul><li><a name="Freemind_Link_1252314715"></a><span style="">html.stylesheet 定义，缺点是 css 路径是绝对路径</span></li></ul>
<ul><li><a name="Freemind_Link_1123585924"></a><span style="">另外一个方法，是在 layout.xml 中定义。好处是生成的 HTML 网页使用相对路径引用 CSS</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1162793875"></a><span style="">例如</span>
<ul><li><a name="Freemind_Link_898991618"></a><span style="">&lt;style src="mystyle.css" type="text/css"/&gt;
&lt;toc&gt;
  &lt;tocentry ...&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1773012520"></a><span style="">website 定制</span>
<ul><li><a name="Freemind_Link_1770277462"></a><a style="" href="#Freemind_Link_1886224921">参见</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1044192578"></a><span style="">参考网站</span>
<ul><li><a name="Freemind_Link_1139046911"></a><span style="">google search plugin</span>
<ul><li><a name="Freemind_Link_1995717663"></a><span style="">http://www.schuerig.de/michael/about.html</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_601906671"></a><span style="">http://gpl-violations.org/about-website.html</span>
<ul><li><a name="Freemind_Link_543836040"></a><span style="">http://gpl-violations.org/about-website.html</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1908063213"></a><span style="">http://www.netfilter.org/about-website.html</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_192224355"></a><span style="">DocBook slide</span></li></ul>
<ul><li><a name="Freemind_Link_30890183"></a><span style="">DocBook XSL 解密</span>
<ul><li><a name="Freemind_Link_826790659"></a><span style="">website</span>
<ul><li><a name="Freemind_Link_167144555"></a><span style="">首先明确一点 website 并非独立存在的，他依赖 DocBook 的 XSL</span>
<ul><li><a name="Freemind_Link_1223581548"></a><span style="">除了解决对 DocBook 的元素进行格式化外</span></li></ul>
<ul><li><a name="Freemind_Link_973550802"></a><span style="">还利用 DocBook XSL 中 common/, html/ 中的文件，如 l10n.xsl，</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1913898646"></a><span style="">autolayout.xsl</span>


<ul><li><a name="Freemind_Link_1345392956"></a><a style="" href="#Freemind_Link_1679186827">功能：作用于 layout.xml 文件，生成 autolayout.xml 文件</a>

</li></ul>
<ul><li><a name="Freemind_Link_590729678"></a><span style="">模板 &lt;xsl:template match="style|script|headlink|copyright|config"&gt;</span>

<ul><li><a name="Freemind_Link_204612120"></a><span style="">&lt;xsl:template match="style|script|headlink|copyright|config"&gt;
  &lt;xsl:apply-templates select="." mode="copy"/&gt;
&lt;/xsl:template&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1910795596"></a><a style="" href="#Freemind_Link_424530004">模板 &lt;xsl:template match="toc"&gt;</a>


</li></ul>
<ul><li><a name="Freemind_Link_424530004"></a><span style="">模板 tocentry</span>

<ul><li><a name="Freemind_Link_468720498"></a><a style="" href="#Freemind_Link_1034048307">如果有属性 href，调用模板 tocentry.href</a>

</li></ul>
<ul><li><a name="Freemind_Link_1189435223"></a><a style="" href="#Freemind_Link_964670707">否则，调用模板 tocentry.page</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_964670707"></a><span style="">模板 tocentry.page</span>

<ul><li><a name="Freemind_Link_940799790"></a><span style="">读取 page 属性指向的 XML 文件，读入 $page 变量</span></li></ul>
<ul><li><a name="Freemind_Link_929178618"></a><span style="">属性</span>
<ul><li><a name="Freemind_Link_1333555075"></a><span style="">page 属性</span></li></ul>
<ul><li><a name="Freemind_Link_251751694"></a><span style="">id 属性</span>
<ul><li><a name="Freemind_Link_374838937"></a><span style="">page 页的第一个元素 (website元素) 必须具备 id 属性</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1755277061"></a><span style="">dir 属性</span>
<ul><li><a name="Freemind_Link_1333743818"></a><span style="">dir 属性为该页目录，目录可以是相对于上一级 tocentry 的目录！或者是绝对目录</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1853431583"></a><span style="">filename 属性</span>
<ul><li><a name="Freemind_Link_1514257795"></a><span style="">filename 变量来自 filename 属性，或者 layout.xml 的 名为 default-filename config 元素，或者为 index.html</span>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1682393950"></a><span style="">元素</span>
<ul><li><a name="Freemind_Link_563141796"></a><span style="">元素 title|titleabbrev|summary 来自于 $page 页(webpage页)</span></li></ul>
<ul><li><a name="Freemind_Link_1105596554"></a><span style="">title</span></li></ul>
<ul><li><span style="">titleabbrev</span></li></ul>
<ul><li><span style="">summary</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1314053463"></a><a style="" href="#Freemind_Link_424530004">递归子 tocentry</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1034048307"></a><span style="">模板 tocentry.href</span>

<ul><li><a name="Freemind_Link_1978825401"></a><span style="">必须同时具备属性 href, id，且具备元素 title</span></li></ul>
<ul><li><a name="Freemind_Link_1390372895"></a><span style="">属性</span>
<ul><li><a name="Freemind_Link_653025410"></a><span style="">href</span></li></ul>
<ul><li><span style="">id</span></li></ul>
<ul><li><span style="">tocskip</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_859662173"></a><span style="">元素</span>
<ul><li><a name="Freemind_Link_1328933869"></a><span style="">元素 title|titleabbrev|summary 来自于 layout.xml 本身</span></li></ul>
<ul><li><a name="Freemind_Link_872318730"></a><span style="">title</span></li></ul>
<ul><li><span style="">titleabbrev</span></li></ul>
<ul><li><span style="">summary</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_872420826"></a><span style="">makefile-dep.xsl</span>


<ul><li><a name="Freemind_Link_592520884"></a><span style="">功能: 作用于 autolayout.xml 文件，生成 depends.tabular 和 depends.notabular 文件</span></li></ul>
<ul><li><a name="Freemind_Link_321729076"></a><span style="">全局属性</span>
<ul><li><a name="Freemind_Link_661517752"></a><span style="">如下属性最好是在命令行中提供，而不是在 XSL 定制层</span></li></ul>
<ul><li><a name="Freemind_Link_1152935060"></a><span style="">&lt;xsl:param name="add-website-depends" select="''"/&gt;</span>
<ul><li><a name="Freemind_Link_868640305"></a><span style="">用于为 website 目标添加附加的依赖</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_577160633"></a><span style="">&lt;xsl:param name="depends-file" select="''"/&gt;</span>
<ul><li><a name="Freemind_Link_720478360"></a><span style="">depends 文件名</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_49222967"></a><span style="">&lt;xsl:param name="output-root" select="''"/&gt;</span>
<ul><li><a name="Freemind_Link_1016486412"></a><span style="">输出路径</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_736912070"></a><span style="">&lt;xsl:param name="filename-prefix" select="''"/&gt;</span>
<ul><li><a name="Freemind_Link_1282781446"></a><span style="">生成 html 文件的前缀</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1397842663"></a><span style="">&lt;xsl:param name="remove-output-root" select="0"/&gt;</span>
<ul><li><a name="Freemind_Link_1192198145"></a><span style="">默认生成的 clean 目标，是删除每个生成的 HTML 文件</span></li></ul>
<ul><li><a name="Freemind_Link_1106155591"></a><span style="">如果设置 remove-output-root 为1，则删除整个 output-root</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_520261679"></a><span style="">模板 &lt;xsl:template match="autolayout"&gt;</span>

<ul><li><a name="Freemind_Link_485736537"></a><a style="" href="#Freemind_Link_1948169764">创建目标 website:</a>



</li></ul>
<ul><li><a name="Freemind_Link_205252538"></a><a style="" href="#Freemind_Link_1622548809">创建目标</a>


</li></ul>
<ul><li><a name="Freemind_Link_1408556352"></a><span style="">创建目标 distclean:</span>
<ul><li><a name="Freemind_Link_289889231"></a><a style="" href="#Freemind_Link_720478360">除 autolayout.xml website.database.xml 外，还有</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1668300187"></a><span style="">创建目标 clean:</span>
<ul><li><a name="Freemind_Link_500039931"></a><a style="" href="#Freemind_Link_1106155591">如果 $remove-output-root = 1</a>

</li></ul>
<ul><li><a name="Freemind_Link_527298148"></a><a style="" href="#Freemind_Link_1948169764">否则</a>


</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1948169764"></a><span style="">模板 &lt;xsl:template match="toc" mode="all"&gt;</span>

<ul><li><a name="Freemind_Link_1127879675"></a><span style="">获得空格分隔的目标文件名列表</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1716019826"></a><span style="">模板 &lt;xsl:template match="tocentry|notoc" mode="all"&gt;</span>

<ul><li><a name="Freemind_Link_1621903438"></a><span style="">获得空格分隔的目标文件名列表</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1417101060"></a><span style="">模板 &lt;xsl:template match="toc"&gt;</span>

<ul><li><a name="Freemind_Link_995233051"></a><span style="">生成诸如  index.html : index.xml 的依赖</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1622548809"></a><span style="">模板 &lt;xsl:template match="tocentry|notoc"&gt;</span>

<ul><li><a name="Freemind_Link_1328098914"></a><span style="">生成诸如  target.html : source.xml 的依赖</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_797091041"></a><a style="" href="#Freemind_Link_1630757755">website-targets.xsl</a>



<ul><li><a name="Freemind_Link_1416624658"></a><span style="">功能: 作用于 autolayout.xml 文件，生成 website.database.xml 文件</span></li></ul>
<ul><li><a name="Freemind_Link_421024078"></a><a style="" href="#Freemind_Link_1342037058">模板 &lt;xsl:template match="autolayout" mode="collect.targets"&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1630757755"></a><a style="" href="#Freemind_Link_1844001418">tabular.xsl</a>




<ul><li><a name="Freemind_Link_501724698"></a><span style="">说明: 创建带左侧导航条的网页</span></li></ul>
<ul><li><a name="Freemind_Link_57888750"></a><span style="">全局参数</span>
<ul><li><a name="Freemind_Link_1829440899"></a><span style="">以图标方式显示警告</span>
<ul><li><a name="Freemind_Link_968537952"></a><span style="">&lt;xsl:param name="admon.style" select="''"/&gt;
&lt;xsl:param name="admon.graphics" select="1"/&gt;
&lt;xsl:param name="admon.graphics.path"&gt;graphics/&lt;/xsl:param&gt;
&lt;xsl:param name="admon.graphics.extension"&gt;.gif&lt;/xsl:param&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_739166494"></a><span style="">左侧导航条背景色</span>
<ul><li><a name="Freemind_Link_1694410469"></a><span style="">/webpage/config[@param='navbgcolor']/@value</span></li></ul>
<ul><li><a name="Freemind_Link_1596180622"></a><span style="">或 $autolayout/autolayout/config[@param='navbgcolor']/@value</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1679186827"></a><span style="">&lt;xsl:param name="autolayout" select="document($autolayout-file, /*)"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_835891333"></a><span style="">模板 &lt;xsl:template match="webpage"&gt;</span>

<ul><li><a name="Freemind_Link_861166328"></a><span style="">网页 &lt;head&gt; 部分</span>
<ul><li><a name="Freemind_Link_214202610"></a><a style="" href="#Freemind_Link_113102746">&lt;xsl:apply-templates select="head" mode="head.mode"/&gt;</a>


</li></ul>
<ul><li><a name="Freemind_Link_1564387656"></a><span style="">&lt;xsl:apply-templates select="config" mode="head.mode"/&gt;</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1825830194"></a><span style="">&lt;xsl:call-template name="body.attributes"/&gt;</span>

<ul><li><a name="Freemind_Link_272933998"></a><span style="">html/docbook.xsl</span>

<ul><li><a name="Freemind_Link_1544795902"></a><span style="">定义样式
&lt;xsl:template name="body.attributes"&gt;
  &lt;xsl:attribute name="bgcolor"&gt;white&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="text"&gt;black&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="link"&gt;#0000FF&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="vlink"&gt;#840084&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="alink"&gt;#0000FF&lt;/xsl:attribute&gt;
&lt;/xsl:template&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_344002355"></a><span style="">广告栏</span>
<ul><li><a name="Freemind_Link_1123047972"></a><a style="font-family:sansserif;font-size:12;font-weight:bold;" href="#Freemind_Link_1549888859">&lt;xsl:call-template name="allpages.banner"/&gt;</a>



</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1439333062"></a><span style="">是首页么</span>
<ul><li><a name="Freemind_Link_1864602934"></a><span style="">首页</span>
<ul><li><a name="Freemind_Link_1580871658"></a><a style="" href="#Freemind_Link_1994223506">&lt;xsl:call-template name="home.navhead.cell"/&gt;</a>



</li></ul>
<ul><li><a name="Freemind_Link_325411993"></a><a style="font-family:sansserif;font-size:12;" href="#Freemind_Link_10743621">&lt;xsl:call-template name="home.navhead.upperright.cell"/&gt;</a>




</li></ul>
<ul><li><a name="Freemind_Link_1473801978"></a><span style="font-family:sansserif;font-size:12;">&lt;xsl:call-template name="home.navhead.separator"/&gt;</span>



</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_722352676"></a><span style="">非首页</span>
<ul><li><a name="Freemind_Link_659568814"></a><a style="font-family:sansserif;font-size:12;" href="#Freemind_Link_1986395351">&lt;xsl:apply-templates select="./head/title" mode="title.mode"/&gt;</a>




</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1806181560"></a><span style="">网页右侧主体页面</span>
<ul><li><a name="Freemind_Link_1561467798"></a><span style="">执行 DocBook 样式表</span>
<ul><li><a name="Freemind_Link_1661484276"></a><span style="">&lt;xsl:apply-templates select="child::node()[not(self::webpage)]"/&gt;</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_414633382"></a><span style="">脚注</span>
<ul><li><a name="Freemind_Link_1571277496"></a><a style="" href="#Freemind_Link_1701432066">&lt;xsl:call-template name="process.footnotes"/&gt;</a>


</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1775183356"></a><span style="">网页左侧导航条</span>
<ul><li><a name="Freemind_Link_706299800"></a><a style="" href="#Freemind_Link_108611449">&lt;xsl:apply-templates select="$toc"&gt;
    &lt;xsl:with-param name="pageid" select="@id"/&gt;
&lt;/xsl:apply-templates&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1323400767"></a><span style="">页脚</span>
<ul><li><a name="Freemind_Link_1527924669"></a><span style="">&lt;xsl:call-template name="webpage.table.footer"/&gt;</span>

<ul><li><a name="Freemind_Link_869659781"></a><a style="" href="#Freemind_Link_1988737907">空模板，参见</a>

</li></ul>
<ul><li><a name="Freemind_Link_246220023"></a><a style="" href="#Freemind_Link_431151231">定制，参见</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_343593217"></a><a style="" href="#Freemind_Link_782107220">&lt;xsl:call-template name="webpage.footer"/&gt;</a>


</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1994223506"></a><a style="" href="#Freemind_Link_1103106856">模板 home.navhead.cell</a>


</li></ul>
<ul><li><a name="Freemind_Link_1103106856"></a><span style="">模板 home.navhead</span>

</li></ul>
<ul><li><a name="Freemind_Link_10743621"></a><a style="" href="#Freemind_Link_834799634">模板 home.navhead.upperright.cell</a>


</li></ul>
<ul><li><a name="Freemind_Link_834799634"></a><span style="">模板 home.navhead.upperright</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1862308343"></a><span style="">toc-tabular.xsl</span>


<ul><li><a name="Freemind_Link_1363316817"></a><span style="">全局参数</span>
<ul><li><a name="Freemind_Link_1520275257"></a><span style="">revsionflag 的文字</span>
<ul><li><a name="Freemind_Link_1752398801"></a><span style="">&lt;xsl:param name="nav.text.revisionflag.added"&gt;New&lt;/xsl:param&gt;
&lt;xsl:param name="nav.text.revisionflag.changed"&gt;Changed&lt;/xsl:param&gt;
&lt;xsl:param name="nav.text.revisionflag.deleted"&gt;&lt;/xsl:param&gt;
&lt;xsl:param name="nav.text.revisionflag.off"&gt;&lt;/xsl:param&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1627070212"></a><span style="">图标样式</span>
<ul><li><a name="Freemind_Link_1307862422"></a><span style="">&lt;xsl:param name="nav.icon.style"&gt;triangle&lt;/xsl:param&gt;</span>
<ul><li><a name="Freemind_Link_1535911484"></a><span style="">可以选择:  folder, folder16, plusminus, triangle, arrow </span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1375972251"></a><span style="">图标文件路径</span>
<ul><li><span style="">&lt;xsl:param name="nav.icon.path"&gt;graphics/navicons/&lt;/xsl:param&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_63524556"></a><span style="">&lt;xsl:param name="nav.icon.extension"&gt;.gif&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_991801759"></a><span style="">导航条展开层次</span>
<ul><li><a name="Freemind_Link_1369880090"></a><span style="">&lt;xsl:param name="toc.expand.depth" select="1"/&gt; </span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_108611449"></a><span style="">模板: &lt;xsl:template match="toc"&gt;</span>
<ul><li><a name="Freemind_Link_980113655"></a><span style="">显示网页左侧导航条</span></li></ul>
<ul><li><a name="Freemind_Link_1490680273"></a><span style="">显示 logo</span>
<ul><li><a name="Freemind_Link_1704542373"></a><span style="">若首页</span>
<ul><li><a name="Freemind_Link_592324149"></a><span style="">显示图片 homebanner-tabular 作为 logo</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1603076724"></a><span style="">非首页</span>
<ul><li><a name="Freemind_Link_380242481"></a><span style="">显示图片 banner-tabular 作为 logo</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_608643116"></a><a style="" href="#Freemind_Link_733642744">&lt;xsl:apply-templates select="tocentry"&gt;</a>

<ul><li><a name="Freemind_Link_1147802234"></a><span style="">默认是 1</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_733642744"></a><span style="">模板: &lt;xsl:template match="tocentry"&gt;</span>
<ul><li><a name="Freemind_Link_519361040"></a><span style="">显示网页左侧导航条的内容</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1398895162"></a><span style="">模板 &lt;xsl:template name="insert.spacers"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_619384635"></a><span style="">模板 &lt;xsl:template name="toc-rel-path"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_847076920"></a><span style="">模板 &lt;xsl:template name="toc-directory-depth"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1425384140"></a><span style="">head.xsl</span>


<ul><li><a name="Freemind_Link_31665298"></a><span style="">功能: 输出 HTML 的 &lt;head&gt; 部分</span></li></ul>
<ul><li><a name="Freemind_Link_113102746"></a><span style="">模板 &lt;xsl:template match="head" mode="head.mode"&gt;</span>

<ul><li><a name="Freemind_Link_680368872"></a><span style="">生成网页的 head </span></li></ul>
<ul><li><a name="Freemind_Link_982542426"></a><span style="">添加 html.stylesheet 定义的样式表到 Head 中</span></li></ul>
<ul><li><a name="Freemind_Link_1720772087"></a><span style="">用户自定义模板 user.head.content 内容加入到模板中</span>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1844001418"></a><a style="" href="#Freemind_Link_1884820928">website-common.xsl</a>








<ul><li><a name="Freemind_Link_1549888859"></a><span style="">空模板 allpages.banner</span>

<ul><li><a name="Freemind_Link_876830184"></a><span style="">占位模板 &lt;xsl:template name="allpages.banner"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1988737907"></a><span style="">模板 webpage.table.footer
（website-common.xsl）</span>

<ul><li><a name="Freemind_Link_1755117921"></a><span style="">空模板</span>
<ul><li><a name="Freemind_Link_847885262"></a><span style="">&lt;xsl:template name="webpage.table.footer"/&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_782107220"></a><span style="">模板 webpage.footer
（website-common.xsl）</span>

<ul><li><a name="Freemind_Link_149986596"></a><span style="">$footer.hr</span>
<ul><li><a name="Freemind_Link_1946880817"></a><span style="">是否要在 footer 之前添加 &lt;hr/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1633153581"></a><span style="">第一行脚注</span>
<ul><li><a name="Freemind_Link_1597425907"></a><span style="">左栏显示 rcsdate，调用模板 rcsdate.format</span>
<ul><li><a name="Freemind_Link_733716648"></a><span style="">直接显示rcsdate的 value 属性。CSS 样式为 footdate</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1166856039"></a><span style="">中间栏</span>
<ul><li><a name="Freemind_Link_1018533260"></a><span style="">如果不是首页：</span>
<ul><li><a name="Freemind_Link_1258240891"></a><span style="">显示到主页的链接</span>
<ul><li><a name="Freemind_Link_1306088031"></a><span style="">&lt;xsl:call-template name="homeuri"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1347883652"></a><span style="">&lt;xsl:call-template name="gentext.nav.home"/&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1716101551"></a><span style="">显示预设置链接</span>
<ul><li><a name="Freemind_Link_1291340193"></a><span style="">  &lt;xsl:variable name="footers" select="$page/config[@param='footer']
                                       |$page/config[@param='footlink']
                                       |$autolayout/autolayout/config[@param='footer']
                                       |$autolayout/autolayout/config[@param='footlink']"/&gt;
</span></li></ul>
<ul><li><a name="Freemind_Link_776581670"></a><a style="" href="#Freemind_Link_1399633660">&lt;xsl:apply-templates select="$footers" mode="footer.link.mode"/&gt;</a>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1503567503"></a><span style="">右栏显示feedback</span>
<ul><li><a name="Freemind_Link_1449397850"></a><span style="">定义了 feedback.href 属性？</span>
<ul><li><a name="Freemind_Link_1994247165"></a><span style="">链接 href</span>
<ul><li><a name="Freemind_Link_712681015"></a><span style="">$feedback.with.id 为 1? 则将 page_id 加在 feedback.href 后面</span></li></ul>
<ul><li><a name="Freemind_Link_168695991"></a><span style="">否则只将 feedback.href 作为 feedback 的 URL</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_139390998"></a><span style="">链接文字</span>
<ul><li><a name="Freemind_Link_1928581851"></a><span style="">&lt;xsl:param name="feedback.link.text"&gt;Feedback&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_884877792"></a><span style="">第二行脚注</span>
<ul><li><a name="Freemind_Link_939434536"></a><span style="">右对齐显示 版权信息</span>
<ul><li><a name="Freemind_Link_192404550"></a><span style="">&lt;xsl:when test="head/copyright"&gt;
    &lt;xsl:apply-templates select="head/copyright" mode="footer.mode"/&gt;
&lt;/xsl:when&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1173272234"></a><span style="">第三行脚注</span>
<ul><li><a name="Freemind_Link_328534082"></a><span style="">如果定义 sequential.links  = 1</span>
<ul><li><a name="Freemind_Link_476427928"></a><span style="">则显示上一页，下一页，即顺序浏览网站</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1701432066"></a><span style="">模板 process.footnotes</span>

<ul><li><a name="Freemind_Link_1141874463"></a><span style="">html/footnote.xsl</span>

<ul><li><a name="Freemind_Link_1710232930"></a><span style="">&lt;xsl:template match="footnote" name="process.footnote" mode="process.footnote.mode"&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1399633660"></a><span style="">模板 &lt;xsl:template match="config" mode="footer.link.mode"&gt;</span>

<ul><li><a name="Freemind_Link_175364138"></a><span style="">param="footlink"</span>
<ul><li><a name="Freemind_Link_1629207989"></a><span style="">value 属性是 pageid，通过 tocentry 得到页面 URL，载用该 URL 和 altvar 属性创建链接</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_85539470"></a><span style="">否则直接用 value 属性当做 URL，创建链接</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1986395351"></a><span style="">模板 &lt;xsl:template match="head/title" mode="title.mode"&gt;</span>

<ul><li><a name="Freemind_Link_1252753244"></a><span style="">显示 &lt;h1&gt; 标题 &lt;/h1&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_155736542"></a><span style="">模板 root-rel-path</span>

<ul><li><a name="Freemind_Link_1117182143"></a><span style="">本页地址到主页空间的相对路径。如 ../../</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1342037058"></a><a style="" href="#Freemind_Link_388929719">模板 &lt;xsl:template match="toc|tocentry|notoc" mode="olink.mode"&gt;</a>


</li></ul>
<ul><li><a name="Freemind_Link_388929719"></a><span style="">模板 tocentry</span>

<ul><li><a name="Freemind_Link_1957514771"></a><span style="">生成
&lt;document  targetdoc="home" baseuri="index.html" dir=""&gt;
&lt;xsl:call-template name="div"/&gt;
&lt;/document&gt;</span>
<ul><li><a name="Freemind_Link_768192561"></a><span style="">呼叫模板 div，在文件 common/targets.xsl 中</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1884820928"></a><span style="">olink.xsl</span>


<ul><li><a name="Freemind_Link_1827448061"></a><span style="">功能: 跨文档的交叉引用</span></li></ul>
<ul><li><a name="Freemind_Link_1540811589"></a><span style="">&lt;xsl:template match="olink"&gt;</span>
<ul><li><a name="Freemind_Link_1027071872"></a><span style="">1. 传统的 olink</span>
<ul><li><a name="Freemind_Link_819846532"></a><span style="">属性 targetdoc，或属性 targetptr 不为空</span></li></ul>
<ul><li><a name="Freemind_Link_1993351590"></a><span style="">&lt;xsl:apply-imports/&gt; 调用其它优先级低的模板，即 DocBook html/xref.xsl 的模板</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1523051199"></a><a style="" href="#Freemind_Link_68005258">2. Website 更改过的 olink 语法</a>

<ul><li><a name="Freemind_Link_1560596149"></a><span style="">没有上述两个属性，而是具有属性 targetdocent</span></li></ul>
<ul><li><a name="Freemind_Link_1053910570"></a><span style="">Those other olink attributes are targetdocent, linkmode, and localinfo</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_68005258"></a><span style="">&lt;xsl:template name="olink-entity"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_297190690"></a><span style="">&lt;xsl:template name="select.target.database"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1027070020"></a><span style="">&lt;xsl:template name="make.olink.href"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_535115605"></a><span style="">param.xsl</span>


<ul><li><a name="Freemind_Link_1217058110"></a><span style="">功能：定义全局参数</span></li></ul>
<ul><li><a name="Freemind_Link_978886778"></a><span style="">是否显示 HR</span>
<ul><li><span style="">&lt;xsl:param name="header.hr" select="1"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="footer.hr" select="1"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_685309894"></a><span style="">feedback</span>
<ul><li><span style="">&lt;xsl:param name="feedback.href"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="feedback.with.ids" select="0"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="feedback.link.text"&gt;Feedback&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_518632058"></a><span style="">导航条</span>
<ul><li><span style="">&lt;xsl:param name="banner.before.navigation" select="1"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1610905835"></a><span style="">&lt;xsl:param name="nav.table.summary"&gt;Navigation&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="navtocwidth"&gt;220&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="navbodywidth"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="navbgcolor"&gt;#4080FF&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="textbgcolor"&gt;white&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="toc.spacer.graphic" select="1"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="toc.spacer.text"&gt;   &lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="toc.spacer.image"&gt;graphics/blank.gif&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="toc.pointer.graphic" select="1"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="toc.pointer.text"&gt; &amp;gt; &lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="toc.pointer.image"&gt;graphics/arrow.gif&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="toc.blank.graphic" select="1"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="toc.blank.text"&gt;   &lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="toc.blank.image"&gt;graphics/blank.gif&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_577378424"></a><span style="">首页</span>
<ul><li><span style="">&lt;xsl:param name="suppress.homepage.title" select="'1'"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_173289431"></a><span style="">是否显示上一页、下一页</span>
<ul><li><span style="">&lt;xsl:param name="sequential.links" select="'0'"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1655025097"></a><span style="">其它</span>
<ul><li><span style="">&lt;xsl:param name="currentpage.marker" select="'@'"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="dry-run" select="'0'"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="rebuild-all" select="'0'"/&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_233199782"></a><span style="">rss.xsl</span>


<ul><li><a name="Freemind_Link_374238939"></a><span style="">功能: 将 RSS 1.0 文件整合到 webpage 中</span></li></ul>
<ul><li><a name="Freemind_Link_227702405"></a><span style="">例如在 &lt;webpage&gt; 嵌入 &lt;rss feed&gt; 标签</span>
<ul><li><a name="Freemind_Link_34871811"></a><span style="">website/example/rss.xsl
&lt;webpage id="rss"&gt;
...
&lt;rss feed="http://nwalsh.com/rss/whatsnew.xml"/&gt;
...
&lt;/webpage&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_382685493"></a><span style="">xbel.xsl</span>


<ul><li><a name="Freemind_Link_1731184014"></a><span style="">功能: 将 xbel 书签整合到 webpage 中</span></li></ul>
<ul><li><a name="Freemind_Link_1367860852"></a><span style="">例如: </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_58573844"></a><span style="">toc.xsl</span>


<ul><li><a name="Freemind_Link_696852771"></a><span style="">功能: 显示非 tabluar 形式网页的顶部导航条</span></li></ul>
<ul><li><a name="Freemind_Link_635244178"></a><span style="">全局参数</span>
<ul><li><a name="Freemind_Link_1460566887"></a><span style="">&lt;xsl:param name="max.toc.width" select="7"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_884989476"></a><span style="">模板 &lt;xsl:template match="toc"&gt;</span>
<ul><li><a name="Freemind_Link_1417287394"></a><span style="">显示首页图标</span>
<ul><li><a name="Freemind_Link_561103202"></a><span style="">若首页</span>
<ul><li><a name="Freemind_Link_219294412"></a><span style="">显示 homebanner 图标</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1698817017"></a><span style="">非首页</span>
<ul><li><a name="Freemind_Link_793452218"></a><span style="">显示 banner 图标</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_572040191"></a><span style="">显示 “|” 作为链接分隔符</span></li></ul>
<ul><li><a name="Freemind_Link_882087460"></a><a style="" href="#Freemind_Link_808162133">&lt;xsl:call-template name="process-children"&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_808162133"></a><span style="">模板 &lt;xsl:template name="process-children"&gt;</span>
<ul><li><a name="Freemind_Link_757338874"></a><span style="">若首页</span>
<ul><li><a name="Freemind_Link_1074755613"></a><a style="" href="#Freemind_Link_1018127141">&lt;xsl:call-template name="process-toc-children"&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1623835501"></a><span style="">非首页</span>
<ul><li><a name="Freemind_Link_652517145"></a><a style="" href="#Freemind_Link_271673938">&lt;xsl:call-template name="process-tocentry-children"&gt;</a>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_271673938"></a><a style="" href="#Freemind_Link_281012620">模板 &lt;xsl:template name="process-tocentry-children"&gt;</a>


</li></ul>
<ul><li><a name="Freemind_Link_1018127141"></a><a style="" href="#Freemind_Link_281012620">模板 &lt;xsl:template name="process-toc-children"&gt;</a>

</li></ul>
<ul><li><a name="Freemind_Link_281012620"></a><span style="">模板 &lt;xsl:template match="tocentry"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_674145748"></a><a style="" href="#Freemind_Link_1844001418">website.xsl</a>




<ul><li><a name="Freemind_Link_686437910"></a><span style="">说明: 创建纯文本、无表格的网页</span></li></ul>
<ul><li><a name="Freemind_Link_1686683226"></a><span style="">可定制参数</span>
<ul><li><a name="Freemind_Link_126094664"></a><span style="">banner.before.navigation</span>
<ul><li><a name="Freemind_Link_146817339"></a><span style="">是否在页面导航的上方添加 banner</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_424034096"></a><span style="">模板 &lt;xsl:template match="webpage"&gt;</span>
<ul><li><a name="Freemind_Link_1660614345"></a><span style="">网页 &lt;head&gt; 部分</span>
<ul><li><a name="Freemind_Link_1858793416"></a><a style="" href="#Freemind_Link_113102746">&lt;xsl:apply-templates select="head" mode="head.mode"/&gt;</a>


</li></ul>
<ul><li><a name="Freemind_Link_723701070"></a><span style="">&lt;xsl:apply-templates select="config" mode="head.mode"/&gt;</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1250026718"></a><span style="">&lt;xsl:call-template name="body.attributes"/&gt;</span>

<ul><li><a name="Freemind_Link_1087740551"></a><span style="">html/docbook.xsl</span>

<ul><li><a name="Freemind_Link_704887511"></a><span style="">定义样式
&lt;xsl:template name="body.attributes"&gt;
  &lt;xsl:attribute name="bgcolor"&gt;white&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="text"&gt;black&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="link"&gt;#0000FF&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="vlink"&gt;#840084&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="alink"&gt;#0000FF&lt;/xsl:attribute&gt;
&lt;/xsl:template&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_790969596"></a><span style="">广告栏</span>
<ul><li><a name="Freemind_Link_966057882"></a><span style="">若定义 banner.before.navigation = 1，则在导航条上方显示 banner </span></li></ul>
<ul><li><a name="Freemind_Link_1414584038"></a><span style="">若定义 banner.before.navigation = 0，则在导航条下方显示 banner </span></li></ul>
<ul><li><a name="Freemind_Link_774914656"></a><a style="font-family:sansserif;font-size:12;font-weight:bold;" href="#Freemind_Link_1549888859">即调用 &lt;xsl:call-template name="allpages.banner"/&gt; 显示 banner</a>



</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1969046586"></a><span style="">网页顶部导航条</span>
<ul><li><a name="Freemind_Link_378579180"></a><a style="" href="#Freemind_Link_884989476">&lt;xsl:apply-templates select="$toc"&gt;
    &lt;xsl:with-param name="pageid" select="@id"/&gt;
&lt;/xsl:apply-templates&gt;</a>


</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_49184167"></a><span style="">页面标题</span>
<ul><li><a name="Freemind_Link_258182952"></a><span style="">&lt;xsl:apply-templates select="./head/title" mode="title.mode"/&gt;</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_766583487"></a><span style="">执行 DocBook 样式表</span>
<ul><li><a name="Freemind_Link_1200557914"></a><span style="">&lt;xsl:apply-templates select="child::node()[not(self::webpage)]"/&gt;</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_84394506"></a><span style="">脚注</span>
<ul><li><a name="Freemind_Link_294823704"></a><a style="" href="#Freemind_Link_1701432066">&lt;xsl:call-template name="process.footnotes"/&gt;</a>


</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1897228555"></a><span style="">页脚</span>
<ul><li><a name="Freemind_Link_586352162"></a><a style="" href="#Freemind_Link_782107220">&lt;xsl:call-template name="webpage.footer"/&gt;</a>


</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_64070663"></a><span style="">chunk-common.xsl</span>


<ul><li><a name="Freemind_Link_1469317216"></a><span style="">全局参数</span>
<ul><li><span style="">&lt;xsl:param name="output-root" select="'.'"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="dry-run" select="'0'"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="rebuild-all" select="'0'"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_286641677"></a><span style="">模板 &lt;xsl:template match="autolayout"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_653039681"></a><span style="">模板 &lt;xsl:template match="toc|tocentry|notoc" mode="make"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1561792264"></a><span style="">模板 &lt;xsl:template name="make.tocentry"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_612438637"></a><span style="">模板 &lt;xsl:template match="*" mode="calculate-dir"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_547387586"></a><span style="">模板 &lt;xsl:template match="autolayout" mode="collect.targets"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_120599807"></a><a style="" href="#Freemind_Link_1630757755">chunk-tabular.xsl</a>





</li></ul>
<ul><li><a name="Freemind_Link_1902082879"></a><a style="" href="#Freemind_Link_64070663">chunk-website.xsl</a>





</li></ul>
<ul><li><a name="Freemind_Link_1380568929"></a><span style="">DocBook XSL</span>
<ul><li><a name="Freemind_Link_1711408617"></a><span style="">html/docbook.xsl</span></li></ul>
<ul><li><a name="Freemind_Link_1747367830"></a><span style="">html/chunker.xsl</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1886224921"></a><span style="">OSX 定制</span>
<ul><li><a name="Freemind_Link_1599992256"></a><span style="">l10n/i18n</span>
<ul><li><a name="Freemind_Link_1652113792"></a><span style="">person_name</span></li></ul>
<ul><li><a name="Freemind_Link_1935310233"></a><span style="">待定</span>
<ul><li><a name="Freemind_Link_1504361262"></a><span style="">nav_home 起始页改为首页</span>
<ul><li><span style="">&lt;l:gentext key="nav-home" text="&amp;#39318;&amp;#39029;"/&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_673714663"></a><span style="">模板 template/layout.xml</span>
<ul><li><a name="Freemind_Link_603537700"></a><span style="">config</span>
<ul><li><a name="Freemind_Link_1793063559"></a><span style="">  &lt;config param="homebanner-tabular" value="/images/logo/homebanner.png"
	  altval="Home Banner"/&gt;
  &lt;config param="banner-tabular"     value="/images/logo/banner.png"
	  altval="Banner"/&gt;
  &lt;config param="homebanner" value="/images/logo/homebanner.png"
	  altval="Home Banner"/&gt;
  &lt;config param="banner"     value="/images/logo/iconhome.gif"
	  altval="Banner"/&gt;
  &lt;config param="navbgcolor" value="#4080FF"/&gt;
  &lt;config param="footer" value="http://www.worldhello.net" altval="FT:WorldHello"/&gt;
  &lt;config param="footlink" value="about" altval="FL:关于"/&gt;
  &lt;config param="feedback.href" value="webmaster@mysite.com"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_835016148"></a><span style="">copyright</span>
<ul><li><a name="Freemind_Link_1849056429"></a><span style="">  &lt;copyright&gt;
    &lt;year&gt;2002-2005&lt;/year&gt;
    &lt;holder role="http://www.worldhello.net/"&gt;WorldHello.net&lt;/holder&gt;
  &lt;/copyright&gt;
  &lt;copyright&gt;
    &lt;year&gt;2005-2006&lt;/year&gt;
    &lt;holder role="http://www.OpenSourceXpress.com/"&gt;群英汇&lt;/holder&gt;
  &lt;/copyright&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_290925487"></a><span style="">style</span>
<ul><li><a name="Freemind_Link_1338443624"></a><span style="">  &lt;style src="/inc/css/docbook.css" type="text/css"/&gt;
  &lt;style src="/inc/css/website.css" type="text/css"/&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_305401819"></a><span style="">模板 template/webpage.xml</span>
<ul><li><a name="Freemind_Link_1832159679"></a><span style="">config</span>
<ul><li><a name="Freemind_Link_103546710"></a><span style="">&lt;config param="rcsdate" value="$Date$"/&gt;
&lt;config param="navbgcolor" value="#4080FF"/&gt;
&lt;config param="footer" value="http://www.worldhello.net" altval="FT:WorldHello"/&gt;
&lt;config param="footlink" value="about" altval="FL:关于"/&gt;
&lt;config param="feedback.href" value="webmaster@mysite.com"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_304998867"></a><span style="">head</span>
<ul><li><a name="Freemind_Link_131664143"></a><span style="">&lt;head&gt;
&lt;title&gt;title... ...&lt;/title&gt;
&lt;titleabbrev&gt;titleabbrev...&lt;/titleabbrev&gt;
&lt;summary&gt;summary...&lt;/summary&gt;
&lt;keywords&gt;keyword1, keyword2, ...&lt;/keywords&gt;
&lt;/head&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_44093568"></a><span style="">tabular.xsl</span>

<ul><li><a name="Freemind_Link_1599681557"></a><span style="">用 URI 格式导入 DocBook website XSL</span>
<ul><li><a name="Freemind_Link_1000435073"></a><span style="">&lt;xsl:import href="http://docbook.sourceforge.net/release/website/2.6.0/xsl/tabular.xsl"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_730078463"></a><span style="">确认 $XML_CATALOG_FILES 能够正确解析该 URI</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_206878458"></a><a style="" href="#Freemind_Link_342838979">&lt;xsl:include href="osx-common.xsl"/&gt;</a>

</li></ul>
<ul><li><a name="Freemind_Link_431151231"></a><span style="">&lt;xsl:template name="webpage.table.footer"&gt;</span>
<ul><li><a name="Freemind_Link_481984728"></a><span style="">在左侧导航条下方增加 Google 搜索</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1650332797"></a><span style="">参数 navhead.in.allpage =1 ？</span>
<ul><li><a name="Freemind_Link_720631"></a><span style="">所有页面均显示 home.navhead, home.navhead.upperright</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1240099096"></a><span style="font-family:sansserif;font-size:12;">&lt;xsl:template name="home.navhead.upperright"&gt;</span>



<ul><li><a name="Freemind_Link_581770319"></a><span style="">显示到文字版的链接（可定制）</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_580792640"></a><a style="" href="#Freemind_Link_1994223506">&lt;xsl:template name="home.navhead"&gt;</a>



</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1484987356"></a><span style="">website.xsl</span>

<ul><li><a name="Freemind_Link_816737862"></a><span style="">用 URI 格式导入 DocBook website XSL</span>
<ul><li><a name="Freemind_Link_1183531216"></a><span style="">&lt;xsl:import href="http://docbook.sourceforge.net/release/website/2.6.0/xsl/website.xsl"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1417646541"></a><span style="">确认 $XML_CATALOG_FILES 能够正确解析该 URI</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_251106583"></a><span style="">顺序浏览</span>
<ul><li><a name="Freemind_Link_1450089824"></a><span style="">&lt;xsl:param name="sequential.links" select="1"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_838417067"></a><span style="">banner.before.navigation</span>
<ul><li><a name="Freemind_Link_1949538196"></a><span style="">banner.before.navigation = 1/0，则在导航条上方或下方显示 banner </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_223182581"></a><a style="" href="#Freemind_Link_342838979">&lt;xsl:include href="osx-common.xsl"/&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_342838979"></a><span style="">osx-common.xsl</span>


<ul><li><a name="Freemind_Link_729197990"></a><span style="">设置网页输出编码</span>
<ul><li><a name="Freemind_Link_1673207238"></a><span style="">&lt;xsl:output method="html" encoding="gb2312" indent="yes"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_31577734"></a><span style="">l10n 本地化设置</span>
<ul><li><span style="">&lt;xsl:param name="l10n.gentext.default.language"&gt;zh_cn&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_427152611"></a><a style="" href="#Freemind_Link_376251534">定制中文姓名显示方式</a>

</li></ul>
<ul><li><a name="Freemind_Link_1764200410"></a><span style="">设置 CSS 样式表</span>
<ul><li><span style="">&lt;xsl:param name="html.stylesheet.type"&gt;text/css&lt;/xsl:param&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1572187675"></a><span style="">&lt;xsl:param name="html.stylesheet"&gt;/inc/css/tabular.css&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="generate.id.attributes" select="0"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_973063569"></a><span style="">是否用水平分隔线分隔正文于 header 和 footer</span>
<ul><li><span style="">&lt;xsl:param name="header.hr" select="1"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="footer.hr" select="1"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_982610534"></a><span style="">导航条以及正文的背景颜色设置</span>
<ul><li><span style="">&lt;xsl:param name="textbgcolor"&gt;white&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="navbgcolor"&gt;#4080FF&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_515126176"></a><span style="">以图标方式显示警告</span>
<ul><li><span style="">&lt;xsl:param name="admon.graphics" select="1"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="admon.textlabel" select="0"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="admon.graphics.path"&gt;/images/docbook/&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="admon.graphics.extension"&gt;.png&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1976454623"></a><span style="">以图标方式显示导航</span>
<ul><li><span style="">&lt;xsl:param name="navig.graphics" select="1"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="navig.graphics.path"&gt;/images/docbook/&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="navig.graphics.extension"&gt;.png&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1260756055"></a><span style="">以图标方式显示 callout</span>
<ul><li><span style="">&lt;xsl:param name="callout.graphics" select="1"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="callout.graphics.path"&gt;/images/callouts/&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="callout.graphics.extension"&gt;.png&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="callout.graphics.number.limit"&gt;15&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_282052109"></a><span style="">其它图片</span>
<ul><li><span style="">&lt;xsl:param name="toc.spacer.image"&gt;/images/docbook/blank.png&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="toc.pointer.image"&gt;/images/docbook/arrow.png&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="toc.blank.image"&gt;/images/docbook/blank.png&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="table.spacer.image"&gt;/images/docbook/spacer.png&lt;/xsl:param&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="nav.icon.path"&gt;/images/navicons/&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_835467701"></a><span style="">是否章节编号</span>
<ul><li><span style="">&lt;xsl:param name="section.autolabel"   select="1"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="section.label.includes.component.label"   select="1"/&gt;</span></li></ul>
<ul><li><span style="">&lt;xsl:param name="section.autolabel.max.depth" select="8"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_809405430"></a><span style="">顺序浏览</span>
<ul><li><a name="Freemind_Link_117331762"></a><span style="">是否在网页最下方显示上一页、下一页，以便可以顺序的浏览整个网站</span></li></ul>
<ul><li><a name="Freemind_Link_449481668"></a><span style="">&lt;xsl:param name="sequential.links" select="1"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1149556831"></a><span style="">标题显示位置</span>
<ul><li><a name="Freemind_Link_169034878"></a><span style="">&lt;xsl:param name="formal.title.placement"&gt;
figure after
example before
equation after
table before
procedure before
task before
&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1759016018"></a><span style="">待定制</span>
<ul><li><a name="Freemind_Link_1264493110"></a><span style="">&lt;xsl:template name="allpages.banner"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_961476778"></a><span style="">$footer.hr</span>
<ul><li><a name="Freemind_Link_711792975"></a><span style="">是否要在 footer 之前添加 &lt;hr/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_157465786"></a><span style="">第一行脚注</span>
<ul><li><a name="Freemind_Link_1302370366"></a><span style="">左栏显示 rcsdate，调用模板 rcsdate.format</span>
<ul><li><a name="Freemind_Link_1379329681"></a><span style="">直接显示rcsdate的 value 属性。CSS 样式为 footdate</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_294989062"></a><span style="">中间栏</span>
<ul><li><a name="Freemind_Link_1767744798"></a><span style="">如果不是首页：</span>
<ul><li><a name="Freemind_Link_1866406287"></a><span style="">显示到主页的链接</span>
<ul><li><a name="Freemind_Link_1912462551"></a><span style="">&lt;xsl:call-template name="homeuri"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_509534817"></a><span style="">&lt;xsl:call-template name="gentext.nav.home"/&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1009436055"></a><span style="">显示预设置链接</span>
<ul><li><a name="Freemind_Link_1835220668"></a><span style="">  &lt;xsl:variable name="footers" select="$page/config[@param='footer']
                                       |$page/config[@param='footlink']
                                       |$autolayout/autolayout/config[@param='footer']
                                       |$autolayout/autolayout/config[@param='footlink']"/&gt;
</span></li></ul>
<ul><li><a name="Freemind_Link_1084888518"></a><a style="" href="#Freemind_Link_1399633660">&lt;xsl:apply-templates select="$footers" mode="footer.link.mode"/&gt;</a>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_863202666"></a><span style="">右栏显示feedback</span>
<ul><li><a name="Freemind_Link_536810737"></a><span style="">定义了 feedback.href 属性？</span>
<ul><li><a name="Freemind_Link_1511518241"></a><span style="">链接 href</span>
<ul><li><a name="Freemind_Link_1230127732"></a><span style="">$feedback.with.id 为 1? 则将 page_id 加在 feedback.href 后面</span></li></ul>
<ul><li><a name="Freemind_Link_688101789"></a><span style="">否则只将 feedback.href 作为 feedback 的 URL</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_753892046"></a><span style="">链接文字</span>
<ul><li><a name="Freemind_Link_882187215"></a><span style="">&lt;xsl:param name="feedback.link.text"&gt;Feedback&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_553926846"></a><span style="">第二行脚注</span>
<ul><li><a name="Freemind_Link_514982785"></a><span style="">右对齐显示 版权信息</span>
<ul><li><a name="Freemind_Link_339672823"></a><span style="">&lt;xsl:when test="head/copyright"&gt;
    &lt;xsl:apply-templates select="head/copyright" mode="footer.mode"/&gt;
&lt;/xsl:when&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_124833168"></a><span style="">第三行脚注</span>
<ul><li><a name="Freemind_Link_1949251516"></a><span style="">如果定义 sequential.links  = 1</span>
<ul><li><a name="Freemind_Link_1242035542"></a><span style="">则显示上一页，下一页，即顺序浏览网站</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_376251534"></a><span style="">../common/osx-person-name.xsl</span>


<ul><li><a name="Freemind_Link_1584581065"></a><span style="">&lt;xsl:param name="local.l10n.xml" select="document('')"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_60156370"></a><a style="" href="#Freemind_Link_1478218789">模板 &lt;l:i18n xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0"&gt;</a>

</li></ul>
<ul><li><a name="Freemind_Link_1478218789"></a><span style="">模板 &lt;xsl:template name="person.name.family-given"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_697451082"></a><span style="">chunk-tabular.xsl</span>


<ul><li><a name="Freemind_Link_1415465245"></a><span style="">用 URI 格式导入 DocBook website XSL: &lt;xsl:import href="http://docbook.sourceforge.net/release/website/2.6.0/xsl/chunk-tabular.xsl"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1590721552"></a><a style="" href="#Freemind_Link_342838979">&lt;xsl:include href="osx-common.xsl"/&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1100247598"></a><span style="">chunk-website.xsl</span>


<ul><li><a name="Freemind_Link_1902812427"></a><span style="">用 URI 格式导入 DocBook website XSL: &lt;xsl:import href="http://docbook.sourceforge.net/release/website/2.6.0/xsl/chunk-website.xsl"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1067800528"></a><a style="" href="#Freemind_Link_342838979">&lt;xsl:include href="osx-common.xsl"/&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_828441778"></a><span style="">layout.xml 和网页 XML 中的 config</span>
<ul><li><a name="Freemind_Link_1571479498"></a><span style="">两个定义config 的位置</span>
<ul><li><a name="Freemind_Link_937052333"></a><span style="">layout.xml 的 config 条目是缺省属性，作用于所有网页</span></li></ul>
<ul><li><a name="Freemind_Link_122758577"></a><span style="">网页 XML 中定义的 config 覆盖 layout.xml 中定义</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_293017068"></a><span style="">为什么不用 xsl 参数定制？</span>
<ul><li><a name="Freemind_Link_542950379"></a><span style="">DocBook 用参数配置可以实现文档风格的一致</span></li></ul>
<ul><li><a name="Freemind_Link_793121990"></a><span style="">网站用 config 元素定制，实现网站分隔的多样化</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1043998417"></a><span style="">navbgcolor: 导航条背景色</span>
<ul><li><a name="Freemind_Link_1982757428"></a><span style="">&lt;config  param="navbgcolor"  value="#4080FF"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_14408647"></a><span style="">可以在运行时由样式表参数指定</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1871941485"></a><span style="">navtocwidth: 导航条宽度</span>
<ul><li><a name="Freemind_Link_1775316575"></a><span style="">220</span></li></ul>
<ul><li><a name="Freemind_Link_1705776048"></a><span style="">可以在运行时由样式表参数指定</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_333545514"></a><span style="">homebanner-tabular: tabular 下，导航条顶部，主页时的 LOGO 图像</span></li></ul>
<ul><li><a name="Freemind_Link_1763869137"></a><span style="">banner-tabular: tabular 下，导航条顶部，主页之外的其它页面的 LOGO 图像</span></li></ul>
<ul><li><a name="Freemind_Link_1614676637"></a><span style="">homebanner: 非 tabular 下，导航条左侧，主页时的 LOGO 图像</span></li></ul>
<ul><li><a name="Freemind_Link_1465002550"></a><span style="">banner: 非 tabular 下，导航条左侧，主页之外的其它页面的 LOGO 图像</span></li></ul>
<ul><li><a name="Freemind_Link_1899209232"></a><span style="">footer：脚注中部，主页旁，指向外部的 URL 链接</span>
<ul><li><a name="Freemind_Link_770008455"></a><span style="">&lt;config param="footer" value="about.html" altval="About..."/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1401808251"></a><span style="">footlink：脚注中部，主页旁，指向本地网页的链接</span></li></ul>
<ul><li><a name="Freemind_Link_765060891"></a><span style="">feedback.href：脚注左侧反馈的 URL</span>
<ul><li><a name="Freemind_Link_194429102"></a><span style="">可以在运行时由样式表参数指定</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1797864787"></a><span style="">rcsdate： 底部脚注左侧显示版本日期</span>
<ul><li><a name="Freemind_Link_808775354"></a><span style="">&lt;config param="rcsdate" value="$Date$"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_244447838"></a><span style="">text-prefix</span>
<ul><li><a name="Freemind_Link_981501344"></a><span style="">&lt;config param="text-prefix" value="n-"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_350544939"></a><span style="">desc</span>
<ul><li><a name="Freemind_Link_763349209"></a><span style="">&lt;config param="desc" value="The Test Home Page"/&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_33944662"></a><span style="">其它</span>
<ul><li><a name="Freemind_Link_329926398"></a><span style="">&lt;headlink rel="icon" href="http://nwalsh.com/images/nwalsh-icon16.png" type="image/png"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1011022852"></a><span style="">&lt;style src="example.css" type="text/css"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_584464602"></a><span style="">参数定制</span>
<ul><li><a name="Freemind_Link_1690371060"></a><span style="">&lt;xsl:import href="chunk-tabular.xsl"/&gt; 

&lt;!-- Website stylesheet parameters --&gt;
&lt;xsl:param name="footer.hr" select="0"/&gt;
&lt;xsl:param name="feedback.link.text"&gt;Send us feedback&lt;/xsl:param&gt;
&lt;xsl:param name="textbgcolor"&gt;#C8C8C8&lt;/xsl:param&gt;

&lt;!-- DocBook stylesheet parameters --&gt;
&lt;xsl:param name="admon.graphics" select="1"/&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_570171233"></a><span style="">定制层初级</span>
<ul><li><a name="Freemind_Link_442326068"></a><span style="">自定义名字空间</span>
<ul><li><a name="Freemind_Link_480887068"></a><span style="">http://www.opensourcexpress.com/docbook/xsl/current</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_547749719"></a><span style="">override file
（重载）</span>
<ul><li><a name="Freemind_Link_1918570940"></a><span style="">website/tabular.xsl</span>
<ul><li><a name="Freemind_Link_781304490"></a><span style="">&lt;xsl:import href="http://docbook.sourceforge.net/release/website/2.6.0/xsl/tabular.xsl"/&gt;
&lt;xsl:include href="osx-common.xsl"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1173854870"></a><span style="">website/website.xsl</span>
<ul><li><a name="Freemind_Link_8048714"></a><span style="">&lt;xsl:import href="http://docbook.sourceforge.net/release/website/2.6.0/xsl/website.xsl"/&gt; 
&lt;xsl:include href="osx-common.xsl"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1473334472"></a><span style="">website/chunk-tabular.xsl</span></li></ul>
<ul><li><a name="Freemind_Link_1088931167"></a><span style="">website/chunk-website.xsl</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1833938471"></a><span style="">common file
（osx-common.xsl）</span>
<ul><li><a name="Freemind_Link_971850474"></a><span style="">最重要的，设置网页编码</span>
<ul><li><a name="Freemind_Link_1642474555"></a><span style="">&lt;xsl:output method="html" encoding="gb2312" indent="yes"/&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1393547589"></a><span style="">同时，让输出网页进行格式化</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1783180932"></a><span style="">设置样式表名称</span>
<ul><li><a name="Freemind_Link_962303481"></a><span style="">&lt;xsl:param name="html.stylesheet"&gt;/inc/css/website.css&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_329054102"></a><span style="">章节编号</span></li></ul>
<ul><li><a name="Freemind_Link_1342188835"></a><span style="">l10n 本地化设置</span>
<ul><li><a name="Freemind_Link_1929580612"></a><span style="">&lt;xsl:param name="l10n.gentext.default.language"&gt;zh_cn&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_25025871"></a><span style="">图标位置</span>
<ul><li><a name="Freemind_Link_757672957"></a><span style="">&lt;xsl:param name="admon.graphics.path"&gt;/images/docbook/&lt;/xsl:param&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1541643632"></a><span style="">&lt;xsl:param name="navig.graphics.path"&gt;/images/docbook/&lt;/xsl:param&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1235219392"></a><span style="">&lt;xsl:param name="table.spacer.image"&gt;/images/docbook/spacer.png&lt;/xsl:param&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_287655446"></a><span style="">中文姓名显示方式</span>
<ul><li><a name="Freemind_Link_278542882"></a><span style="">&lt;xsl:template name="person.name.family-given"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1433781926"></a><span style="">标题显示位置</span>
<ul><li><a name="Freemind_Link_216361250"></a><span style="">&lt;xsl:param name="formal.title.placement"&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1000433985"></a><span style="">Google Search Bar</span>
<ul><li><a name="Freemind_Link_1017430395"></a><span style="">在 tabluar.xsl 中的 webpage.table.footer 模板中添加 google 的 form</span>
<ul><li><a name="Freemind_Link_273795573"></a><span style="">&lt;xsl:template name="webpage.table.footer"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1834093651"></a><span style="">另外一个方法是重新定义DTD，增加 google 的元素，并增加相应模板</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_226691620"></a><span style="">定制层进阶</span>
<ul><li><a name="Freemind_Link_547735455"></a><span style="">website xsl 研究</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_210673742"></a><span style="">import &amp; include</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1488683042"></a><span style="">GIMP 风格 website</span>
<ul><li><a name="Freemind_Link_1176068628"></a><span style="">链接</span>
<ul><li><a name="Freemind_Link_1909603449"></a><span style="">网址</span>
<ul><li><a name="Freemind_Link_1123563230"></a><span style="">http://developer.gimp.org/</span></li></ul>
<ul><li><a name="Freemind_Link_383450718"></a><span style="">http://netfilter.org/</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1579007686"></a><span style="">下载</span>
<ul><li><a name="Freemind_Link_202609046"></a><span style="">http://svn.netfilter.org/netfilter/trunk/homepage</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1418073192"></a><span style="">gimp</span>
<ul><li><a name="Freemind_Link_168974453"></a><span style="">网站结构</span>
<ul><li><a name="Freemind_Link_291800766"></a><span style="">目录 gimp-web-devel</span>
<ul><li><a name="Freemind_Link_1945856571"></a><span style="">README</span>
<ul><li><a name="Freemind_Link_1514185716"></a><span style="">cvs 维护的网站 xml 源代码</span></li></ul>
<ul><li><a name="Freemind_Link_1263271351"></a><span style="">如何创建网站</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_506416943"></a><span style="">install.sh</span>
<ul><li><a name="Freemind_Link_1170848688"></a><a style="" href="#Freemind_Link_939689558">编译网页</a>

</li></ul>
<ul><li><a name="Freemind_Link_1438271480"></a><span style="">将网站同步到本地目录 gimp-web 目录中</span>
<ul><li><a name="Freemind_Link_524738699"></a><a style="" href="#Freemind_Link_1938054756"> rsync -rlt --delete --exclude-from=install.exclude ./ $1</a>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_939689558"></a><span style="">Makefile</span>
<ul><li><a name="Freemind_Link_1423153185"></a><span style="">先编译子目录 screenshots</span>
<ul><li><a name="Freemind_Link_313946283"></a><span style="">用 convert 生成缩略图</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_164905139"></a><span style="">再编译网页</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1896927158"></a><span style="">ChangeLog</span>
<ul><li><a name="Freemind_Link_944735316"></a><span style="">网站更新记录</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1938054756"></a><span style="">install.exclude</span>
<ul><li><a name="Freemind_Link_1106664649"></a><span style="">在网站 源代码目录 gimp-web-devel 和目标目录 gimp-web 同步时，应该排除的文件列表</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_602825961"></a><span style="">*.xml</span>
<ul><li><a name="Freemind_Link_1586838975"></a><span style="">网站源代码</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_268340847"></a><span style="">目录 gimp-web-devel/xsl</span>
<ul><li><a name="Freemind_Link_1754881621"></a><span style="">DocBook website 样式表</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1411548841"></a><span style="">目录 gimp-web-devel/dtd</span>
<ul><li><a name="Freemind_Link_828487850"></a><span style="">DocBook DTD</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_948535443"></a><span style="">目录 gimp-web-devel/style</span>
<ul><li><a name="Freemind_Link_1520205004"></a><span style="">default.css 样式表</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_402162"></a><span style="">website xsl</span>
<ul><li><a name="Freemind_Link_1846769506"></a><a style="" href="#Freemind_Link_1343971187">基本和 netfilter 相同，只是 netfilter 对 gimp 风格进行了微调</a>

</li></ul>
<ul><li><a name="Freemind_Link_1488213636"></a><a style="" href="#Freemind_Link_1916258625">具体参见 netfilter 关于 xsl 的描述</a>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1054495273"></a><span style="">netfilter</span>
<ul><li><a name="Freemind_Link_1193209123"></a><span style="">说明</span>
<ul><li><a name="Freemind_Link_1171718684"></a><span style="">继承了 gimp 的风格</span></li></ul>
<ul><li><a name="Freemind_Link_1343971187"></a><span style="">网页格局进行了微调</span>
<ul><li><a name="Freemind_Link_1216092045"></a><span style="">将模板 webpage.linkbar 的显示放在网页开头 allpages.banner 下方</span></li></ul>
<ul><li><a name="Freemind_Link_1415545957"></a><span style="">增加模板 webpage.sponsor，显示在 webpage.footer 上方，即原 webpage.linkbar 之处</span></li></ul>
<ul><li><a name="Freemind_Link_754547343"></a><span style="">去掉了 webpage.validator 的显示</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_566365946"></a><span style="">网站结构</span>
<ul><li><a name="Freemind_Link_1243955572"></a><span style="">目录 homepage</span>
<ul><li><a name="Freemind_Link_1121399640"></a><span style="">Makefile</span>
<ul><li><a name="Freemind_Link_1011644392"></a><span style="">在目录 homepage/xml 下执行 make</span></li></ul>
<ul><li><a name="Freemind_Link_1936108177"></a><span style="">网站同步: 将 homepage/output 目录同步到对外的网站目录中</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_950662380"></a><span style="">目录 homepage/xml</span>
<ul><li><a name="Freemind_Link_1891925431"></a><span style="">Makefile</span>
<ul><li><a name="Freemind_Link_764057737"></a><span style="">几个 XML 文件，由模板生成 </span>
<ul><li><a name="Freemind_Link_241658727"></a><span style="">mirrors.xml</span></li></ul>
<ul><li><span style="">documentation/index.xml</span></li></ul>
<ul><li><a name="Freemind_Link_978416738"></a><span style="">$(NETFILTER_POMXMLS)</span></li></ul>
<ul><li><a name="Freemind_Link_1017508138"></a><span style="">$(NETFILTER_ADVISORIES)</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_320532198"></a><span style="">编译 website 网站</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_33118338"></a><span style="">目录 homepage/output</span>
<ul><li><a name="Freemind_Link_1252551894"></a><span style="">website 网页输出目录</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_661099975"></a><span style="">目录 homepage/xsl</span>
<ul><li><a name="Freemind_Link_690356133"></a><span style="">DocBook website 样式表</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_548013275"></a><span style="">目录 homepage/style</span>
<ul><li><a name="Freemind_Link_991034402"></a><span style="">netfilter.css 样式表</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1916258625"></a><span style="">website xsl</span>
<ul><li><a name="Freemind_Link_1308808733"></a><a style="" href="#Freemind_Link_1844001418">mine.xsl</a>



<ul><li><a name="Freemind_Link_1047303040"></a><span style="">全局参数</span>
<ul><li><span style="">&lt;xsl:param name="ulink.target" select="''" /&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1161545485"></a><span style="">用到的参数</span>
<ul><li><a name="Freemind_Link_258679962"></a><span style="">sponsor</span>
<ul><li><a name="Freemind_Link_1943545838"></a><span style="">layout.xml: &lt;headlink   rel="sponsor"   href="..."   title="image_filename"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_818416337"></a><span style="">banner</span>
<ul><li><a name="Freemind_Link_1667121430"></a><span style="">layout.xml: $autolayout/autolayout/config[@param='banner-left'], @value=image_filename, @altval="image_alt_text"</span></li></ul>
<ul><li><a name="Freemind_Link_43670203"></a><span style="">layout.xml: $autolayout/autolayout/config[@param='banner-right'],  @value=image_filename, @altval="image_alt_text"</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_19774091"></a><span style="">linkbar</span>
<ul><li><a name="Freemind_Link_1706398108"></a><span style="">layout.xml: autolayout/headlink[@rel='bookmark'], @value="link_text", @href="..."</span>
<ul><li><a name="Freemind_Link_689246438"></a><span style="">显示 @title 内容，链接为 @href</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_882551336"></a><span style="">模板 &lt;xsl:template match="webpage"&gt;</span>

<ul><li><a name="Freemind_Link_1741233401"></a><span style="">网页 &lt;head&gt; 部分</span>
<ul><li><a name="Freemind_Link_590452147"></a><a style="" href="#Freemind_Link_113102746">&lt;xsl:apply-templates select="head" mode="head.mode"/&gt;</a>


</li></ul>
<ul><li><a name="Freemind_Link_1764288096"></a><span style="">&lt;xsl:apply-templates select="config" mode="head.mode"/&gt;</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_563224304"></a><span style="">广告栏</span>
<ul><li><a name="Freemind_Link_440147643"></a><a style="" href="#Freemind_Link_110683392">&lt;xsl:call-template name="allpages.banner"/&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1176719644"></a><span style="">linkbar</span>
<ul><li><a name="Freemind_Link_45986728"></a><a style="" href="#Freemind_Link_673430713">&lt;xsl:call-template name="webpage.linkbar"/&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_508666937"></a><span style="">网页左侧导航条</span>
<ul><li><a name="Freemind_Link_775131832"></a><a style="" href="#Freemind_Link_108611449">&lt;xsl:apply-templates select="$toc"&gt;
    &lt;xsl:with-param name="pageid" select="@id"/&gt;
&lt;/xsl:apply-templates&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_838858586"></a><span style="">左右分隔</span>
<ul><li><a name="Freemind_Link_602660881"></a><a style="" href="#Freemind_Link_256276071">&lt;xsl:call-template name="hspacer"/&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_592277614"></a><span style="">网页右侧主体页面</span>
<ul><li><a name="Freemind_Link_871727054"></a><span style="">网页标题</span>
<ul><li><a name="Freemind_Link_1936733796"></a><a style="" href="#Freemind_Link_316655781">&lt;xsl:apply-templates select="./head/title" mode="title.mode"/&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1049450820"></a><span style="">执行 DocBook 样式表</span>
<ul><li><a name="Freemind_Link_1657892225"></a><span style="">&lt;xsl:apply-templates select="child::*[name(.) != 'webpage']"/&gt;</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1831109417"></a><span style="">脚注</span>
<ul><li><a name="Freemind_Link_934347483"></a><a style="" href="#Freemind_Link_1701432066">&lt;xsl:call-template name="process.footnotes"/&gt;</a>


</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_355358875"></a><span style="">页脚</span>
<ul><li><a name="Freemind_Link_24883126"></a><a style="" href="#Freemind_Link_1916601597">&lt;xsl:call-template name="webpage.sponsor"/&gt;</a>


</li></ul>
<ul><li><a name="Freemind_Link_160365361"></a><a style="" href="#Freemind_Link_782107220">&lt;xsl:call-template name="webpage.footer"/&gt;</a>



</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_110683392"></a><span style="">模板 &lt;xsl:template name="allpages.banner"&gt;</span>

<ul><li><a name="Freemind_Link_1666813224"></a><span style="">显示 banner-left, banner-right 图像，链接指向主页</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_316655781"></a><span style="">模板 &lt;xsl:template match="title" mode="head.mode"&gt;</span>

<ul><li><a name="Freemind_Link_104826418"></a><span style="">如果 autolayout/config[@param='title'] 不为空，则在标题前面增加 “@value -”</span></li></ul>
<ul><li><a name="Freemind_Link_31678063"></a><span style="">显示 head/title 内容</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_950770679"></a><span style="">模板 &lt;xsl:template name="hspacer"&gt;</span>

<ul><li><a name="Freemind_Link_256276071"></a><span style="">空模板</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_673430713"></a><a style="" href="#Freemind_Link_730486521">模板 &lt;xsl:template name="webpage.linkbar"&gt;</a>


</li></ul>
<ul><li><a name="Freemind_Link_730486521"></a><span style="">模板 &lt;xsl:template match="headlink" mode="webpage.linkbar"&gt;</span>

<ul><li><a name="Freemind_Link_35382711"></a><span style="">如果存在 autolayout/headlink[@rel='bookmark']</span>
<ul><li><a name="Freemind_Link_1849102443"></a><span style="">显示 @title 内容，链接为 @href</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_147608420"></a><span style="">模板 &lt;xsl:template name="webpage.footer"&gt;</span>

<ul><li><a name="Freemind_Link_741153322"></a><span style="">显示版权信息</span>
<ul><li><a name="Freemind_Link_397488063"></a><span style="">如下优先级调用 head/copyright， autolayout/copyright </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_144861046"></a><span style="">显示作者信息</span>
<ul><li><a name="Freemind_Link_1878788077"></a><a style="" href="#Freemind_Link_872004169">&lt;xsl:apply-templates select="$autolayout/autolayout/headlink" mode="webpage.footer" /&gt;</a>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_872004169"></a><span style="">模板 &lt;xsl:template match="headlink" mode="webpage.footer"&gt;</span>

<ul><li><a name="Freemind_Link_407051959"></a><span style="">如果存在 autolayout/headlink[@rel='author']</span>
<ul><li><a name="Freemind_Link_1189421095"></a><span style="">显示 @title 内容，链接为 @href</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1916601597"></a><a style="" href="#Freemind_Link_192255503">模板 &lt;xsl:template name="webpage.sponsor"&gt;</a>


</li></ul>
<ul><li><a name="Freemind_Link_192255503"></a><span style="">模板 &lt;xsl:template match="headlink" mode="webpage.sponsor"&gt;</span>

<ul><li><a name="Freemind_Link_349727396"></a><span style="">&lt;autolayout&gt;
&lt;headlink   rel="sponsor"   href="..."   title="image_filename"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1771804711"></a><span style="">问题</span>

<ul><li><a name="Freemind_Link_1960149670"></a><span style="">mine.xsl</span>
<ul><li><a name="Freemind_Link_1088765008"></a><span style="">mine.xsl:44: &lt;xsl:variable name="tocentry" select="$autolayout/autolayout//*[$id=id]"/&gt;
$id=id，应该是 $id=@id !</span></li></ul>
<ul><li><a name="Freemind_Link_555833320"></a><span style="">mine.xsl:84: &lt;xsl:apply-templates select="child::*[name(.) != 'webpage']"/&gt;
child:* 最好写为 chind:node()</span></li></ul>
<ul><li><a name="Freemind_Link_1901928509"></a><span style="">mine.xsl:121: &lt;xsl:value-of select="($autolayout/autolayout/toc[@id='home'])[1]/@filename"/&gt;
toc 的 id 没有必要一定是 home!</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_669817744"></a><span style="">mytoc.xsl</span>


<ul><li><a name="Freemind_Link_586513012"></a><span style="">全局参数</span>
<ul><li><a name="Freemind_Link_572714365"></a><span style="">revsionflag 的文字</span>
<ul><li><a name="Freemind_Link_1917104473"></a><span style="">&lt;xsl:param name="nav.text.revisionflag.added"&gt;New&lt;/xsl:param&gt;
&lt;xsl:param name="nav.text.revisionflag.changed"&gt;Changed&lt;/xsl:param&gt;
&lt;xsl:param name="nav.text.revisionflag.deleted"&gt;&lt;/xsl:param&gt;
&lt;xsl:param name="nav.text.revisionflag.off"&gt;&lt;/xsl:param&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1018378726"></a><span style="">&lt;xsl:template match="toc"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_138633729"></a><span style="">&lt;xsl:template match="tocentry"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_890948189"></a><span style="">&lt;xsl:template name="insert.spacers"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_404276362"></a><span style="">myxref.xsl</span>


<ul><li><a name="Freemind_Link_491223957"></a><span style="">是为了扩展 docbook 的 ulink 的样式表</span>
<ul><li><a name="Freemind_Link_509850309"></a><span style="">目的是为 ulink 增加了 mimetype 参数</span>
<ul><li><a name="Freemind_Link_139775417"></a><span style="">      &lt;xsl:if test="@mimetype"&gt;
        &lt;xsl:attribute name="type"&gt;
          &lt;xsl:value-of select="@mimetype"/&gt;
        &lt;/xsl:attribute&gt;
      &lt;/xsl:if&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_398191917"></a><span style="">OSX 定制</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_980583570"></a><span style="">DocBook</span>
<ul><li><a name="Freemind_Link_940276375"></a><span style="">l10n</span>

<ul><li><a name="Freemind_Link_822061118"></a><span style="">html/docbook.xsl</span>
<ul><li><a name="Freemind_Link_1027935978"></a><a style="" href="#Freemind_Link_1384462752">&lt;xsl:include href="../common/l10n.xsl"/&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1384462752"></a><span style="">common/l10n.xsl</span>

<ul><li><a name="Freemind_Link_883155812"></a><a style="" href="#Freemind_Link_1085547417">&lt;xsl:param name="l10n.xml" select="document('../common/l10n.xml')"/&gt;
&lt;xsl:param name="local.l10n.xml" select="document('')"/&gt;</a>

</li></ul>
<ul><li><a name="Freemind_Link_57344356"></a><a style="" href="#Freemind_Link_216721196">&lt;xsl:template name="gentext.nav.home"&gt;
  &lt;xsl:call-template name="gentext"&gt;
    &lt;xsl:with-param name="key" select="'nav-home'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;
</a>

</li></ul>
<ul><li><a name="Freemind_Link_216721196"></a><span style="">&lt;xsl:template name="gentext"&gt;</span>

<ul><li><a name="Freemind_Link_1346604374"></a><span style="">用全局参数加载文档 XML 文档</span>
<ul><li><a name="Freemind_Link_1062209089"></a><span style="">&lt;xsl:param name="l10n.xml" select="document('../common/l10n.xml')"/&gt;
</span></li></ul>
<ul><li><a name="Freemind_Link_929938422"></a><span style="">&lt;xsl:param name="local.l10n.xml" select="document('')"/&gt;
</span></li></ul>
<ul><li><a name="Freemind_Link_444304419"></a><span style="">使用全局参数的好处是，用户可以覆盖 local.l10n.xml，来定制</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_44769519"></a><span style="">在 XML 文档中找到对应语种和 key 的节点</span>
<ul><li><a name="Freemind_Link_1585640413"></a><a style="" href="#Freemind_Link_929938422">  &lt;xsl:variable name="local.l10n.gentext"
                select="($local.l10n.xml//l:i18n/l:l10n[@language=$lang]/l:gentext[@key=$key])[1]"/&gt;
</a>


</li></ul>
<ul><li><a name="Freemind_Link_1893944767"></a><a style="" href="#Freemind_Link_1917957493">  &lt;xsl:variable name="l10n.gentext"
                select="($l10n.xml/l:i18n/l:l10n[@language=$lang]/l:gentext[@key=$key])[1]"/&gt;
</a>


</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1584357049"></a><span style="">xsl:choose 依次选择合适的 gentext</span>
<ul><li><a name="Freemind_Link_1007040074"></a><span style="">用户自定义（用户本地语种）</span>
<ul><li><a name="Freemind_Link_370937331"></a><span style="">    &lt;xsl:when test="$local.l10n.gentext"&gt;
      &lt;xsl:value-of select="$local.l10n.gentext/@text"/&gt;
    &lt;/xsl:when&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1338294793"></a><span style="">系统预设（用户本地语种）</span>
<ul><li><a name="Freemind_Link_1917957493"></a><span style="">    &lt;xsl:when test="$l10n.gentext"&gt;
      &lt;xsl:value-of select="$l10n.gentext/@text"/&gt;
    &lt;/xsl:when&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1530583549"></a><span style="">系统预设（英文）</span>
<ul><li><a name="Freemind_Link_1941895971"></a><span style="">最后尝试英文的 gentext &lt;xsl:value-of select="($l10n.xml/l:i18n/l:l10n[@language='en']/l:gentext[@key=$key])[1]/@text"/&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_864027684"></a><span style="">&lt;xsl:template name="l10n.language"&gt; </span>
<ul><li><a name="Freemind_Link_54779453"></a><span style="">如果定义的语种存在返回相应语种</span>
<ul><li><a name="Freemind_Link_1531218781"></a><span style="">如代码</span>
<ul><li><a name="Freemind_Link_1833612877"></a><span style="">    &lt;!-- try just the lang code without country --&gt;
    &lt;xsl:when test="$l10n.xml/l:i18n/l:l10n[@language=substring-before($adjusted.language,'_')]"&gt;
      &lt;xsl:value-of select="substring-before($adjusted.language,'_')"/&gt;
    &lt;/xsl:when&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_952768716"></a><span style="">否则返回 $l10n.gentext.default.language</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1085547417"></a><span style="">common/l10n.xml</span>
<ul><li><a name="Freemind_Link_1633133464"></a><a style="" href="#Freemind_Link_1831416456">&lt;!ENTITY zh_cn SYSTEM "zh_cn.xml"&gt;
...
&lt;l:i18n xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0"&gt;
...
&amp;zh_cn;
&lt;/l:i18n&gt;</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1831416456"></a><span style="">common/zh_cn.xsl</span>
<ul><li><a name="Freemind_Link_523777391"></a><span style="">&lt;l:l10n xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" language="zh_cn" english-language-name="Chinese Simplified"&gt;
   &lt;l:gentext key="Abstract" text="&amp;#25688;&amp;#35201;"/&gt;
   ...
   &lt;l:context name="styles"&gt;
      &lt;l:template name="person-name" text="first-last"/&gt;
   &lt;/l:context&gt;
&lt;/l:l10n&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1044011716"></a><span style="">定制</span>
<ul><li><a name="Freemind_Link_318295291"></a><span style="">语种选择</span>
<ul><li><a name="Freemind_Link_126050878"></a><a style="" href="#Freemind_Link_864027684">&lt;xsl:param name="l10n.gentext.default.language"&gt;zh_cn&lt;/xsl:param&gt;
&lt;!-- xsl:param name="l10n.gentext.language"&gt;zh_cn&lt;/xsl:param --&gt;
</a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1602597842"></a><span style="">l10n 本地定制</span>
<ul><li><a name="Freemind_Link_1444732131"></a><span style="">注意：只能在一处进行定制，否则只有最高优先级的有效</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_845427863"></a><span style="">调试 l10n</span>
<ul><li><a name="Freemind_Link_1022150964"></a><span style="">在文件 common/l10n.xsl 的 gentext 模板中，添加 &lt;xsl:message&gt; 诊断元素
&lt;xsl:template name="gentext"&gt;
  ...
  &lt;xsl:if test="$key = 'nav-home'"&gt;
    &lt;xsl:message terminate="yes"&gt;
      language: &lt;xsl:value-of select="$lang"/&gt;,
      local.l10n.gentext: &lt;xsl:value-of select="$local.l10n.gentext/@text"/&gt;,
      l10n.gentext: &lt;xsl:value-of select="$l10n.gentext/@text"/&gt;
      &amp;#10;
    &lt;/xsl:message&gt;
  &lt;/xsl:if&gt;
</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_75040325"></a><span style="">olink</span>

<ul><li><a name="Freemind_Link_774987871"></a><span style="">target.database.filename</span>
<ul><li><a name="Freemind_Link_1939031672"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_148600811"></a><span style="">&lt;targetset&gt;

&lt;document targetdoc="osx" 	baseuri="http://www.OpenSourceXpress.com"&gt;
  &lt;div href="/" targetptr="full"&gt;
    &lt;xreftext&gt;北京群英汇信息技术有限公司&lt;/xreftext&gt;
  &lt;/div&gt;
  &lt;div href="/" targetptr="short"&gt;
    &lt;xreftext&gt;群英汇&lt;/xreftext&gt;
  &lt;/div&gt;
  &lt;div href="/" targetptr="web"&gt;
    &lt;xreftext&gt;http://www.OpenSourceXpress.com/&lt;/xreftext&gt;
  &lt;/div&gt;
&lt;/document&gt;

&lt;/targetset&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1418650393"></a><span style="">website/olink.xsl</span>
<ul><li><a name="Freemind_Link_854625897"></a><a style="" href="#Freemind_Link_93747676">&lt;xsl:template match="olink"&gt;</a>

<ul><li><a name="Freemind_Link_45723292"></a><span style="">如果有 targetdoc 或者 targetptr 属性，调用系统模板处理 olink </span>
<ul><li><a name="Freemind_Link_605160947"></a><span style="">&lt;xsl:apply-imports/&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_113648886"></a><span style="">&lt;xsl:template name="make.olink.href"&gt;</span>
<ul><li><a name="Freemind_Link_701042336"></a><span style="">参数</span>
<ul><li><a name="Freemind_Link_858758781"></a><span style="">olink.key</span>
<ul><li><a name="Freemind_Link_179371569"></a><span style="">用 / 分隔 targetdoc, targetptr</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1122698714"></a><span style="">target.database</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_687753701"></a><span style="">从 target.database 获取属性值至变量</span>
<ul><li><a name="Freemind_Link_377148451"></a><span style="">命中 targetdoc/targetptr 的 div|obj 节点的 href 属性值，赋予变量 $target.href</span></li></ul>
<ul><li><a name="Freemind_Link_511090468"></a><span style="">命中 targetdoc 的 document 节点的 dir 属性值，赋予变量 $target.dir</span></li></ul>
<ul><li><a name="Freemind_Link_585715043"></a><span style="">命中 targetdoc/targetptr 的 div|obj 节点的 element 属性值，赋予变量 $target.element</span>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1770284901"></a><span style="">target.database 是否具有 sitemap 元素</span>
<ul><li><a name="Freemind_Link_1405045317"></a><span style="">若是 $use.sitemap  = 1</span></li></ul>
<ul><li><a name="Freemind_Link_1453950602"></a><span style="">否则 $use.sitemap  = 0</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1042336079"></a><span style="">变量 baseuri 赋值</span>
<ul><li><a name="Freemind_Link_1674907224"></a><span style="">如果 $use.sitemap = 1</span>
<ul><li><a name="Freemind_Link_1968842195"></a><span style="">必须预先设置 $current.docid 参数，否则不能计算相对 sitemap 路径</span></li></ul>
<ul><li><a name="Freemind_Link_1871070709"></a><span style="">以 $current.docid 匹配 document 节点的 targetdoc属性，命中的节点的 dir 属性值，赋予变量 $target.dir</span></li></ul>
<ul><li><a name="Freemind_Link_1463508153"></a><span style="">检索路径</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_12494243"></a><span style="">否则，即 $use.sitemap = 0 时</span>
<ul><li><a name="Freemind_Link_306283400"></a><span style="">获取 $root-rel，并输出</span></li></ul>
<ul><li><a name="Freemind_Link_386653623"></a><span style="">输出 $target.dir，如果不为空</span></li></ul>
<ul><li><a name="Freemind_Link_912245442"></a><span style="">遍历每一个 $target.database，输出 $targetdoc 对应的 baseuri</span>

</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_960841097"></a><span style="">输出 $baseuri ，如果不为空</span></li></ul>
<ul><li><a name="Freemind_Link_908111198"></a><span style="">输出 targetptr 对应的 href 部分</span>
<ul><li><a name="Freemind_Link_1429274091"></a><span style="">当 $target.element = 'webpage' 并且 $targetdoc = $targetptr，则不显示 $target.href</span></li></ul>
<ul><li><a name="Freemind_Link_1914583929"></a><span style="">否则输出 $target.href</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1767135427"></a><span style="">docbook/html/xref.xsl</span>
<ul><li><a name="Freemind_Link_93747676"></a><span style="">&lt;xsl:template match="olink" name="olink"&gt;</span>

<ul><li><a name="Freemind_Link_1958606602"></a><span style="">变量</span>
<ul><li><a name="Freemind_Link_1941800664"></a><a style="" href="#Freemind_Link_1318905210">如果带有 id 属性，则显示 anchor，name=@id</a>

</li></ul>
<ul><li><a name="Freemind_Link_1213313443"></a><span style="">如果带有 localinfo 属性，设定变量 localinfo</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1942726291"></a><span style="">targetdoc, targetptr 型</span>
<ul><li><a name="Freemind_Link_195814546"></a><span style="">如果具有 targetdoc 或者 targetptr 属性</span></li></ul>
<ul><li><a name="Freemind_Link_193688558"></a><a style="" href="#Freemind_Link_1545903208">为变量 $target.database.filename 赋值</a>

</li></ul>
<ul><li><a name="Freemind_Link_584077521"></a><span style="">加载 target.database.filename 至 $target.database </span>
<ul><li><a name="Freemind_Link_9032423"></a><span style="">&lt;xsl:variable name="target.database"  select="document($target.database.filename,/)"/&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_604656593"></a><a style="" href="#Freemind_Link_745310237">为变量 $olink.key 赋值</a>

<ul><li><a name="Freemind_Link_911144016"></a><span style="">&lt;xsl:call-template name="select.olink.key"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_487993473"></a><a style="" href="#Freemind_Link_113648886">为变量 $href  赋值</a>


<ul><li><a name="Freemind_Link_1910889420"></a><span style="">&lt;xsl:call-template name="make.olink.href"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_973056547"></a><span style="">为变量 $hottext 赋值</span>
<ul><li><a name="Freemind_Link_1075172594"></a><span style="">&lt;xsl:call-template name="olink.hottext"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_430339051"></a><span style="">为变量 $olink.docname.citation 赋值</span>
<ul><li><a name="Freemind_Link_141826742"></a><span style="">&lt;xsl:call-template name="olink.document.citation"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_720591514"></a><span style="">为变量 $olink.page.citation 赋值</span>
<ul><li><a name="Freemind_Link_547400975"></a><span style="">&lt;xsl:call-template name="olink.page.citation"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1682760308"></a><span style="">输出</span>
<ul><li><a name="Freemind_Link_472562586"></a><span style="">如果 $href 不为空</span>
<ul><li><a name="Freemind_Link_742950849"></a><span style="">        &lt;xsl:when test="$href != ''"&gt;
          &lt;a href="{$href}" class="olink"&gt;
            &lt;xsl:copy-of select="$hottext"/&gt;
          &lt;/a&gt;
          &lt;xsl:copy-of select="$olink.page.citation"/&gt;
          &lt;xsl:copy-of select="$olink.docname.citation"/&gt;
        &lt;/xsl:when&gt;
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1856150062"></a><span style="">否则，没有链接只显示文字</span>
<ul><li><a name="Freemind_Link_1918063718"></a><span style="">        &lt;xsl:otherwise&gt;
          &lt;span class="olink"&gt;&lt;xsl:copy-of select="$hottext"/&gt;&lt;/span&gt;
          &lt;xsl:copy-of select="$olink.page.citation"/&gt;
          &lt;xsl:copy-of select="$olink.docname.citation"/&gt;
        &lt;/xsl:otherwise&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_795677229"></a><span style="">传统型</span>
<ul><li><a name="Freemind_Link_1369136464"></a><span style="">若具有 linkmode 属性</span>
<ul><li><a name="Freemind_Link_522355380"></a><span style="">linkmode 得到 base URI</span></li></ul>
<ul><li><a name="Freemind_Link_201200164"></a><span style="">localinfo 得到文内链接</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1564858110"></a><span style="">若 type 属性 为 "href"</span>
<ul><li><a name="Freemind_Link_1968005295"></a><span style="">targetdocent 得到 base URI</span></li></ul>
<ul><li><a name="Freemind_Link_1888553355"></a><span style="">localinfo 得到文内链接</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1318905210"></a><span style="">&lt;xsl:template name="anchor"&gt;</span>
<ul><li><a name="Freemind_Link_1964451311"></a><span style="">如果具有 id, xml:id 属性，则显示名位 @id 的锚点</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_80557594"></a><span style="">docbook/common/olink.xsl</span>

<ul><li><a name="Freemind_Link_452844413"></a><span style="">debug!</span>
<ul><li><a name="Freemind_Link_880964433"></a><span style="">设定 $olink.debug=1，可以看到调试信息</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_745310237"></a><span style="">&lt;xsl:template name="select.olink.key"&gt;</span></li></ul>
<ul><li><a name="Freemind_Link_1545903208"></a><span style="">&lt;xsl:template name="select.target.database"&gt;</span>
<ul><li><a name="Freemind_Link_244224915"></a><span style="">检查变量 $target.database.document 指向文件是否存在，若存在，返回该文件名</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_478622328"></a><span style="">&lt;xsl:template name="make.olink.href"&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1601697433"></a><span style="">ulink</span>
<ul><li><a name="Freemind_Link_1561025307"></a><span style="">docbook/html/xref.xsl</span>

<ul><li><a name="Freemind_Link_949373185"></a><span style="">&lt;xsl:template match="ulink" name="ulink"&gt;</span>
<ul><li><a name="Freemind_Link_102905451"></a><span style="">$ulink.target</span>
<ul><li><a name="Freemind_Link_1753779905"></a><span style="">如果定义变量 $ulink.target， 则链接的属性 target 指向 $ulink.target</span></li></ul>
<ul><li><a name="Freemind_Link_1056270208"></a><span style="">默认 $ulink.target = "_top"</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_189145177"></a><span style="">如果是空元素，则 url 属性值作为链接文字</span>
<ul><li><a name="Freemind_Link_1030566588"></a><span style="">        &lt;xsl:when test="count(child::node())=0"&gt;
          &lt;xsl:value-of select="@url"/&gt;
        &lt;/xsl:when&gt;
</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_805515430"></a><span style="">DocBook Tag FAQ</span>
<ul><li><a name="Freemind_Link_1345417370"></a><span style="">where to Google docbook archive?</span>
<ul><li><a name="Freemind_Link_1699133357"></a><span style="">http://lists.oasis-open.org/archives/docbook/</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1425699243"></a><span style="">&lt;graphic ...&gt;&lt;/graphic&gt;，报错：end tag for element "GRAPHIC" which is not open</span>
<ul><li><a name="Freemind_Link_509531737"></a><span style="">Graphic is empty in DocBook 4.1; replace &lt;graphic&gt;&lt;/graphic&gt; with &lt;graphic&gt;. </span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1935088030"></a><span style="">DocBook 5.0</span>
<ul><li><a name="Freemind_Link_1390482273"></a><span style="">下一次变革？RELAX NG</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1313399689"></a><span style="">DocBook Tool Chain</span>
<ul><li><a name="Freemind_Link_329239228"></a><span style="">norm's DocBook Processing Diagram（大图！）</span>
<ul><li><a name="Freemind_Link_1689153782"></a><span style="">&lt;html&gt;&lt;img src="xmlsgmlpub.png"&gt;</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_632145437"></a><span style="">验证工具</span>
<ul><li><a name="Freemind_Link_87086992"></a><span style="">SGML</span>
<ul><li><a name="Freemind_Link_1374240717"></a><span style="">SP (sgml parser)</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_66773226"></a><span style="">参考资料</span>
<ul><li><a name="Freemind_Link_1124506805"></a><span style="">主要参考文献</span>
<ul><li><a name="Freemind_Link_593810415"></a><span style="">DocBook: The Definitive Guide</span></li></ul>
<ul><li><a name="Freemind_Link_580699977"></a><span style="">DocBook XSL: The Complete Guide</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_683917193"></a><span style="">邮件列表存档</span>
<ul><li><a name="Freemind_Link_313135381"></a><span style="">archive at OASIS</span>
<ul><li><a name="Freemind_Link_392690761"></a><span style="">'http://lists.oasis-open.org/archives/docbook-apps</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_404133882"></a><span style="">archive at Red Hat</span>
<ul><li><a name="Freemind_Link_388543091"></a><span style="">http://sources.redhat.com/ml/docbook-apps</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1176058359"></a><span style="">Howto Search in Google?</span>
<ul><li><a name="Freemind_Link_838344276"></a><span style="">&lt;html&gt;搜索: &lt;br&gt;
&lt;blockquote&gt;&lt;i&gt;关键字 site:list.oasis-open.org&lt;/i&gt;&lt;/blockquote&gt;</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1156439181"></a><span style="">网站参考</span>
<ul><li><a name="Freemind_Link_681230313"></a><span style="">Wiki</span>
<ul><li><a name="Freemind_Link_1059780152"></a><span style="">http://wiki.docbook.org/topic/FrontPage</span></li></ul>
<ul><li><a name="Freemind_Link_1138673307"></a><span style="">http://wiki.docbook.org/topic/DocBook</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_505138853"></a><span style="">OASIS, DocBook 技术委员会官方网站</span></li></ul>
<ul><li><a name="Freemind_Link_1484860598"></a><span style="">DocBook@SourceForge</span></li></ul>
<ul><li><a name="Freemind_Link_1024850975"></a><span style="">TDG</span></li></ul>
<ul><li><a name="Freemind_Link_886057124"></a><span style="">norm</span>
<ul><li><a name="Freemind_Link_796202737"></a><span style="">'http://nwalsh.com/docbook/procdiagram/index.html</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1179280058"></a><span style="">http://sources.redhat.com/docbook-tools</span></li></ul>
<ul><li><span style="">sgmltools.org</span></li></ul>
<ul><li><a name="Freemind_Link_1895672640"></a><span style="">文档</span>
<ul><li><a name="Freemind_Link_95043198"></a><span style="">教程</span>
<ul><li><a name="Freemind_Link_1355103279"></a><span style="">http://wiki.docbook.org/topic/DocBookTutorials</span></li></ul>
<ul><li><a name="Freemind_Link_1849119239"></a><span style="">TDG</span>
<ul><li><a name="Freemind_Link_706075468"></a><span style="">﻿DocBook: The Definitive Guide, by Norman Walsh and Leonard Muellner</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1179449625"></a><span style="">http://opensource.bureau-cornavin.com/crash-course/</span>
<ul><li><a name="Freemind_Link_96447918"></a><span style="">sgml-common</span></li></ul>
<ul><li><a name="Freemind_Link_832155410"></a><span style="">jade</span></li></ul>
<ul><li><a name="Freemind_Link_823162879"></a><span style="">jadetex</span></li></ul>
<ul><li><a name="Freemind_Link_777308535"></a><span style="">docbook-dtdXX-sgml</span></li></ul>
<ul><li><a name="Freemind_Link_813462571"></a><span style="">docbook-style-dsssl</span></li></ul>
<ul><li><a name="Freemind_Link_544637495"></a><span style="">perl-SGMLSpm</span></li></ul>
<ul><li><a name="Freemind_Link_350407998"></a><span style="">docbook-utils</span></li></ul>
<ul><li><a name="Freemind_Link_1559536253"></a><span style="">psgml</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1222850475"></a><span style="">其它</span>
<ul><li><a name="Freemind_Link_79949739"></a><span style="">http://www.markupware.com/</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1219134717"></a><span style="">工具</span>
<ul><li><a name="Freemind_Link_1105803879"></a><span style="">编辑工具</span>
<ul><li><a name="Freemind_Link_120891435"></a><span style="">http://wiki.docbook.org/topic/DocBookAuthoringTools</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1762194059"></a><span style="">DTD</span></li></ul>
<ul><li><a name="Freemind_Link_119050038"></a><span style="">Style</span>
<ul><li><a name="Freemind_Link_1433218792"></a><span style="">DSSSL</span>
<ul><li><a name="Freemind_Link_977297385"></a><span style="">1.79 at 2004/11/03</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1259914084"></a><span style="">XSL</span>
<ul><li><a name="Freemind_Link_66129032"></a><span style="">1.69.1at 2005/08/11</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_825051622"></a><span style="">其它</span>
<ul><li><a name="Freemind_Link_1350769197"></a><span style="">website 2.6.0 at 2005/04/18</span></li></ul>
<ul><li><a name="Freemind_Link_1541597735"></a><span style="">slides/slides demo 3.4.0 at 2005/04/28</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1390010876"></a><span style="">发布工具</span>
<ul><li><a name="Freemind_Link_287595686"></a><span style="">http://wiki.docbook.org/topic/DocBookPublishingTools</span></li></ul>
<ul><li><a name="Freemind_Link_703112401"></a><span style="">dblatex</span>
<ul><li><a name="Freemind_Link_1414528209"></a><span style="">http://dblatex.sourceforge.net/</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1964521324"></a><span style="">转换工具</span>
<ul><li><a name="Freemind_Link_1250751358"></a><span style="">http://www.nyx.net/~sgjoen/The_LDP_HOWTO_Generator_ng.html</span></li></ul>
<ul><li><a name="Freemind_Link_713009674"></a><span style="">db2omf</span>
<ul><li><a name="Freemind_Link_1833315837"></a><span style="">http://www.tldp.org/downloads/</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_294312806"></a><span style="">texi2db</span>
<ul><li><a name="Freemind_Link_1783996988"></a><span style="">http://www.tldp.org/downloads/</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_797134456"></a><span style="">wt2db</span>
<ul><li><a name="Freemind_Link_212649188"></a><span style="">http://www.tldp.org/downloads/</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_208559653"></a><span style="">人物</span>
<ul><li><a name="Freemind_Link_1765799191"></a><span style="">&lt;html&gt;&lt;img src="norm.png"&gt;&lt;br&gt;
&lt;center&gt;Norman Walsh&lt;/center&gt;</span>
<ul><li><a name="Freemind_Link_1030047409"></a><span style="">http://nwalsh.com</span></li></ul>
<ul><li><a name="Freemind_Link_328347811"></a><span style="">DocBook Technical Committee 主席</span></li></ul>
<ul><li><a name="Freemind_Link_1949667729"></a><span style="">Sun公司</span></li></ul>
<ul><li><a name="Freemind_Link_1061113658"></a><span style="">TDG主要作者</span></li></ul>
<ul><li><a name="Freemind_Link_524771202"></a><span style="">撰写了大部分的 DocBook XSL 样式表</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_487552499"></a><span style="">&lt;html&gt;&lt;img src="jclark.png"&gt;&lt;br&gt;
&lt;center&gt;James Clark&lt;/center&gt;</span>
<ul><li><a name="Freemind_Link_1484972925"></a><span style="">http://www.jclark.com/</span></li></ul>
<ul><li><a name="Freemind_Link_1365234994"></a><span style="">SP (an open-source SGML parser)</span></li></ul>
<ul><li><a name="Freemind_Link_1196096371"></a><span style="">DSSSL</span></li></ul>
<ul><li><a name="Freemind_Link_1682060080"></a><span style="">Jade (James' DSSSL Engine)</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_419538317"></a><span style="">关于本文</span>
<ul><li><a name="Freemind_Link_66841567"></a><span style="">版本</span>
<ul><li><a name="Freemind_Link_151213948"></a><span style="">0.1, 2006/01/20</span>
<ul><li><a name="Freemind_Link_1612443834"></a><span style="">2006/05/03 提交到 Whodo</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_950699636"></a><span style="">作者</span>
<ul><li><a name="Freemind_Link_290269648"></a><span style="">J</span>
<ul><li><a name="Freemind_Link_1469124843"></a><span style="">Jiang Xin</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="_"></a><span style="">格式定义：DTD</span>
<ul><li><a name="Freemind_Link_1170481008"></a><span style="">格式</span>
<ul><li><a name="Freemind_Link_1279230313"></a><span style="">XML DTDs </span>
<ul><li><a name="Freemind_Link_907927031"></a><span style="">如： docbook-xml-4.5b1.zip</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1358565058"></a><span style="">SGML DTDs </span>
<ul><li><a name="Freemind_Link_961976094"></a><span style="">如： docbook-4.5b1.zip</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_93922939"></a><span style="">rng (RELAX NG Grammars )</span>
<ul><li><a name="Freemind_Link_1211219154"></a><span style="">如： docbook-rng-4.5b1.zip</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1635923853"></a><span style="">xsd (W3C XML Schema Grammars)</span>
<ul><li><a name="Freemind_Link_750180850"></a><span style="">如： docbook-xsd-4.5b1.zip</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_239710293"></a><span style="">版本</span>
<ul><li><a name="Freemind_Link_110526249"></a><span style="">5.0</span>
<ul><li><a name="Freemind_Link_1829124091"></a><span style="">用 RELAX NG 语法重构</span></li></ul>
<ul><li><a name="Freemind_Link_188894114"></a><span style="">格式</span>
<ul><li><span style="">rng (RELAX NG Grammars )</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1290392077"></a><span style="">对语法进行了删减，因而很多语法不向下兼容</span>
<ul><li><a name="Freemind_Link_1031080931"></a><span style="">大多之前定义的文档不需要修改</span></li></ul>
<ul><li><a name="Freemind_Link_1670536994"></a><span style="">存在兼容性问题的，移植也很简单</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_702575526"></a><span style="">4.5</span>
<ul><li><a name="Freemind_Link_1433628785"></a><span style="">存在 xml 和 sgml 两种格式</span></li></ul>
<ul><li><a name="Freemind_Link_1689503461"></a><span style="">4.5 和 5 的差异</span>
<ul><li><a name="Freemind_Link_309421509"></a><span style="">http://www.docbook.org/tdg5/en/showdiff.html</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_506464117"></a><span style="">下载</span>
<ul><li><a name="Freemind_Link_1991652723"></a><span style="">http://www.oasis-open.org/docbook</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_177344869"></a><span style="">谁在维护</span>
<ul><li><a name="Freemind_Link_952211917"></a><span style="">OASIS  Technical Committee </span></li></ul>
<ul><li><a name="Freemind_Link_642959726"></a><span style="">主席: Norman Walsh</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_672985945"></a><span style="">格式转换：Scheme</span>
<ul><li><a name="Freemind_Link_96839455"></a><span style="">XSL</span>
<ul><li><a name="Freemind_Link_1427216500"></a><span style="">what is it</span>
<ul><li><a name="Freemind_Link_1598121210"></a><span style="">XSL 通过 XSLT 将一种 XML 转换为另一格式的 XML</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1571409408"></a><span style="">FOP</span>
<ul><li><a name="Freemind_Link_1882256478"></a><span style="">直接转换生成 PDF</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1690098544"></a><span style="">JFOR</span>
<ul><li><a name="Freemind_Link_709483452"></a><span style="">直接转换生成 rtf</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1048436471"></a><span style="">PassiveTex</span>
<ul><li><a name="Freemind_Link_1683842752"></a><span style="">DocBook - FO - TeX - DVI - Postscript - PDF</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_555039445"></a><span style="">出版工具</span>
<ul><li><a name="Freemind_Link_975560588"></a><span style="">出版工具即DocBook 转换为可打印或者 WEB 页面</span>
<ul><li><a name="Freemind_Link_291473037"></a><span style="">参见: http://wiki.docbook.org/topic/DocBookPublishingTools</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1937661050"></a><span style="">DocBook 专有工具</span>
<ul><li><a name="Freemind_Link_1646201602"></a><span style="">DBLaTeX</span>
<ul><li><a name="Freemind_Link_1406925839"></a><span style="">web: http://dblatex.sourceforge.net/</span></li></ul>
<ul><li><a name="Freemind_Link_1510271270"></a><span style="">版本: 0.1.8</span></li></ul>
<ul><li><a name="Freemind_Link_415933175"></a><span style="">0.1.8 版本不支持 Unicode/中文！</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_604199930"></a><span style="">GemDoc</span>
<ul><li><a name="Freemind_Link_1554044262"></a><span style="">Web: http://www.gemdoc.net/</span>
<ul><li><a name="Freemind_Link_882816822"></a><span style="">http://g1c.com/gemdoc/</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_250836161"></a><span style="">Windows 软件，版本: 1.3.2</span></li></ul>
<ul><li><a name="Freemind_Link_398628075"></a><span style="">未注册版本会在文章下面加上一个链接</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_708959602"></a><span style="">XSLT Engines</span>
<ul><li><a name="Freemind_Link_1058986304"></a><span style="">SAXON</span>
<ul><li><a name="Freemind_Link_275721146"></a><span style="">参见: http://saxon.sourceforge.net/</span></li></ul>
<ul><li><a name="Freemind_Link_749951453"></a><span style="">版本: 8.6.1</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_350108460"></a><span style="">xsltproc</span></li></ul>
<ul><li><a name="Freemind_Link_1585073196"></a><span style="">xmlto</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_827292339"></a><span style="">FO engines</span>
<ul><li><a name="Freemind_Link_1535999024"></a><span style="">FOP</span>
<ul><li><a name="Freemind_Link_1681771216"></a><span style="">http://xmlgraphics.apache.org/fop/download.html</span></li></ul>
<ul><li><a name="Freemind_Link_1531884910"></a><span style="">版本: FOP 0.90 alpha 1</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_894321926"></a><span style="">DSSSL 出版工具</span>
<ul><li><a name="Freemind_Link_1163690575"></a><span style="">OpenJade</span>
<ul><li><a name="Freemind_Link_231427236"></a><span style="">http://openjade.sourceforge.net/</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_446765913"></a><span style="">JadeTex</span>
<ul><li><a name="Freemind_Link_1215585829"></a><span style="">http://jadetex.sourceforge.net/</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_252524273"></a><span style="">编辑工具</span>
<ul><li><a name="Freemind_Link_424738459"></a><span style="">http://wiki.docbook.org/topic/DocBookAuthoringTools</span></li></ul>
<ul><li><a name="Freemind_Link_108021110"></a><span style="">写字板 8)</span></li></ul>
<ul><li><a name="Freemind_Link_1798835869"></a><span style="">vi</span></li></ul>
<ul><li><a name="Freemind_Link_1549127962"></a><span style="">emacs</span></li></ul>
<ul><li><a name="Freemind_Link_1355899388"></a><span style="">OpenOffice</span>
<ul><li><a name="Freemind_Link_757136511"></a><span style="">http://xml.openoffice.org/xmerge/docbook/UserGuide.html</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_713953109"></a><span style="">Eclipse</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1853168572"></a><span style="">FOP</span>
<ul><li><a name="Freemind_Link_1895861332"></a><span style="">需要的软件</span>
<ul><li><a name="Freemind_Link_41997342"></a><span style="">FOP 版本</span>
<ul><li><a name="Freemind_Link_283805093"></a><span style="">0.20.5</span></li></ul>
<ul><li><a name="Freemind_Link_387680669"></a><span style="">0.91beta</span>
<ul><li><a name="Freemind_Link_800851331"></a><span style="">fop 中 cygpath，会遇到 filename too long 的问题!</span>
<ul><li><a name="Freemind_Link_809060994"></a><span style="">解决办法: 重新用 shell 实现一个 mycygpath，用 awk 分解再组合</span></li></ul>
<ul><li><a name="Freemind_Link_801361583"></a><span style="">函数 mycygpath</span>
<ul><li><a name="Freemind_Link_1218609873"></a><span style="">function mycygpath()
{
  ARGS=""
  PATHSEPT=":"
  RESULT=""
  SPLIT=no
  while [ $# -gt 0 ]; do
    case $1 in
      --unix|-u)
        PATHSEPT="\\;"
        OUTPATHSEPT=":"
        ARGS="$ARGS $1"
        ;;
      --mixed|--windows|-m|-w)
        PATHSEPT=":"
        OUTPATHSEPT=";"
        ARGS="$ARGS $1"
        ;;
      --path|-p)
        SPLIT=yes
        ;;
      --*)
        ARGS="$ARGS $1"
        ;;
      *)
        TMPPATH=$1
        ;;
    esac
    shift
  done
  
  if [ "$SPLIT" = "no" ]; then
    cygpath $ARGS "$TMPPATH"
  else
    NF=`echo "$TMPPATH" | awk -F${PATHSEPT} '{ print NF }'`
  
    i=1
    while [ $i -le $NF ]; do
      CMDLINE="echo \"$TMPPATH\" | awk -F${PATHSEPT} '{ print \$$i }'"
      PATHITEM=`eval $CMDLINE`
      if [ `echo $PATHITEM|wc -c` -lt 100 ]; then
        PATHITEM=`cygpath $ARGS $PATHITEM`
      fi
      
      if [ "x$RESULT" = "x" ]; then
        RESULT="$PATHITEM"
      else
        RESULT="${RESULT}${OUTPATHSEPT}${PATHITEM}"
      fi
      i=`expr $i + 1`
    done
    echo $RESULT
  fi
}</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_862222677"></a><span style="">JDK</span></li></ul>
<ul><li><a name="Freemind_Link_1154425960"></a><span style="">图像处理</span>
<ul><li><a name="Freemind_Link_1887027140"></a><span style="">JAI</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1348201545"></a><span style="">安装</span>
<ul><li><a name="Freemind_Link_228566917"></a><span style="">安装 Java, JAI</span></li></ul>
<ul><li><a name="Freemind_Link_274360282"></a><span style="">解开 fop 压缩包即可</span></li></ul>
<ul><li><a name="Freemind_Link_1049618837"></a><a style="" href="#Freemind_Link_1685028487">export FOP_OPTS="-Xms100m -Xmx200m" </a>

</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_165420539"></a><span style="">运行</span>
<ul><li><a name="Freemind_Link_1685028487"></a><span style="">扩大内存以及堆栈</span>
<ul><li><a name="Freemind_Link_1540322271"></a><span style="">fop 可能会用到更多的内存和 heap</span>
<ul><li><a name="Freemind_Link_1157997599"></a><span style="">传递 "-Xms100m -Xmx200m" 参数给 JVM</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1900220589"></a><span style="">可以设置 FOP_OPTS  变量</span>
<ul><li><a name="Freemind_Link_792854785"></a><span style="">export FOP_OPTS="-Xms100m -Xmx200m" </span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_156602097"></a><span style="">-Xmx</span>
<ul><li><a name="Freemind_Link_274571160"></a><span style="">Xmx是java的一个选项，用来设置你的应用程序能够使用的最大内存数（看好，致使你的应用程序，不是整个jvm）,如果你的程序要花很大内存的话，那就需要修改缺省的设置，比如配置tomcat的时候，如果流量啊程序啊都很大的话就需要加大这个值了，不过有一点是要记住的，不要大得超过你的机器的内存，那样你的机器会受不了的，到时候就死翘翘了。 </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1951810212"></a><span style="">-Xms</span>
<ul><li><a name="Freemind_Link_399630237"></a><span style="">Xms是另一个设置内存的参数,用它来设置程序初始化的时候内存栈的大小，增加这个值的话你的程序的启动性能会得到提高。不过同样有前面的限制，以及受到xmx的限制。 
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1867959917"></a><span style="">另外，一个操作系统通常都只使用jvm，这就是你说的“运行在同一个JVM中的程序”，不同的虚拟机的实现虽然千差万别，但是他们的运行模式都是一样的，只是性能有所不同罢了。</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_780960159"></a><span style="">FOP 中文化</span>
<ul><li><a name="Freemind_Link_654540447"></a><span style="">http://xmlgraphics.apache.org/fop/0.20.5/fonts.html</span></li></ul>
<ul><li><a name="Freemind_Link_1869142608"></a><span style="">http://www.javaranch.com/journal/200409/CreatingMultipleLanguagePDFusingApacheFOP.html</span></li></ul>
<ul><li><a name="Freemind_Link_900220901"></a><span style="">Use the special xsl to build fo.
(And the FOP has bug to handle FO file which language is zh_cn, So  you may have to replace language="zh_cn" to language="zh")
</span></li></ul>
<ul><li><a name="Freemind_Link_716334656"></a><span style="">Must have the Chinese font files and use org.apache.fop.fonts.apps.
TTFReader to build the font  metrics-files. And build pdf with '-c userconfig.xml' option.
</span></li></ul>
<ul><li><a name="Freemind_Link_938946444"></a><span style="">DocBook  FOP XSL 中文化</span>
<ul><li><a name="Freemind_Link_1684812126"></a><span style="">字体设置需要修改</span>
<ul><li><a name="Freemind_Link_1810276367"></a><span style="">&lt;!-- setup font --&gt; 
&lt;xsl:param name=“body.font.family”&gt;SimSun&lt;/xsl:param&gt; 
&lt;xsl:param name=“body.font.size”&gt;12&lt;/xsl:param&gt; 
&lt;xsl:param name=“title.font.family”&gt;SimSun&lt;/xsl:param&gt; 

</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_881252034"></a><span style="">字体大小</span></li></ul>
<ul><li><a name="Freemind_Link_1269776557"></a><span style="">语言选项</span>
<ul><li><a name="Freemind_Link_439344610"></a><span style="">由于fop 只识别 zh，不识别 zh_cn 或 zh_tw，因此需要修改 
language="zh_cn" 为 language="zh"</span></li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_408164919"></a><span style="">增加中文字体</span>
<ul><li><a name="Freemind_Link_760159654"></a><span style="">中文 TrueType 字体</span>
<ul><li><a name="Freemind_Link_255721604"></a><span style="">直接引用 Windows 的即可</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1697759302"></a><span style="">由 FOP TTFReader 生成的 matrics 文件</span>
<ul><li><a name="Freemind_Link_1615694564"></a><span style="">cd fop

</span></li></ul>
<ul><li><a name="Freemind_Link_118582906"></a><span style="">java -cp build\fop.jar;lib\avalon-framework.jar;lib\xml-apis.jar;lib\xercesImpl.jar;lib\xalan.jar  org.apache.fop.fonts.apps.TTFReader -ttcname SimSun c:\windows\fonts\simsun.ttc simsun.xml</span></li></ul>
<ul><li><a name="Freemind_Link_219762225"></a><span style="">java -cp build\fop.jar;lib\avalon-framework.jar;lib\xml-apis.jar;lib\xercesImpl.jar;lib\xalan.jar  org.apache.fop.fonts.apps.TTFReader -ttcname SimHei C:\WINDOWS\Fonts\simhei.ttf simhei.xml </span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1947478935"></a><span style="">配置文件 fop/conf/userconfig.xml </span>
<ul><li><a name="Freemind_Link_449350261"></a><span style="">在 &lt;fonts&gt;&lt;/fonts&gt; 之间增加</span>
<ul><li><a name="Freemind_Link_1893572613"></a><span style="">  &lt;font metrics-file="C:/Apps/fonts/simsun.xml" 
           embed-file="C:/Apps/fonts/simsun.ttc" kerning="yes"&gt; 
            &lt;font-triplet name="SimSun" style="normal" weight="normal"/&gt; 
            &lt;font-triplet name="SimSun" style="normal" weight="bold"/&gt; 
            &lt;font-triplet name="SimSun" style="italic" weight="normal"/&gt; 
            &lt;font-triplet name="SimSun" style="italic" weight="bold"/&gt; 
  &lt;/font&gt; 
  &lt;font metrics-file="C:/Apps/fonts/simhei.xml" 
           embed-file="C:/Apps//fonts/simhei.ttf" kerning="yes"&gt; 
            &lt;font-triplet name="SimHei" style="normal" weight="normal"/&gt; 
            &lt;font-triplet name="SimHei" style="normal" weight="bold"/&gt; 
            &lt;font-triplet name="SimHei" style="italic" weight="normal"/&gt; 
            &lt;font-triplet name="SimHei" style="italic" weight="bold"/&gt; 
  &lt;/font&gt; 
</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1583211525"></a><span style="">修改 fop.sh</span>
<ul><li><a name="Freemind_Link_207369708"></a><span style="">设置 JAVA_HOME 环境变量</span></li></ul>
<ul><li><a name="Freemind_Link_831054592"></a><span style="">增加 JVM 堆栈大小</span>
<ul><li><a name="Freemind_Link_883242351"></a><span style="">FOP_OPTS="-Xms100m -Xmx200m"</span></li></ul>
<ul><li><a name="Freemind_Link_671810121"></a><span style="">$JAVACMD -classpath ... $FOP_OPTS org.apache.fop.apps.Fop ...</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1271965939"></a><span style="">传递配置文件 userconfig.xml 给 FOP</span>
<ul><li><a name="Freemind_Link_1309992992"></a><span style="">... org.apache.fop.apps.Fop -c e:/Home/WORK/project/subversion/svnbook/src/tools/fop/conf/userconfig.xml 
</span></li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1305204794"></a><span style="">示例</span>
<ul><li><a name="Freemind_Link_1590062099"></a><span style="">FOP_OPTS="-Xms100m -Xmx200m"</span></li></ul>
<ul><li><a name="Freemind_Link_1761370879"></a><span style="">$JAVACMD -classpath "$LOCALCLASSPATH" $FOP_OPTS org.apache.fop.apps.Fop -c e:/Home/WORK/project/subversion/svnbook/src/tools/fop/conf/userconfig.xml "$@" </span></li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul><li><a name="Freemind_Link_1323522775"></a><span style="">FOP 已知问题</span>
<ul><li><a name="Freemind_Link_557106058"></a><span style="">章节标题不能太长，即 &lt;title&gt;...&lt;/title&gt; 中文字不能太多，否则中断执行</span></li></ul>
<ul><li><a name="Freemind_Link_1094429554"></a><span style="">如果设置表格列宽，可能造成 fop 死循环</span>
<ul><li><a name="Freemind_Link_1971637903"></a><span style="">如</span>
<ul><li><a name="Freemind_Link_31995470"></a><span style="">&lt;table frame='topbot'&gt;&lt;title&gt;测试步骤&lt;/title&gt;
&lt;tgroup cols='4' align='left' colsep='1' rowsep='1'&gt;
  &lt;colspec colname='c1' colwidth='1*'/&gt;
  &lt;colspec colname='c2' colwidth='2*'/&gt;
  &lt;colspec colname='c3' colwidth='5*'/&gt;
  &lt;colspec colname='c4' colwidth='5*'/&gt;</span></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</p><p class="info">DocBook//mm2html.xsl FreemindVersion:0.8.0</p></body></html>
